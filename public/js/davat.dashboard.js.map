{"version":3,"sources":["../../resources/davat/js/dashboard/0-dashboard.js","../../resources/davat/js/dashboard/1-select2.js"],"names":[],"mappings":"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","file":"davat.dashboard.js","sourcesContent":["window.davat = {};\n$(document).on('statio:global:renderResponse', function (event, base, context) {\n    base.each(function () {\n\n        davat.select2($('.select2-select', base));\n        if($(base).has('[data-tabs]').length){\n            window.tabs = new Tabby((base.attr('data-xhr') ? '[data-xhr=\"' + base.attr('data-xhr') + '\"] ' : '') + '[data-tabs]');\n\n\n        }\n        $('[data-tabs] a[role=tab]', base).on('click', function(){\n            var href = $(this).attr('href').match(/(\\#.+)$/);\n            if (href[1]) {\n                // location.hash = href[1];\n                // return false;\n                history.pushState(null, null, $(this).attr('href'));\n\n            }\n        })\n    });\n});\n","(function(davat){\n    var select2 = function(){\n        var options = {\n            width: '100%',\n            amdLanguageBase: 'dist/vendors/select2-4.0.13/dist/js/i18n',\n            language: 'fa',\n            minimumInputLength: 0,\n            dir: \"rtl\",\n            templateResult : function(data){\n                if(!data.html){\n                    var html =  $(data.element).parent().data('default-value');\n                    data.html = $('[data-id='+data.id+']', $(html));\n                }\n                return data.html ? $('[data-selection]', data.html) : data.text;\n            },\n            templateSelection : function(data){\n                if(!data.html){\n                    var html =  $(data.element).parent().data('default-value');\n                    html = $('[data-id='+data.id+']', $(html))[0].outerHTML;\n                }\n                html = html || data.html;\n                $('[data-xhr]', html).each(function(){\n                    var xhr = $(this).attr('data-xhr');\n                    new Statio({\n                        type: 'render',\n                        fake: true,\n                        response : $(html).html(),\n                        context: $('[data-xhr='+xhr+']').get(0)\n                    });\n                });\n                return html ? $('[data-selection]', html) : data.text;\n            },\n        };\n        if($('[data-for='+$(this).attr('id')+']')[0]){\n            $(this).data('default-value', $('[data-for='+$(this).attr('id')+']')[0].outerHTML);\n        }\n        $('[data-for='+$(this).attr('id')+']').remove();\n        if ($(this).is('[data-url]')) {\n            var _self = this;\n            options.ajax = {\n                delay: 250,\n                url: $(this).attr('data-url'),\n                quietMillis: 250,\n                beforeSend: function(xhr){xhr.setRequestHeader('data-xhr-base', $(_self).attr('data-xhr-base') || 'select2');},\n                data: function (params) {\n                    return {\n                        q: params.term || ''\n                    };\n                },\n                processResults: function (data) {\n                    data = data.data || data;\n                    var split = data.split(/\\n/, 1);\n                    var html = $('<div>' + data.substr(split[0].length)  + '</div>');\n                    data = JSON.parse(split[0]);\n                    var result = { results: [] };\n                    for (var i = 0; i < data.length; i++) {\n                        result.results.push({\n                            id: data[i].id,\n                            text: data[i].title,\n                            html : $('[data-id=\"'+ data[i].id +'\"]', html).get(0).outerHTML\n                        });\n                    }\n                    return result;\n                },\n                cache: false\n            };\n        }\n        $(this).select2(options);\n        if($(this).is('[data-relation]')){\n            $(this).on('select2:select', function (e) {\n                var relation_ids = $(this).attr('data-relation');\n                var f_id = $(this).val();\n                relation_ids.split(' ').forEach(function (relation_id){\n                    var relation = $('#' + relation_id);\n                    if (!relation.length) return;\n                    var url = unescape(relation.attr('data-url-pattern')).replace('%%', f_id);\n                    relation.attr('data-url', url);\n                    relation.val(null).trigger(\"change\");\n                    relation.select2('destroy');\n                    select2.call(relation[0]);\n                });\n            });\n        }\n    }\n    davat.select2 = function(element){\n        element.each(function(){\n            select2.call(this);\n        });\n    }\n})(window.davat);\n"]}