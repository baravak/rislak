am4chart_fa={Export:"خروجی",Image:"تصویر",Data:"داده",Print:"پرینت   "};var score_chart={};function select2result_room(e,t){if(!e.all&&e.element&&(e.all=JSON.parse($(e.element).attr("data-json")),$(e.element).attr("data-json","")),e.all){var a=$('<div class="d-flex align-items-center fs-12 d-inline-block"><span class="media media-sm media-primary"><img alt="A"></span><div class="pr-1"><div class="font-weight-bold data-name"></div><div class="fs-10 data-id"></div></div></div>'),r=select2find_data(e.all,$(this).attr("data-avatar")||"avatar.tiny.url avatar.small.url");r?$("img",a).attr("src",r):($("img",a).remove(),$(".media",a).html("<span>"+(e.text?e.text.substr(0,1):"IR")+"</span>"));var i=e.text||e.id;$("div.data-name",a).html(i);var n=e.all.center.detail.title;return $("div.data-id",a).html(n),a}return e.text}function select2result_center(e,t){if(!e.all&&e.element&&(e.all=JSON.parse($(e.element).attr("data-json")),$(e.element).attr("data-json","")),e.all){var a=$('<div class="d-flex align-items-center fs-12 d-inline-block"><span class="media media-sm media-primary"><img alt="A"></span><div class="pr-1"><div class="font-weight-bold data-name"></div><div class="fs-10 data-id"></div></div></div>'),r=select2find_data(e.all,$(this).attr("data-avatar")||"detail.avatar.tiny.url detail.avatar.small.url");r?$("img",a).attr("src",r):($("img",a).remove(),$(".media",a).html("<span>"+(e.text?e.text.substr(0,1):"RS")+"</span>"));var i=select2find_data(e.all,$(this).attr("data-title")||"detail.title");$("div.data-name",a).html(i);e.text;return $("div.data-id",a).html(e.id),a}return e.text}function select2result_case_clients(e,t){if(!e.all&&e.element&&(e.all=JSON.parse($(e.element).attr("data-json")),$(e.element).attr("data-json","")),!e.all)return e.text;var a=[];e.all.clients.forEach(function(e){a.push(e.user.name||e.user.id)});var r=$("<span></span>");return $("<div>"+a.join("- ")+"</div>").addClass("fs-12").appendTo(r),$("<div></div>").text(e.id).addClass("fs-10").appendTo(r),r}function select2result_sessions(e,t){if(!e.all&&e.element&&(e.all=JSON.parse($(e.element).attr("data-json")),$(e.element).attr("data-json","")),!e.all)return e.text;var a=$("<div></div>").addClass("row m-0 p-0"),r=new Date(e.all.started_at),i=new persianDate(r).calendar(),n=i.year+"/"+i.month+"/"+i.day,l=r.getHours();return l+=":"+r.getMinutes(),$("<div>"+e.all.status+"</div>").addClass("col-4 fs-12").appendTo(a),$("<div>"+n+"</div>").addClass("col-3 fs-10").appendTo(a),$("<div>"+l+"</div>").addClass("col-3 fs-10").appendTo(a),a}score_chart["16PF-93"]=function(e){var t=am4core.create($(this).attr("id"),am4charts.XYChart);t.language.locale=am4chart_fa,t.rtl=!0;var a={A:{min:"مردم‌گریزی",max:"مردم‌آمیزی"},B:{min:"استدلال عینی",max:"استدلال انتزاعی"},C:{min:"ناپایداری هیجانی",max:"پایداری هیجانی"},E:{min:"سلطه‌پذیری",max:"سلطه‌گری"},F:{min:"دل‌مردگی",max:"سرزندگی"},G:{min:"مصلحت‌گرا",max:"باوجدان"},H:{min:"ترسو",max:"جسور"},I:{min:"یک‌دنده",max:"حساس"},L:{min:"زودباور",max:"شکاک"},M:{min:"عمل‌گرا",max:"کولی‌باز"},N:{min:"بی‌ظرافت",max:"ظرافت"},O:{min:"مستعد احساس گناه",max:"اطمینان به خود"},Q1:{min:"بازبودن نسبت به تغییر",max:"بنیاد‌گرایی"},Q2:{min:"متکی به دیگران",max:"مسلط بر خود"},Q3:{min:"اختلال‌مدار",max:"کمال‌گرا"},Q4:{min:"آرام",max:"اضطراب"}};for(var r in a)t.data.push({factor:r,score:++e[r.toLowerCase()],min:a[r].min,max:a[r].max});t.paddingTop=100;var i=t.chartContainer.createChild(am4core.Label);i.text="عوامل مرتبه اول",i.align="center";var n=t.xAxes.push(new am4charts.CategoryAxis);n.dataFields.category="factor",n.renderer.minGridDistance=1;var l=t.xAxes.push(new am4charts.CategoryAxis);l.dataFields.category="min",l.renderer.labels.template.rotation=90,l.renderer.labels.template.paddingTop=-10,l.renderer.minGridDistance=1,l.renderer.labels.template.fontSize=12,l.renderer.labels.template.fontSize=12,l.renderer.labels.template.valign="top",l.renderer.grid.template.strokeOpacity=.1,l.renderer.grid.template.strokeWidth=0,l.renderer.grid.template.stroke="white",l.renderer.labels.template.adapter.add("fill",function(e,t){if(t.dataItem._dataContext){if(t.dataItem._dataContext.score<=3)return"black";if(4==t.dataItem._dataContext.score)return"#888888"}return"#dedede"}),l.renderer.labels.template.adapter.add("fontWeight",function(e,t){if(t.dataItem._dataContext){if(t.dataItem._dataContext.score<=3)return"900";if(4==t.dataItem._dataContext.score)return"700"}return"normal"});var s=t.xAxes.push(new am4charts.CategoryAxis);s.dataFields.category="max",s.renderer.inside=!0,s.renderer.labels.template.paddingTop=-10,s.renderer.labels.template.paddingLeft=-100,s.renderer.labels.template.rotation=90,s.renderer.labels.template.fontSize=12,s.renderer.minGridDistance=1,s.renderer.labels.template.align="left",s.renderer.labels.template.valign="top",s.renderer.labels.template.adapter.add("fill",function(e,t){if(t.dataItem._dataContext){if(t.dataItem._dataContext.score>=8)return"black";if(7==t.dataItem._dataContext.score)return"#888888"}return"#dedede"}),s.renderer.labels.template.adapter.add("fontWeight",function(e,t){if(t.dataItem._dataContext){if(t.dataItem._dataContext.score>=8)return"900";if(7==t.dataItem._dataContext.score)return"700"}return"normal"});var d=t.yAxes.push(new am4charts.ValueAxis);d.renderer.minGridDistance=10,d.min=0,d.max=10,d.renderer.grid.template.strokeWidth=1;var o=t.series.push(new am4charts.ColumnSeries);o.dataFields.categoryX="factor",o.dataFields.categoryX1="min",o.dataFields.categoryZ="min",o.dataFields.valueY="score",o.columns.template.width=0,o.columns.template.align="left";var c=o.bullets.create(am4charts.CircleBullet);c.fill="#1A5276",c.scale=2.5,c.strokeWidth=0,c.stroke="#1A5276",c.dy=14;var m=o.bullets.push(new am4charts.LabelBullet);function p(e,t,a,r){var i=e.axisRanges.create();i.value=t,i.endValue=a,i.axisFill.fill=r,i.axisFill.fillOpacity=1,i.grid.strokeOpacity=0}m.label.text="{score}",m.label.fontSize=12,m.label.fill="#ffffff",m.label.dy=13,m.label.dx=0,m.label.hideOversized=!1,m.label.truncate=!1,window.test={min:l,max:s,valueAxis:d},p(d,0,1,am4core.color("#5DADE2")),p(d,1,2,am4core.color("#5DADE2")),p(d,2,3,am4core.color("#5DADE2")),p(d,7,8,am4core.color("#5DADE2")),p(d,8,9,am4core.color("#5DADE2")),p(d,9,10,am4core.color("#5DADE2")),p(d,3,4,am4core.color("#D6EAF8")),p(d,6,7,am4core.color("#D6EAF8")),p(d,4,5,am4core.color("#EBF5FB")),p(d,5,6,am4core.color("#EBF5FB")),t.exporting.menu=new am4core.ExportMenu,t.exporting.menu.items=[{label:"خروجی",menu:[{type:"pdf",label:"PDF"},{type:"xlsx",label:"اکسل"}]}];var u=t.createChild(am4core.Label);u.text="risloo.com",u.fontSize=12,u.align="left",u.fillOpacity=.5,t.exporting.adapter.add("pdfmakeDocument",function(e,t){return e.doc.content.unshift({text:"ریسلو",margin:[0,30],style:{fontSize:25,bold:!0}}),e}),t.exporting.getFormatOptions("pdf").addURL=!1},$("body").on("statio:dashboard:sessions:report:create",function(){$("#encryption_type",this).on("change",function(){if("publicKey"!=$(this).val())return $("#encrypt_alert").addClass("d-none"),$("button[type=submit]",$(this).parents("form")).removeAttr("disabled"),void $("#report").removeAttr("readonly");$("button[type=submit]",$(this).parents("form")).attr("disabled","disabled"),$("#encrypt_alert").removeClass("d-none")}).trigger("change"),$("#encrypt_alert button").on("click",function(){if(!$("#report").val())return!0;var e=$("#report").val();$("#report").val(encryptPublicLong(e,auth_public_key)),$("button[type=submit]",$(this).parents("form")).removeAttr("disabled"),$("#encrypt_alert").addClass("d-none"),$("#report").attr("readonly","readonly")})}),$("body").on("statio:dashboard:sessions:create",function(){}),$("body").on("statio:dashboard:samples:show",function(){$("#scoring-btn",this).on("statio:jsonResponse",function(e,t,a){$(".profile-link").remove(),$("#scoring-extends").html(""),t.is_ok||$(".status-action").show()}).on("statio:init",function(){$(".status-action").hide("fast")})}),$("body").on("statio:dashboard:centers:create statio:dashboard:centers:edit",function(){$("[name=type]",this).on("change",function(e,t){var a=$("#manager_id"),r=a.attr("data-url"),i=r;(r=url.parse(r)).get=r.get?r.get:{},$("#type-personal_clinic[name=type]").is(":checked")?(r.get.personal_clinic="no",$("#avatar, #title").prop("disabled",!0),$("#avatar, #title").parents(".form-group").fadeOut("fast")):(t||$("#title").val(""),$("#avatar, #title").prop("disabled",!1),$("#avatar, #title").parents(".form-group").fadeIn("fast"),r.get.personal_clinic="yes"),url.build(r)!=i&&(a.attr("data-url",url.build(r)),$("*",a).remove(),a.select2("destroy"),select2element.call(a[0]))}),$("[name=type]").eq(0).trigger("change",[!0])}),$("body").on("statio:dashboard:reserves:create",function(){$("#started_at").on("change",function(e,t,a){var r=$("#calendar").attr("data-from"),i=$("#calendar").attr("data-to"),n=$(this).val();r<=n&&i>=n||new Statio({type:"render",context:this,ajax:{cache:!1,method:"get",data:{room_id:$("#room_id").val(),time:n}},url:$("#calendar").attr("data-url")})})}),$("body").on("statio:dashboard:center:users:create",function(){$("#position").on("change",function(){"client"==$(this).val()?($("#nickname").parent().show(),$("#room_id").parent().show(),$("#create_case").parent().show()):($("#nickname").parent().hide(),$("#room_id").parent().hide(),$("#create_case").parent().hide())}).trigger("change")}),$("body").on("statio:dashboard:samples:create",function(){$("#room-tab").on("show.bs.tab",function(){$("input, select, checkbox, radio","#room").each(function(){$(this).is(".disabled:disabled")&&$(this).removeAttr("disabled").removeClass("disabled")}),$("input, select, checkbox, radio","#case").each(function(){$(this).is(":disabled")||$(this).attr("disabled","disabled").addClass("disabled")})}).on("hide.bs.tab",function(){$("input, select, checkbox, radio","#room").each(function(){$(this).is(":disabled")||$(this).attr("disabled","disabled").addClass("disabled")}),$("input, select, checkbox, radio","#case").each(function(){$(this).is(".disabled:disabled")&&$(this).removeAttr("disabled").removeClass("disabled")})}),$("#room-tab").trigger(($("#room-tab").is(".active")?"show":"hide")+".bs.tab"),$("#room_client_id").on("change",function(){$(this).val()&&$(this).val().length?$("#count").attr("disabled","disabled"):$("#count").removeAttr("disabled")}),$("#count").on("change",function(){$(this).val()?$("#room_client_id").attr("disabled","disabled"):$("#room_client_id").removeAttr("disabled")})}),$(document).on("statio:global:renderResponse",function(e,t,a){var r=location.hash;$('[data-toggle=tab][href$="'+r+'"]').trigger("click"),$("[data-encType=publicKey]").each(function(){if(localStorage.privateKey){var e=this;asyncDecryptPrivateLong($(this)[$(this).is("input, textarea")?"val":"html"](),localStorage.privateKey).then(function(t){$(e).is("input, textarea")?$(e).val(t):$(e).html(t.replace(/\n/gim,"<br>"))})}}),t.each(function(){$("#privateKey",t).on("change",function(){localStorage.privateKey=$(this).val()}).val(localStorage.privateKey),$("[data-toggle=tab]",t).on("click",function(){var e=$(this).attr("href").match(/(\#.+)$/);e&&(location.hash=e[1])}),$(".score_data",this).each(function(){var e=JSON.parse($(this).text()),t=$(this).attr("data-scale-id");score_chart[t].call(this,e)})})});