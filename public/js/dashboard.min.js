am4chart_fa={Export:"خروجی",Image:"تصویر",Data:"داده",Print:"پرینت   "};var score_chart={};function select2result_room(e,a){if(!e.all&&e.element&&(e.all=JSON.parse($(e.element).attr("data-json")),$(e.element).attr("data-json","")),e.all){var t=$('<div class="d-flex align-items-center fs-12 d-inline-block"><span class="media media-sm media-primary"><img alt="A"></span><div class="pr-1"><div class="font-weight-bold data-name"></div><div class="fs-10 data-id"></div></div></div>'),r=select2find_data(e.all,$(this).attr("data-avatar")||"avatar.tiny.url avatar.small.url");r?$("img",t).attr("src",r):($("img",t).remove(),$(".media",t).html("<span>"+(e.text?e.text.substr(0,1):"IR")+"</span>"));var i=e.text||e.id;$("div.data-name",t).html(i);var n=e.all.owner.name;return"clinic"==e.all.type&&(n=i18n("Personal clinic")),$("div.data-id",t).html(n),t}return e.text}function select2result_case_clients(e,a){if(!e.all)return e.text;var t=[];return e.all.clients.forEach(function(e){t.push(e.user.name||e.user.id)}),$("<span></span>").text(t.join("- ")).addClass("fs-12")}score_chart["16PF-93"]=function(e){var a=am4core.create($(this).attr("id"),am4charts.XYChart);a.language.locale=am4chart_fa,a.rtl=!0;var t={A:{min:"مردم‌گریزی",max:"مردم‌آمیزی"},B:{min:"استدلال عینی",max:"استدلال انتزاعی"},C:{min:"ناپایداری هیجانی",max:"پایداری هیجانی"},E:{min:"سلطه‌پذیری",max:"سلطه‌گری"},F:{min:"دل‌مردگی",max:"سرزندگی"},G:{min:"مصلحت‌گرا",max:"باوجدان"},H:{min:"ترسو",max:"جسور"},I:{min:"یک‌دنده",max:"حساس"},L:{min:"زودباور",max:"شکاک"},M:{min:"عمل‌گرا",max:"کولی‌باز"},N:{min:"بی‌ظرافت",max:"ظرافت"},O:{min:"مستعد احساس گناه",max:"اطمینان به خود"},Q1:{min:"بازبودن نسبت به تغییر",max:"بنیاد‌گرایی"},Q2:{min:"متکی به دیگران",max:"مسلط بر خود"},Q3:{min:"اختلال‌مدار",max:"کمال‌گرا"},Q4:{min:"آرام",max:"اضطراب"}};for(var r in t)a.data.push({factor:r,score:++e[r.toLowerCase()],min:t[r].min,max:t[r].max});a.paddingTop=100;var i=a.chartContainer.createChild(am4core.Label);i.text="عوامل مرتبه اول",i.align="center";var n=a.xAxes.push(new am4charts.CategoryAxis);n.dataFields.category="factor",n.renderer.minGridDistance=1;var l=a.xAxes.push(new am4charts.CategoryAxis);l.dataFields.category="min",l.renderer.labels.template.rotation=90,l.renderer.labels.template.paddingTop=-10,l.renderer.minGridDistance=1,l.renderer.labels.template.fontSize=12,l.renderer.labels.template.fontSize=12,l.renderer.labels.template.valign="top",l.renderer.grid.template.strokeOpacity=.1,l.renderer.grid.template.strokeWidth=0,l.renderer.grid.template.stroke="white",l.renderer.labels.template.adapter.add("fill",function(e,a){if(a.dataItem._dataContext){if(a.dataItem._dataContext.score<=3)return"black";if(4==a.dataItem._dataContext.score)return"#888888"}return"#dedede"}),l.renderer.labels.template.adapter.add("fontWeight",function(e,a){if(a.dataItem._dataContext){if(a.dataItem._dataContext.score<=3)return"900";if(4==a.dataItem._dataContext.score)return"700"}return"normal"});var s=a.xAxes.push(new am4charts.CategoryAxis);s.dataFields.category="max",s.renderer.inside=!0,s.renderer.labels.template.paddingTop=-10,s.renderer.labels.template.paddingLeft=-100,s.renderer.labels.template.rotation=90,s.renderer.labels.template.fontSize=12,s.renderer.minGridDistance=1,s.renderer.labels.template.align="left",s.renderer.labels.template.valign="top",s.renderer.labels.template.adapter.add("fill",function(e,a){if(a.dataItem._dataContext){if(a.dataItem._dataContext.score>=8)return"black";if(7==a.dataItem._dataContext.score)return"#888888"}return"#dedede"}),s.renderer.labels.template.adapter.add("fontWeight",function(e,a){if(a.dataItem._dataContext){if(a.dataItem._dataContext.score>=8)return"900";if(7==a.dataItem._dataContext.score)return"700"}return"normal"});var d=a.yAxes.push(new am4charts.ValueAxis);d.renderer.minGridDistance=10,d.min=0,d.max=10,d.renderer.grid.template.strokeWidth=1;var o=a.series.push(new am4charts.ColumnSeries);o.dataFields.categoryX="factor",o.dataFields.categoryX1="min",o.dataFields.categoryZ="min",o.dataFields.valueY="score",o.columns.template.width=0,o.columns.template.align="left";var c=o.bullets.create(am4charts.CircleBullet);c.fill="#1A5276",c.scale=2.5,c.strokeWidth=0,c.stroke="#1A5276",c.dy=14;var m=o.bullets.push(new am4charts.LabelBullet);function p(e,a,t,r){var i=e.axisRanges.create();i.value=a,i.endValue=t,i.axisFill.fill=r,i.axisFill.fillOpacity=1,i.grid.strokeOpacity=0}m.label.text="{score}",m.label.fontSize=12,m.label.fill="#ffffff",m.label.dy=13,m.label.dx=0,m.label.hideOversized=!1,m.label.truncate=!1,window.test={min:l,max:s,valueAxis:d},p(d,0,1,am4core.color("#5DADE2")),p(d,1,2,am4core.color("#5DADE2")),p(d,2,3,am4core.color("#5DADE2")),p(d,7,8,am4core.color("#5DADE2")),p(d,8,9,am4core.color("#5DADE2")),p(d,9,10,am4core.color("#5DADE2")),p(d,3,4,am4core.color("#D6EAF8")),p(d,6,7,am4core.color("#D6EAF8")),p(d,4,5,am4core.color("#EBF5FB")),p(d,5,6,am4core.color("#EBF5FB")),a.exporting.menu=new am4core.ExportMenu,a.exporting.menu.items=[{label:"خروجی",menu:[{type:"pdf",label:"PDF"},{type:"xlsx",label:"اکسل"}]}];var u=a.createChild(am4core.Label);u.text="risloo.com",u.fontSize=12,u.align="left",u.fillOpacity=.5,a.exporting.adapter.add("pdfmakeDocument",function(e,a){return e.doc.content.unshift({text:"ریسلو",margin:[0,30],style:{fontSize:25,bold:!0}}),e}),a.exporting.getFormatOptions("pdf").addURL=!1},$("body").on("statio:dashboard:centers:create statio:dashboard:centers:edit",function(){$("[name=type]",this).on("change",function(e,a){var t=$("#manager_id"),r=t.attr("data-url"),i=r;(r=url.parse(r)).get=r.get?r.get:{},$("#type-personal_clinic[name=type]").is(":checked")?r.get.personal_clinic="no":(a||$("#title").val(""),r.get.personal_clinic="yes"),$("#user-avatar").trigger("change"),$("#manager_id").trigger("change"),url.build(r)!=i&&(t.attr("data-url",url.build(r)),$("*",t).remove(),t.select2("destroy"),select2element.call(t[0]))}),$("#user-avatar").on("change",function(){if(!$("#type-personal_clinic[name=type]").is(":checked"))return $(this).prop("disabled",!0),$(this).prop("checked",!1),$("#avatar").prop("disabled",!1),!0;$(this).prop("disabled",!1),$(this).is(":checked")?$("#avatar").prop("disabled",!0):$("#avatar").prop("disabled",!1)}),$("#manager_id").on("change",function(){$("#type-personal_clinic[name=type]").is(":checked")?($("#title").prop("disabled",!0),$(this).val()&&$("#title").val(i18n("Personal clinic")+" "+$("option[value="+$(this).val()+"]",this).html())):$("#title").prop("disabled",!1)}),$("[name=type]").eq(0).trigger("change",[!0])}),$("body").on("statio:dashboard:samples:show",function(){$("#editable",this).on("change",function(){$(this).is(":checked")?$(".form-items").removeAttr("disabled"):$(".form-items").attr("disabled","disabled")})}),$("body").on("statio:dashboard:reserves:create",function(){$("#started_at").on("change",function(e,a,t){var r=$("#calendar").attr("data-from"),i=$("#calendar").attr("data-to"),n=$(this).val();r<=n&&i>=n||new Statio({type:"render",context:this,ajax:{cache:!1,method:"get",data:{room_id:$("#room_id").val(),time:n}},url:$("#calendar").attr("data-url")})})}),$("body").on("statio:dashboard:samples:create",function(){$("#room-tab").on("show.bs.tab",function(){$("input, select, checkbox, radio","#room").each(function(){$(this).is(".disabled:disabled")&&$(this).removeAttr("disabled").removeClass("disabled")}),$("input, select, checkbox, radio","#case").each(function(){$(this).is(":disabled")||$(this).attr("disabled","disabled").addClass("disabled")})}).on("hide.bs.tab",function(){$("input, select, checkbox, radio","#room").each(function(){$(this).is(":disabled")||$(this).attr("disabled","disabled").addClass("disabled")}),$("input, select, checkbox, radio","#case").each(function(){$(this).is(".disabled:disabled")&&$(this).removeAttr("disabled").removeClass("disabled")})}),$("#room_client_id.sample-page").on("change",function(){$(this).val()&&$(this).val().length?$("#count").attr("disabled","disabled"):$("#count").removeAttr("disabled")}),$("#count.sample-page").on("change",function(){$(this).val()?$("#room_client_id.sample-page").attr("disabled","disabled"):$("#room_client_id.sample-page").removeAttr("disabled")}),$("#case_id").on("select2:select",function(e){$("#client-null-tamplate").hide(),e.params.data.all.clients.forEach(function(e,a){var t=$("#client-template").clone();t.removeClass("d-none"),t.removeAttr("id"),$(".data-name",t).text(e.user.name),(e.user.avatar?e.user.avatar.small:null)?$("img",t).attr("src",e.user.avatar.small.url):($("img",t).remove(),$(".media",t).append("<span>"+e.user.name.substr(0,1)+"</span>")),$("input",t).attr("id","client-"+e.user.id).attr("name","client_id[]").attr("value",e.id),$("label",t).attr("for","client-"+e.user.id),t.appendTo("#client-list")})}),$("#case_id").on("change",function(){$("#client-list .richak").remove(),$(this).val()||$("#client-null-tamplate").show()})}),$(document).on("statio:global:renderResponse",function(e,a,t){var r=location.hash;$('[data-toggle=tab][href$="'+r+'"]').trigger("click"),a.each(function(){$("[data-toggle=tab]",a).on("click",function(){var e=$(this).attr("href").match(/(\#.+)$/);e&&(location.hash=e[1])}),$(".score_data",this).each(function(){var e=JSON.parse($(this).text()),a=$(this).attr("data-scale-id");score_chart[a].call(this,e)})})});