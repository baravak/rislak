(function(){
	function jresp(context, res)
	{
		context.trigger('jresp', [res]);
		if (res.message && !context.is('.d-notification'))
		{
			if (window.toastr)
			{
				var toast = toastr[res.is_ok ? 'success' : 'error'](res.message_text || res.message, undefined, {
					"closeButton": true,
					"newestOnTop": true,
					"positionClass": "toast-bottom-right",
				});
			}
			else if (window.iziToast)
			{
				iziToast[res.is_ok ? 'success' : 'error']({ message: res.message_text || res.message});
			}
		}
		if(res.redirect)
		{
			if(res.direct)
			{
				location.href = res.redirect;
			}
			else
			{
				new Statio({
					url : res.redirect
				});
			}
		}
	}
	window.JResp = jresp;
})();
(function(){
	function lijax(context, onFire)
	{
        var back_value = $(context).val() || $(context).attr('data-value');
        if($(context).is(':checkbox'))
        {
            back_value = $(context).is(':checked') ? 1 : 0;
        }
        var Timeout = null;
        var fire = null;
        if($(context).is('form') && !$(context).attr('data-lijax'))
        {
            fire = ['submit'];
        }
        else
        {
            fire = $(context).attr('data-lijax').split(' ') || ['change'];
        }
        for (var i = 0; i < fire.length; i++) {
            if(/^\d+$/.test(fire[i]))
            {
                var Time = fire[i];
                $(context).on('keyup', function(){
                    if(Timeout) clearTimeout(Timeout);
                    Timeout = setTimeout(send, Time);
                });
            }
            else
            {
                $(context).on(fire[i], send);
            }
        }

        function send()
        {
            var href = url.parse(location.href);
            var name = $(context).attr('name') || $(context).attr('data-name');
            if(href.get && href.get[name])
            {
                delete href.get[name];
            }
            var get = url.buildget(href.get);
            href = href.url.replace(/\?(.*)$/, get ? '?' + get : '');
            var action = $(context).attr('href') || $(context).attr('action') || $(context).attr('data-action') || href;
            var method = $(context).attr('data-method') || $(context).attr('method') || 'GET';
            var state = $(context).attr('data-state');
            var value = undefined;
            if($(context).is('form'))
            {
                var Data = new FormData(context);
                var data = {};
				if ($(context).attr('enctype') == 'multipart/form-data' || $('input:file', context).length)
                {
                    data = Data;
                }
                else
                {
                    Data.forEach(function (value, name) {
                        data[name] = /\[.*\]$/.test(name) ? Data.getAll(name) : Data.get(name);
                    });
                }
                state = false;
                $(context).addClass('lijax-sending');
                $('input, select, textarea, button', context).not(':disabled').addClass('lijax-disable').attr('disabled', 'disabled');
                $(context).on('statio:done', function () {
                    $('.lijax-disable', this).removeClass('lijax-disable').removeAttr('disabled')
                    $(this).removeClass('lijax-sending');
                });
            }
            else
            {
                value = $(context).val() || $(context).attr('data-value') || null;
                if($(context).is(':checkbox'))
                {
                    value = $(context).is(':checked') ? 1 : 0;
                }
                if(back_value == value && $(context).is('input, textarea, select') && !onFire) return;
                back_value = value;
                var data = {};
                data[name] = value;
            }
            if ($(context).attr('data-query'))
            {
                var action_query = url.parse(action);
                var data_query = url.parse('?' + $(context).attr('data-query'));
                action_query.get = $.extend(null, (action_query.get || {}), data_query.get);
                action = url.build(action_query);
            }
            var headers = {};
            if ($(context).attr('data-xhrBase'))
            {
                headers = {
                    'Data-xhr-base': $(context).attr('data-xhrBase')
                };
            }
            new Statio({
                type : state ? 'both' : 'render',
                context: context,
                ajax : {
					contentType: $(context).is('form') && ($(context).attr('enctype') == 'multipart/form-data' || $('input:file', context).length) ? false : 'application/x-www-form-urlencoded; charset=UTF-8',
					processData: ($(context).is('form') && ($(context).attr('enctype') == 'multipart/form-data' || $('input:file', context).length)) ? false : true,
                    cache       : false,
                    method : method,
                    data : data,
                    headers: headers
                },
                url : action
            });
            return false;
        }
        if (onFire)
        {
            send();
        }
    }
    window.Lijax = lijax;
})();
(function(){
	var _globals = {
		title : function (value){
			$('title').html(value);
		}
	}

	var _ajax = {
		type : 'GET',
		cache : false
	}

	var _options = {
		object : null,
		title : null,
		ajax : _ajax,
	/**
	 * Send request and change url with response rendering
	 * @default both
	 * both: change url and render response
	 * url: Only send request and chage url without change rendering
	 * render: Only send request and render repsonse without change url
	 * @type {String}
	 */
	 type : 'both',
	/**
	 * dont send any request
	 * @type {Boolean}
	 */
	 fake : false,
	/**
	 * ajax response contetnt
	 * if {fake:true} or {response : notnull} response render this property
	 * @type {[type]}
	 */
	 response : null,
	/**
	 * replace state
	 * @type {Boolean}
	 */
	 replace : false,
	/**
	 * event context
	 * @type {DOM} {jQuery} {Selector string}
	 */
	 context : document
	}

	function statio(custom){
		if(typeof custom != 'object')
		{
			custom = {};
		}

		custom.ajax = $.extend({}, _ajax, custom.ajax);
		custom.ajax.url = custom.url;
		custom.globals = $.extend({}, _globals, custom.globals);
		var options = $.extend({}, _options, custom);

		var response = {
			body : options.response,
			data : {},
		};

		if(!(options.context instanceof jQuery))
		{
			options.context = $(options.context);
		}

		$(document).trigger('statio:global:init', [options.context]);
		options.context.trigger('statio:init');


		var ajax_data = null;
		var ajax_send_url = null;
		if(!options.fake)
		{
			if(!options.ajax.complete)
			{
				options.ajax.complete = ajx_complete;
			}
			var beforeSend = options.ajax.beforeSend;
			options.ajax.beforeSend = function(jqXHR, settings)
			{
				ajax_data = this;
				ajax_send_url = this.url;
				var urlx = url.parse(ajax_send_url);
				if(urlx.get && urlx.get._)
				{
					delete urlx.get._;
				}
            	var get = url.buildget(urlx.get);
            	ajax_send_url = urlx.url.replace(/\?(.*)$/, get ? '?' + get : '');
				beforeSend ? beforeSend.call(this, jqXHR, settings) : null;
			}
			$.ajax(options.ajax);
		}
		else if(options.type != 'url' && response.body)
		{
			response_parse();
			render();
			$(document).trigger('statio:global:done', [options.context]);
			options.context.trigger('statio:done');
		}
		else
		{
			try {
				options.replace
					? history.replaceState(JSON.parse(JSON.stringify(options)), options.title, ajax_send_url || options.url)
					: history.pushState(JSON.parse(JSON.stringify(options)), options.title, ajax_send_url || options.url);
			}
			catch (e) {
				console.error(e);
			}
			$(document).trigger('statio:global:done', [options.context]);
			options.context.trigger('statio:done');
		}

		function ajx_complete(jqXHR, textStatus)
		{
			if(jqXHR.responseJSON)
			{
				response.data = jqXHR.responseJSON;
				$(document).trigger('statio:global:jsonResponse', [options.context, jqXHR.responseJSON, jqXHR]);
				options.context.trigger('statio:jsonResponse', [jqXHR.responseJSON, jqXHR]);
				new JResp(options.context, response.data);
			}
			else
			{
				response.body = jqXHR.responseText;
				response_parse();
				if(textStatus == 'success')
				{
					if (options.type != 'render') {
						try {
							options.response = response;
							options.replace
								? history.replaceState(JSON.parse(JSON.stringify(options)), options.title, ajax_send_url || options.url)
								: history.pushState(JSON.parse(JSON.stringify(options)), options.title, ajax_send_url || options.url);
						}
						catch (e) {
							try{
								options.replace
									? history.replaceState(options.data, options.title, ajax_send_url || options.url)
									: history.pushState(options.data, options.title, ajax_send_url || options.url);

							}
							catch (e){
								console.error(e);
							}
						}
					}
					$(document).trigger('statio:global:success', [options.context, response.data, response.body, jqXHR]);
					options.context.trigger('statio:success', [response.data, response.body, jqXHR]);
					if(options.type != 'url')
					{
						render();
					}
				}
				else
				{
					$(document).trigger('statio:global:errorResponse', [options.context, response.data, response.body, jqXHR]);
					options.context.trigger('statio:errorResponse', [response.data, response.body, jqXHR]);
				}
			}
			$(document).trigger('statio:global:done', [options.context, response.data, response.body, jqXHR]);
			options.context.trigger('statio:done', [response.data, response.body, jqXHR]);
		}

		function response_parse(){
			if(typeof response.body == 'string')
			{
				try
				{
					var split     = response.body.split("\n");
					response.data = JSON.parse(split[0]);
					response.body = split.length > 1 ? $($.parseHTML(split.splice(1).join(""))) : null;
				}catch(e){
					response.body  = $($.parseHTML(response.body));
				}
			}
			else if(typeof response.body == 'object' && response.body != null)
			{
				if(response.body instanceof HTMLElement)
				{
					response.body  = $(response.body);
				}
				else if(response.body instanceof jQuery)
				{

				}
				else
				{
					response.data = response.body;
					response.body = null;
				}
			}
		}

		function render(){
			for(D in response.data)
			{
				if(options.globals[D])
				{
					options.globals[D](response.data[D]);
				}
			}
			if(response.body)
			{
				var changed = [];
				response.body.each(function(){
					var base = $(this).attr('data-xhr');
					if(base)
					{
						changed.push($("[data-xhr='"+base+"']"));
						$("[data-xhr='"+base+"']").html($(this).html());
					}
				});
				$(document).trigger('statio:global:renderResponse', [$(changed), options.context, response.data, response.body]);
				options.context.trigger('statio:renderResponse', [$(changed), response.data, response.body]);
			}
		}
		return this;
	}
	window.Statio = statio;
	/**
	 * for new chrome bug
	 */
	 new Statio({
	 	url : location.href,
	 	fake : true,
	 	replace : true
	 });

	/**
	 * popstate event
	 */
	 window.onpopstate = function(event){
	 	new Statio({
	 		url : location.href,
	 		replace : true
	 	});
	 };
})();

// Copyright 2013-2014 Kevin Cox

/*******************************************************************************
*                                                                              *
*  This software is provided 'as-is', without any express or implied           *
*  warranty. In no event will the authors be held liable for any damages       *
*  arising from the use of this software.                                      *
*                                                                              *
*  Permission is granted to anyone to use this software for any purpose,       *
*  including commercial applications, and to alter it and redistribute it      *
*  freely, subject to the following restrictions:                              *
*                                                                              *
*  1. The origin of this software must not be misrepresented; you must not     *
*     claim that you wrote the original software. If you use this software in  *
*     a product, an acknowledgment in the product documentation would be       *
*     appreciated but is not required.                                         *
*                                                                              *
*  2. Altered source versions must be plainly marked as such, and must not be  *
*     misrepresented as being the original software.                           *
*                                                                              *
*  3. This notice may not be removed or altered from any source distribution.  *
*                                                                              *
*******************************************************************************/

+function(){
"use strict";

var array = /\[([^\[]*)\]$/;

/// URL Regex.
/**
 * This regex splits the URL into parts.  The capture groups catch the important
 * bits.
 *
 * Each section is optional, so to work on any part find the correct top level
 * `(...)?` and mess around with it.
 */
var regex = /^(?:([a-z]*):)?(?:\/\/)?(?:([^:@]*)(?::([^@]*))?@)?([0-9a-z-._]+)?(?::([0-9]*))?(\/[^?#]*)?(?:\?([^#]*))?(?:#(.*))?$/i;
//               1 - scheme              2 - user    3 = pass    4 - host           5 - port  6 - path        7 - query    8 - hash

var noslash = ["mailto","bitcoin"];

var self = {
	/** Parse a query string.
	 *
	 * This function parses a query string (sometimes called the search
	 * string).  It takes a query string and returns a map of the results.
	 *
	 * Keys are considered to be everything up to the first '=' and values are
	 * everything afterwords.  Since URL-decoding is done after parsing, keys
	 * and values can have any values, however, '=' have to be encoded in keys
	 * while '?' and '&' have to be encoded anywhere (as they delimit the
	 * kv-pairs).
	 *
	 * Keys and values will always be strings, except if there is a key with no
	 * '=' in which case it will be considered a flag and will be set to true.
	 * Later values will override earlier values.
	 *
	 * Array keys are also supported.  By default keys in the form of `name[i]`
	 * will be returned like that as strings.  However, if you set the `array`
	 * flag in the options object they will be parsed into arrays.  Note that
	 * although the object returned is an `Array` object all keys will be
	 * written to it.  This means that if you have a key such as `k[forEach]`
	 * it will overwrite the `forEach` function on that array.  Also note that
	 * string properties always take precedence over array properties,
	 * irrespective of where they are in the query string.
	 *
	 *   url.get("array[1]=test&array[foo]=bar",{array:true}).array[1]  === "test"
	 *   url.get("array[1]=test&array[foo]=bar",{array:true}).array.foo === "bar"
	 *   url.get("array=notanarray&array[0]=1",{array:true}).array      === "notanarray"
	 *
	 * If array parsing is enabled keys in the form of `name[]` will
	 * automatically be given the next available index.  Note that this can be
	 * overwritten with later values in the query string.  For this reason is
	 * is best not to mix the two formats, although it is safe (and often
	 * useful) to add an automatic index argument to the end of a query string.
	 *
	 *   url.get("a[]=0&a[]=1&a[0]=2", {array:true})  -> {a:["2","1"]};
	 *   url.get("a[0]=0&a[1]=1&a[]=2", {array:true}) -> {a:["0","1","2"]};
	 *
	 * @param{string} q The query string (the part after the '?').
	 * @param{{full:boolean,array:boolean}=} opt Options.
	 *
	 * - full: If set `q` will be treated as a full url and `q` will be built.
	 *   by calling #parse to retrieve the query portion.
	 * - array: If set keys in the form of `key[i]` will be treated
	 *   as arrays/maps.
	 *
	 * @return{!Object.<string, string|Array>} The parsed result.
	 */
	"get": function(q, opt){
		q = q || "";
		if ( typeof opt          == "undefined" ) opt = {};
		if ( typeof opt["full"]  == "undefined" ) opt["full"] = false;
		if ( typeof opt["array"] == "undefined" ) opt["array"] = false;

		if ( opt["full"] === true )
		{
			q = self["parse"](q, {"get":false})["query"] || "";
		}

		var o = {};

		var c = q.split("&");
		for (var i = 0; i < c.length; i++)
		{
			if (!c[i].length) continue;

			var d = c[i].indexOf("=");
			var k = c[i], v = true;
			if ( d >= 0 )
			{
				k = c[i].substr(0, d);
				v = c[i].substr(d+1);

				v = decodeURIComponent(v);
			}

			if (opt["array"])
			{
				var inds = [];
				var ind;
				var curo = o;
				var curk = k;
				while (ind = curk.match(array)) // Array!
				{
					curk = curk.substr(0, ind.index);
					inds.unshift(decodeURIComponent(ind[1]));
				}
				curk = decodeURIComponent(curk);
				if (inds.some(function(i)
				{
					if ( typeof curo[curk] == "undefined" ) curo[curk] = [];
					if (!Array.isArray(curo[curk]))
					{
						//console.log("url.get: Array property "+curk+" already exists as string!");
						return true;
					}

					curo = curo[curk];

					if ( i === "" ) i = curo.length;

					curk = i;
				})) continue;
				curo[curk] = v;
				continue;
			}

			k = decodeURIComponent(k);

			//typeof o[k] == "undefined" || console.log("Property "+k+" already exists!");
			o[k] = v;
		}

		return o;
	},

	/** Build a get query from an object.
	 *
	 * This constructs a query string from the kv pairs in `data`.  Calling
	 * #get on the string returned should return an object identical to the one
	 * passed in except all non-boolean scalar types become strings and all
	 * object types become arrays (non-integer keys are still present, see
	 * #get's documentation for more details).
	 *
	 * This always uses array syntax for describing arrays.  If you want to
	 * serialize them differently (like having the value be a JSON array and
	 * have a plain key) you will need to do that before passing it in.
	 *
	 * All keys and values are supported (binary data anyone?) as they are
	 * properly URL-encoded and #get properly decodes.
	 *
	 * @param{Object} data The kv pairs.
	 * @param{string} prefix The properly encoded array key to put the
	 *   properties.  Mainly intended for internal use.
	 * @return{string} A URL-safe string.
	 */
	"buildget": function(data, prefix){
		var itms = [];
		for ( var k in data )
		{
			var ek = encodeURIComponent(k);
			if ( typeof prefix != "undefined" )
				ek = prefix+"["+ek+"]";

			var v = data[k];

			switch (typeof v)
			{
				case 'boolean':
					if(v) itms.push(ek);
					break;
				case 'number':
					v = v.toString();
				case 'string':
					itms.push(ek+"="+encodeURIComponent(v));
					break;
				case 'object':
					itms.push(self["buildget"](v, ek));
					break;
			}
		}
		return itms.join("&");
	},

	/** Parse a URL
	 *
	 * This breaks up a URL into components.  It attempts to be very liberal
	 * and returns the best result in most cases.  This means that you can
	 * often pass in part of a URL and get correct categories back.  Notably,
	 * this works for emails and Jabber IDs, as well as adding a '?' to the
	 * beginning of a string will parse the whole thing as a query string.  If
	 * an item is not found the property will be undefined.  In some cases an
	 * empty string will be returned if the surrounding syntax but the actual
	 * value is empty (example: "://example.com" will give a empty string for
	 * scheme.)  Notably the host name will always be set to something.
	 *
	 * Returned properties.
	 *
	 * - **scheme:** The url scheme. (ex: "mailto" or "https")
	 * - **user:** The username.
	 * - **pass:** The password.
	 * - **host:** The hostname. (ex: "localhost", "123.456.7.8" or "example.com")
	 * - **port:** The port, as a number. (ex: 1337)
	 * - **path:** The path. (ex: "/" or "/about.html")
	 * - **query:** "The query string. (ex: "foo=bar&v=17&format=json")
	 * - **get:** The query string parsed with get.  If `opt.get` is `false` this
	 *   will be absent
	 * - **hash:** The value after the hash. (ex: "myanchor")
	 *   be undefined even if `query` is set.
	 *
	 * @param{string} url The URL to parse.
	 * @param{{get:Object}=} opt Options:
	 *
	 * - get: An options argument to be passed to #get or false to not call #get.
	 *    **DO NOT** set `full`.
	 *
	 * @return{!Object} An object with the parsed values.
	 */
	"parse": function(url, opt) {

		if ( typeof opt == "undefined" ) opt = {};

		var md = url.match(regex) || [];

		var r = {
			"url":    url,

			"scheme": md[1],
			"user":   md[2],
			"pass":   md[3],
			"host":   md[4],
			"port":   md[5] && +md[5],
			"path":   md[6],
			"query":  md[7],
			"hash":   md[8],
		};

		if ( opt.get !== false )
			r["get"] = r["query"] && self["get"](r["query"], opt.get);

		return r;
	},

	/** Build a URL from components.
	 *
	 * This pieces together a url from the properties of the passed in object.
	 * In general passing the result of `parse()` should return the URL.  There
	 * may differences in the get string as the keys and values might be more
	 * encoded then they were originally were.  However, calling `get()` on the
	 * two values should yield the same result.
	 *
	 * Here is how the parameters are used.
	 *
	 *  - url: Used only if no other values are provided.  If that is the case
	 *     `url` will be returned verbatim.
	 *  - scheme: Used if defined.
	 *  - user: Used if defined.
	 *  - pass: Used if defined.
	 *  - host: Used if defined.
	 *  - path: Used if defined.
	 *  - query: Used only if `get` is not provided and non-empty.
	 *  - get: Used if non-empty.  Passed to #buildget and the result is used
	 *    as the query string.
	 *  - hash: Used if defined.
	 *
	 * These are the options that are valid on the options object.
	 *
	 *  - useemptyget: If truthy, a question mark will be appended for empty get
	 *    strings.  This notably makes `build()` and `parse()` fully symmetric.
	 *
	 * @param{Object} data The pieces of the URL.
	 * @param{Object} opt Options for building the url.
	 * @return{string} The URL.
	 */
	"build": function(data, opt){
		opt = opt || {};

		var r = "";

		if ( typeof data["scheme"] != "undefined" )
		{
			r += data["scheme"];
			r += (noslash.indexOf(data["scheme"])>=0)?":":"://";
		}
		if ( typeof data["user"] != "undefined" )
		{
			r += data["user"];
			if ( typeof data["pass"] == "undefined" )
			{
				r += "@";
			}
		}
		if ( typeof data["pass"] != "undefined" ) r += ":" + data["pass"] + "@";
		if ( typeof data["host"] != "undefined" ) r += data["host"];
		if ( typeof data["port"] != "undefined" ) r += ":" + data["port"];
		if ( typeof data["path"] != "undefined" ) r += data["path"];

		if (opt["useemptyget"])
		{
			if      ( typeof data["get"]   != "undefined" ) r += "?" + self["buildget"](data["get"]);
			else if ( typeof data["query"] != "undefined" ) r += "?" + data["query"];
		}
		else
		{
			// If .get use it.  If .get leads to empty, use .query.
			var q = data["get"] && self["buildget"](data["get"]) || data["query"];
			if (q) r += "?" + q;
		}

		if ( typeof data["hash"] != "undefined" ) r += "#" + data["hash"];

		return r || data["url"] || "";
	},
};

if ( typeof define != "undefined" && define["amd"] ) define(self);
else if ( typeof module != "undefined" ) module['exports'] = self;
else window["url"] = self;

}();
const aside = document.querySelector('#aside');
const asideBtn = document.querySelector('#aside-btn');
function handleAside(event) {
    aside.classList.add('open');
}
if (asideBtn)
{
    asideBtn.addEventListener('click', handleAside);
}

const profile = document.querySelector('.profile');
const dropdown = document.querySelector('.profile-dropdown');

function handleProfileClick(event) {
    dropdown.classList.add('open');
}

profile.addEventListener('click', handleProfileClick);
window.addEventListener('click', function(event) {
    if (!event.target.closest('.profile-div')) {
        dropdown.classList.remove('open');
    }
    if (!event.target.closest('#aside') && !event.target.closest('#aside-btn')) {
        aside.classList.remove('open');
    }
});

am4core.ready(function () {

    // Themes begin
    am4core.useTheme(am4themes_amcharts);
    // Themes end

    // Create chart instance
    var chart = am4core.create("chartdiv", am4charts.XYChart);

    chart.rtl = true;

    // Add data
    chart.data = [{
        "country": "USA",
        "visits": 2025
    }, {
        "country": "China",
        "visits": 1882
    }, {
        "country": "Japan",
        "visits": 1809
    }, {
        "country": "Germany",
        "visits": 1322
    }, {
        "country": "UK",
        "visits": 1122
    }, {
        "country": "France",
        "visits": 1114
    }, {
        "country": "India",
        "visits": 984
    }, {
        "country": "Spain",
        "visits": 711
    }, {
        "country": "Netherlands",
        "visits": 665
    }, {
        "country": "Russia",
        "visits": 580
    }, {
        "country": "South Korea",
        "visits": 443
    }, {
        "country": "Canada",
        "visits": 441
    }, {
        "country": "Brazil",
        "visits": 395
    }];

    // Create axes

    var categoryAxis = chart.xAxes.push(new am4charts.CategoryAxis());
    categoryAxis.dataFields.category = "country";
    categoryAxis.renderer.grid.template.location = 0;
    categoryAxis.renderer.minGridDistance = 30;

    categoryAxis.renderer.labels.template.adapter.add("dy", function (dy, target) {
        if (target.dataItem && target.dataItem.index & 2 == 2) {
            return dy + 25;
        }
        return dy;
    });

    var valueAxis = chart.yAxes.push(new am4charts.ValueAxis());

    // Create series
    var series = chart.series.push(new am4charts.ColumnSeries());
    series.dataFields.valueY = "visits";
    series.dataFields.categoryX = "country";
    series.name = "Visits";
    series.columns.template.tooltipText = "{categoryX}: [bold]{valueY}[/]";
    series.columns.template.fillOpacity = .8;

    var columnTemplate = series.columns.template;
    columnTemplate.strokeWidth = 2;
    columnTemplate.strokeOpacity = 1;

}); // end am4core.ready()

$(document).ready(function() {
    $('.select2').select2();
});

function readURL(input) {
    if (input.files && input.files[0]) {
        var reader = new FileReader();

        reader.onload = function(e) {
            $(input).next('label').children('img').attr('src', e.target.result);
        }

        reader.readAsDataURL(input.files[0]);
    }
  }

$('.input-avatar').change(function() {
    readURL(this);
});

var datepicker = function (elementID, opt) {

    // check arguments
    if (typeof elementID !== "string" || elementID.length === 0) {
        console.error("datepicker error: input ID is not string or is empty");
        return;
    }
    var options = opt || {};

    // variables
    var isCalClicked = false;
    var isSynced = false;

    var dayOfWeek;

    var selectedYear;
    var selectedMonth;
    var selectedDay;

    var currentYear;
    var currentMonth;
    var currentDay;

    var todaysYear;
    var todaysMonth;
    var todaysDay;

    var dayOfWeekJ;

    var numberOfDays;

    var todayG;
    var todaysJ;

    // consts
    var MONTH_NAMES = {
        "1": "فروردین"
        , "2": "اردیبهشت"
        , "3": "خرداد"
        , "4": "تیر"
        , "5": "مرداد"
        , "6": "شهریور"
        , "7": "مهر"
        , "8": "آبان"
        , "9": "آذر"
        , "10": "دی"
        , "11": "بهمن"
        , "12": "اسفند"
    }
    var DAY_NAMES = {
        "شنبه": "ش"
        , "یکشنبه": "ی"
        , "دوشنبه": "د"
        , "سه شنبه": "س"
        , "چهارشنبه": "چ"
        , "پنج شنبه": "پ"
        , "جمعه": "ج"
    };
    var FA_NUMS = ['٠', '١', '٢', '٣', '۴', '۵', '۶', '٧', '٨', '٩', '١٠', '١١', '١٢', '١٣', '١۴', '١۵', '١۶', '١٧', '١٨', '١٩', '٢٠', '٢١', '٢٢', '٢٣', '٢۴', '٢۵', '٢۶', '٢٧', '٢٨', '٢٩', '٣٠', '٣١', '٣٢'];

    // set options
    options.placeholder = options.placeholder !== undefined ? options.placeholder : "";
    options.twodigit = options.twodigit !== undefined ? options.twodigit : true;
    options.closeAfterSelect = options.closeAfterSelect !== undefined ? options.closeAfterSelect : true;
    options.nextButtonIcon = options.nextButtonIcon !== undefined ? options.nextButtonIcon : false;
    options.previousButtonIcon = options.previousButtonIcon !== undefined ? options.previousButtonIcon : false;
    options.buttonsColor = options.buttonsColor !== undefined ? options.buttonsColor : false;
    options.forceFarsiDigits = options.forceFarsiDigits !== undefined ? options.forceFarsiDigits : false;
    options.markToday = options.markToday !== undefined ? options.markToday : false;
    options.markHolidays = options.markHolidays !== undefined ? options.markHolidays : false;
    options.highlightSelectedDay = options.highlightSelectedDay !== undefined ? options.highlightSelectedDay : false;
    options.sync = options.sync !== undefined ? options.sync : false;
    options.gotoToday = options.gotoToday !== undefined ? options.gotoToday : false;

    // create DOM
    var inputElement = $("#" + elementID);

    if (inputElement.attr("placeholder") === undefined) {
        inputElement.attr("placeholder", options.placeholder);
    }

    // create parent div
    inputElement.wrap("<div id='bd-root-" + elementID + "' style='position: relative;'></div>");

    // create main div for calendar, below input element
    inputElement.after("<div id='bd-main-" + elementID + "' class='bd-main bd-hide' style='position: absolute; direction: rtl;'></div>");
    var mainDiv = $("#bd-main-" + elementID);

    // create calendar div inside main div
    mainDiv.append("<div class='bd-calendar'></div>");
    var calendarDiv = mainDiv.find('.bd-calendar');

    // create title div and table inside calendar div
    calendarDiv.append("<div class='bd-title'></div>");
    var titleDiv = calendarDiv.find('.bd-title');
    calendarDiv.append("<table class='bd-table' dir='rtl' cellspacing='0' cellpadding='0'></table>");

    // create month and year drop downs and next/prev month buttons inside title div
    titleDiv.append("<button id='bd-next-" + elementID + "' class='bd-next' type='button' title='ماه بعدی' data-toggle='tooltip'><span>بعدی</span></button>");
    var nextMonth = $("#bd-next-" + elementID);
    if (options.nextButtonIcon) {
        nextMonth.find("span").css("display", "none");
        if (options.nextButtonIcon.indexOf(".") !== -1) {
            // image
            nextMonth.css("background-image", "url(" + options.nextButtonIcon + ")");
        } else {
            // css class
            nextMonth.addClass(options.nextButtonIcon);
        }
    }

    titleDiv.append("<div class='bd-dropdown'></div><div class='bd-dropdown'></div>");

    titleDiv.find('.bd-dropdown:nth-child(2)').append("<select id='bd-month-" + elementID + "' class='bd-month'></select>");
    var monthDropdown = $("#bd-month-" + elementID);
    $.each(MONTH_NAMES, function (key, value) {
        monthDropdown.append($("<option></option>").attr("value", key).text(value));
    });

    titleDiv.find('.bd-dropdown:nth-child(3)').append("<select id='bd-year-" + elementID + "' class='bd-year'></select>");
    var yearDropdown = $("#bd-year-" + elementID);

    titleDiv.append("<button id='bd-prev-" + elementID + "' class='bd-prev' type='button' title='ماه قبلی' data-toggle='tooltip'><span>قبلی</span></button>");
    var prevMonth = $("#bd-prev-" + elementID);
    if (options.nextButtonIcon) {
        prevMonth.find("span").css("display", "none");
        if (options.previousButtonIcon.indexOf(".") !== -1) {
            // image
            prevMonth.css("background-image", "url(" + options.previousButtonIcon + ")");
        } else {
            // css class
            prevMonth.addClass(options.previousButtonIcon);
        }
    }

    if (options.buttonsColor) {
        nextMonth.css("color", options.buttonsColor);
        nextMonth.find("span").css("color", options.buttonsColor);
        prevMonth.css("color", options.buttonsColor);
        prevMonth.find("span").css("color", options.buttonsColor);
    }

    // create table header and body
    calendarDiv.find('.bd-table').append("<thead><tr></tr></thead>");
    $.each(DAY_NAMES, function (key, value) {
        calendarDiv.find('.bd-table thead tr').append($("<th></th>").text(value));
    });

    calendarDiv.find('.bd-table').append("<tbody id='bd-table-days-" + elementID + "' class='bd-table-days'></tbody>");
    var daysTable = $("#bd-table-days-" + elementID);

    // create go to todays button
    if (options.gotoToday) {
        calendarDiv.append("<div class='bd-goto-today'>برو به امروز</div>");
        var gotoToday = calendarDiv.find(".bd-goto-today");
    }

    // opening and closing functionality
    inputElement.on("focus", function () {
        mainDiv.removeClass("bd-hide");
        if (options.sync && isSynced === false) {
            syncCalendar();
            isSynced = true;
        }
        mainDiv;
    }).on('blur', function () {
        if (isCalClicked == false) {
            mainDiv.addClass("bd-hide");
            isSynced = false;
        } else {
            isCalClicked = false;
            inputElement.focus();
            event.preventDefault();
        }
    });

    mainDiv.on('mousedown', function (event) {
        isCalClicked = true;
    });

    // dropdown events
    monthDropdown.on('change', function () {
        selectedMonth = parseInt(this.value);
        numberOfDays = monthDays(selectedYear, selectedMonth);
        dayOfWeekJ = findFirstDayOfMonth(selectedYear, selectedMonth);
        drawDays(numberOfDays, dayOfWeekJ);
    });
    yearDropdown.on('change', function () {
        selectedYear = parseInt(this.value);
        numberOfDays = monthDays(selectedYear, selectedMonth);
        dayOfWeekJ = findFirstDayOfMonth(selectedYear, selectedMonth);
        drawDays(numberOfDays, dayOfWeekJ);
    });

    // Georgian to Jalali converter (minified)
    // source is unknown. contact if you know the code owner.
    function gregorianToJalali(a, r, s) { a = parseInt(a), r = parseInt(r), s = parseInt(s); for (var n = a - 1600, e = r - 1, t = s - 1, p = 365 * n + parseInt((n + 3) / 4) - parseInt((n + 99) / 100) + parseInt((n + 399) / 400), I = 0; e > I; ++I) p += g_days[I]; e > 1 && (n % 4 == 0 && n % 100 != 0 || n % 400 == 0) && ++p, p += t; var v = p - 79, d = parseInt(v / 12053); v %= 12053; var o = 979 + 33 * d + 4 * parseInt(v / 1461); v %= 1461, v >= 366 && (o += parseInt((v - 1) / 365), v = (v - 1) % 365); for (var I = 0; 11 > I && v >= j_days[I]; ++I) v -= j_days[I]; var y = I + 1, _ = v + 1; return [o, y, _] } var g_days = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31], j_days = [31, 31, 31, 31, 31, 31, 30, 30, 30, 30, 30, 29];
    // Jalali to Georgian converter (minified)
    // source is unknown. contact if you know the code owner.
    function toJalaali(d, i, a) { return d2j(g2d(d, i, a)) } function toGregorian(d, i, a) { return d2g(j2d(d, i, a)) } function isValidJalaaliDate(d, i, a) { return d >= -61 && 3177 >= d && i >= 1 && 12 >= i && a >= 1 && a <= jalaaliMonthLength(d, i) } function isLeapJalaaliYear(d) { return 0 === jalCal(d).leap } function jalaaliMonthLength(d, i) { return 6 >= i ? 31 : 11 >= i ? 30 : isLeapJalaaliYear(d) ? 30 : 29 } function jalCal(d) { var i, a, n, r, t, o, v, e = [-61, 9, 38, 199, 426, 686, 756, 818, 1111, 1181, 1210, 1635, 2060, 2097, 2192, 2262, 2324, 2394, 2456, 3178], l = e.length, u = d + 621, m = -14, g = e[0]; if (g > d || d >= e[l - 1]) throw new Error("Invalid Jalaali year " + d); for (v = 1; l > v && (i = e[v], a = i - g, !(i > d)); v += 1) m = m + 8 * div(a, 33) + div(mod(a, 33), 4), g = i; return o = d - g, m = m + 8 * div(o, 33) + div(mod(o, 33) + 3, 4), 4 === mod(a, 33) && a - o === 4 && (m += 1), r = div(u, 4) - div(3 * (div(u, 100) + 1), 4) - 150, t = 20 + m - r, 6 > a - o && (o = o - a + 33 * div(a + 4, 33)), n = mod(mod(o + 1, 33) - 1, 4), -1 === n && (n = 4), { leap: n, gy: u, march: t } } function j2d(d, i, a) { var n = jalCal(d); return g2d(n.gy, 3, n.march) + 31 * (i - 1) - div(i, 7) * (i - 7) + a - 1 } function d2j(d) { var i, a, n, r = d2g(d).gy, t = r - 621, o = jalCal(t), v = g2d(r, 3, o.march); if (n = d - v, n >= 0) { if (185 >= n) return a = 1 + div(n, 31), i = mod(n, 31) + 1, { jy: t, jm: a, jd: i }; n -= 186 } else t -= 1, n += 179, 1 === o.leap && (n += 1); return a = 7 + div(n, 30), i = mod(n, 30) + 1, { jy: t, jm: a, jd: i } } function g2d(d, i, a) { var n = div(1461 * (d + div(i - 8, 6) + 100100), 4) + div(153 * mod(i + 9, 12) + 2, 5) + a - 34840408; return n = n - div(3 * div(d + 100100 + div(i - 8, 6), 100), 4) + 752 } function d2g(d) { var i, a, n, r, t; return i = 4 * d + 139361631, i = i + 4 * div(3 * div(4 * d + 183187720, 146097), 4) - 3908, a = 5 * div(mod(i, 1461), 4) + 308, n = div(mod(a, 153), 5) + 1, r = mod(div(a, 153), 12) + 1, t = div(i, 1461) - 100100 + div(8 - r, 6), { gy: t, gm: r, gd: n } } function div(d, i) { return ~~(d / i) } function mod(d, i) { return d - ~~(d / i) * i }

    var syncCalendar = function () {
        var inputValue = fixDate(inputElement.val());
        if (inputValue === "")
            return;

        inputValue = inputValue.split("/");
        monthDropdown.val(parseInt(inputValue[1]));
        monthDropdown.trigger("change");
        yearDropdown.val(parseInt(inputValue[0]));
        yearDropdown.trigger("change");

        if (options.highlightSelectedDay) {
            mainDiv.find(".bd-selected-day").removeClass("bd-selected-day");
            mainDiv.find(".day-" + parseInt(inputValue[2])).addClass("bd-selected-day");
        }
    }

    var fixDate = function (date) {
        if (date === "")
            return "";

        date = date.split("/");
        // if (date[0].length === 2) {
        //     date[0] = "13" + date[0];
        // }
        if (date[1].length < 2) {
            if (date[1] < 10) {
                date[1] = "0" + date[1];
            }
        }
        if (date[2].length < 2) {
            if (date[2] < 10) {
                date[2] = "0" + date[2];
            }
        }
        date = date.join("/");
        return date;
    }

    var convertToJWeek = function (dayOfWeekG) {
        var dayOfWeekJ;
        if (dayOfWeekG < 6) {
            dayOfWeekJ = dayOfWeekG + 1;
        } else {
            dayOfWeekJ = 0;
        }
        return dayOfWeekJ;
    }

    var makeYearList = function (thisYear) {
        yearDropdown.find('option').remove();
        for (i = 0; i < 101; i++) {
            var tempYear = ((thisYear - 95) + i) + '';
            if (options.forceFarsiDigits) {
                for (var j = 0; j < 10; j++) {
                    var rgx = new RegExp(j, 'g');
                    tempYear = tempYear.replace(rgx, FA_NUMS[j]);
                }
            }
            yearDropdown.append($('<option>', {
                value: (thisYear - 95) + i,
                text: tempYear
            }));
        }
    }

    // isleap calculator, supported year: 1243 - 1473
    var isLeapYear = function (year) {
        var mod;
        if (year < 1343 && year > 1243) {
            mod = year % 33;
            if (mod == 1 || mod == 5 || mod == 9 || mod == 13 || mod == 17 || mod == 22 || mod == 26 || mod == 30) {
                return true;
            } else {
                return false;
            }
        } else if (year < 1473 && year > 1342) {
            mod = year % 17;
            if (mod == 1 || mod == 5 || mod == 9 || mod == 13 || mod == 18 || mod == 22 || mod == 26 || mod == 30) {
                return true;
            } else {
                return false
            }
        } else {
            return "unknown";
        }
    }

    var monthDays = function (year, month) {
        if (month < 7) {
            return 31;
        } else if (month < 12) {
            return 30;
        } else {
            if (isLeapYear(year)) {
                return 30;
            } else {
                return 29;
            }
        }
    }

    // make first page of calendar
    todayG = new Date();

    todaysJ = gregorianToJalali(todayG.getFullYear(), todayG.getMonth() + 1, todayG.getDate());
    var selectedDateJ = [];
    for (i = 0; i < 3; i++) {
        selectedDateJ[i] = todaysJ[i];
    }

    todaysYear = todaysJ[0];
    todaysMonth = todaysJ[1];
    todaysDay = todaysJ[2];

    selectedYear = selectedDateJ[0];
    selectedMonth = selectedDateJ[1];
    selectedDay = selectedDateJ[2];

    monthDropdown.val(selectedMonth);
    makeYearList(selectedYear);
    yearDropdown.val(selectedYear);

    numberOfDays = monthDays(selectedYear, selectedMonth);

    // find first day of month in week
    var findFirstDayOfMonth = function (selectedYear, selectedMonth) {
        var firstDayOfMonthG = toGregorian(selectedYear, selectedMonth, 1);
        firstDayOfMonthG = new Date(firstDayOfMonthG.gy + "/" + firstDayOfMonthG.gm + "/" + firstDayOfMonthG.gd);
        return convertToJWeek(firstDayOfMonthG.getDay());
    }
    dayOfWeekJ = findFirstDayOfMonth(selectedYear, selectedMonth);

    // draw days on calendar
    var drawDays = function (numberOfDays, dayOfWeekJ) {
        daysTable.empty();
        var dayIndex = 1;
        var rowIndex = 1;
        while (dayIndex <= numberOfDays) {
            daysTable.append($('<tr>', {
                class: "tr-" + rowIndex
            }));
            for (i = 0; i < 7; i++) {
                if (dayIndex == 1) {
                    var j = 0;
                    while (j < dayOfWeekJ) {
                        $("#bd-table-days-" + elementID + " .tr-1").append($('<td>', {
                            class: "bd-empty-cell"
                        })
                        );
                        j++;
                        i++;
                    }
                }
                if (i < 7 && dayIndex <= numberOfDays) {
                    var tempTD = '<td>' +
                        '<button class="day day-' + dayIndex + '" type="button">' + (options.forceFarsiDigits ? FA_NUMS[dayIndex] : dayIndex) + '</button>' +
                        '</td>';

                    // mark todays day by adding .bd-today class
                    if (options.markToday) {
                        if (dayIndex == todaysDay && todaysMonth == selectedMonth && todaysYear == selectedYear) {
                            var idx = tempTD.indexOf('day day-');
                            tempTD = tempTD.slice(0, idx) + ' bd-today ' + tempTD.slice(idx);
                        }
                    }

                    // mark holidays by adding .bd-holiday class
                    if (options.markHolidays) {
                        if (i == 6) {
                            var idx = tempTD.indexOf('day day-');
                            tempTD = tempTD.slice(0, idx) + ' bd-holiday ' + tempTD.slice(idx);
                        }
                    }

                    $("#bd-table-days-" + elementID + " .tr-" + rowIndex).append(tempTD);

                    dayIndex++;
                }
            }
            rowIndex++;
        }

        if (options.highlightSelectedDay) {
            var inputValue = inputElement.val();
            inputValue = inputValue.split("/");
            if (inputValue[0] == selectedYear && inputValue[1] == selectedMonth) {
                mainDiv.find(".bd-selected-day").removeClass("bd-selected-day");
                mainDiv.find(".day-" + parseInt(inputValue[2])).addClass("bd-selected-day");
            }
        }

    }

    inputElement.parent().on("click", "button.day", function () {
        var datestr = selectedYear + "/" + selectedMonth + "/" + $(this).attr('class').split(" ")[$(this).attr('class').split(" ").indexOf('day') + 1].split("-")[1];
        if (options.twodigit) {
            datestr = fixDate(datestr);
        }
        inputElement.val(datestr);
        inputElement.trigger("change");
        if (options.closeAfterSelect) {
            isCalClicked = false;
            inputElement.trigger("blur");
        }

        if (options.highlightSelectedDay) {
            mainDiv.find(".bd-selected-day").removeClass("bd-selected-day");
            $(this).addClass("bd-selected-day");
        }
    });

    nextMonth.on("click", function () {
        //console.log("month: " + selectedMonth + ", year: " + selectedYear);
        if (monthDropdown.val() < 12) {
            monthDropdown.val(parseInt(monthDropdown.val()) + 1);
            monthDropdown.trigger("change");
        } else {
            monthDropdown.val(1);
            monthDropdown.trigger("change");
            yearDropdown.val(parseInt(yearDropdown.val()) + 1);
            yearDropdown.trigger("change");
        }
    });

    prevMonth.on("click", function () {
        if (monthDropdown.val() > 1) {
            monthDropdown.val(parseInt(monthDropdown.val()) - 1);
            monthDropdown.trigger("change");
        } else {
            monthDropdown.val(12);
            monthDropdown.trigger("change");
            yearDropdown.val(parseInt(yearDropdown.val()) - 1);
            yearDropdown.trigger("change");
        }
    });

    if (options.gotoToday) {
        gotoToday.on("click", function () {
            monthDropdown.val(todaysMonth);
            monthDropdown.trigger("change");
            yearDropdown.val(todaysYear);
            yearDropdown.trigger("change");
        });
    }

    drawDays(numberOfDays, dayOfWeekJ);

    // enable bootstrap tooltip if bootstrap is loaded
    if (typeof $().modal == 'function') {
        $('[data-toggle="tooltip"]').tooltip();
    }

}

var media_xm = window.matchMedia("(max-width: 575.98px)");
var media_sm = window.matchMedia("(min-width: 576px) and (max-width: 767.98px)");
var media_md = window.matchMedia("(min-width: 768px) and (max-width: 991.98px)");
var media_lg = window.matchMedia("(min-width: 992px) and (max-width: 1199.98px)");
var media_xl = window.matchMedia("(min-width: 1200px)");


function event_media_xm(media){
	if(media.matches) return $(document).trigger('media:xm', [media]);
	else return $(document).trigger('media:xm:exit', [media]);
}
function event_media_sm(media){
	if(media.matches) return $(document).trigger('media:sm', [media]);
	else return $(document).trigger('media:sm:exit', [media]);
}
function event_media_md(media){
	if(media.matches) return $(document).trigger('media:md', [media]);
	else return $(document).trigger('media:md:exit', [media]);
}
function event_media_lg(media){
	if(media.matches) return $(document).trigger('media:lg', [media]);
	else return $(document).trigger('media:lg:exit', [media]);
}
function event_media_xl(media){
	if(media.matches) return $(document).trigger('media:xl', [media]);
	else return $(document).trigger('media:xl:exit', [media]);
}

$(document).ready(function(){
	event_media_xm(media_xm);
	media_xm.addListener(event_media_xm);

	event_media_sm(media_sm);
	media_sm.addListener(event_media_sm);

	event_media_md(media_md);
	media_md.addListener(event_media_md);

	event_media_lg(media_lg);
	media_lg.addListener(event_media_lg);

	event_media_xl(media_xl);
	media_xl.addListener(event_media_xl);
})

function responsive_menu() {
    $('#menu').removeClass('d-none').addClass('d-flex');
    // $('#desktop').removeClass('d-none');
    $('body').addClass('responsive-menu');
    $('#btn-menu').find($(".fas")).removeClass('fa-bars').addClass('fa-arrow-right');
    $(this).off('click.responsive-menu');
    $(this).on('click.close-responsive-menu', function() {
        $(this).off('click.close-responsive-menu');
        $(this).on('click.responsive-menu', responsive_menu);
        $('#menu').addClass('d-none').removeClass('d-flex');
        // $('#desktop').addClass('d-none');
        $('body').removeClass('responsive-menu');
        $('#btn-menu').find($(".fas")).removeClass('fa-arrow-right').addClass('fa-bars');
    });
}

$(document).on('media:xm media:sm', function(event, media) {
    $("body:not(.responsive-menu) #btn-menu").on('click.responsive-menu', responsive_menu);

    var menu = $('#menu');
    var desktop = $('#desktop');
    var btn_menu = $('#btn-menu');
    $(document).mouseup(function(e) {
        if (
            (!menu.is(e.target) && menu.has(e.target).length === 0)
            && (!desktop.is(e.target) && desktop.has(e.target).length === 0)
            && (!btn_menu.is(e.target) && btn_menu.has(e.target).length === 0)
            )
        {
            $("body.responsive-menu #btn-menu").trigger('click.close-responsive-menu');
        }
    });

    // $("body").swipe({
    //     swipe: function(event, direction, distance, duration, fingerCount, fingerData) {
    //         if (direction == 'left') {
    //             $("body:not(.responsive-menu) #btn-menu").trigger('click.responsive-menu');
    //         }

    //         if (direction == 'right') {
    //             $("body.responsive-menu #btn-menu").trigger('click.close-responsive-menu');
    //         }

    //         if (direction == 'up' || direction == 'down') {
    //             if (!menu.is(event.target) && menu.has(event.target).length === 0) {
    //                 $("body.responsive-menu #btn-menu").trigger('click.close-responsive-menu');
    //             }
    //         }
    //     }
    // });
});

$(document).on('media:md media:lg media:xl', function(event, media) {
    $("body.responsive-menu #btn-menu").trigger('click.close-responsive-menu');
    $("#btn-menu").off('click.responsive-menu');
    // $("#btn-menu").off('click.close-responsive-menu');
    // $('#menu').addClass('d-none').removeClass('d-flex');
    // $('#desktop').addClass('d-none');
    // $('body').removeClass('responsive-menu');
    // $('#btn-menu').find($(".fas")).removeClass('fa-arrow-right').addClass('fa-bars');
});
(function () {
	function ViwFile()
	{
		$('.custom-file-input', this).on('change', function(){
			if (!window.File && !window.FileReader && !window.FileList && !window.Blob) {
				console.error('FileReader unsupported!');
				return false;
			}
			var file_index = 0;
			var file;
			$(this).next().html('');
			var files = [];
			while (file = this.files.item(file_index++))
			{
				files.push(file.name);
			}
			$(this).next().html(files.join(' : '));
		});
	}
	$(document).on('statio:global:renderResponse', function (event, base, contex) {
		base.each(function () {
			ViwFile.call(this);
		});
	});
	ViwFile.call(document);
})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkpSZXNwLmpzIiwiTGlqYXguanMiLCJTdGF0aW8uanMiLCJVcmwuanMiLCJhcHAuanMiLCJkYXRlcGlja2VyLmpzIiwibWVkaWEtZXZlbnQuanMiLCJzaWRlYmFyLXJlc3BvbnNpdmUuanMiLCJ2aXdmaWxlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNsQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDcEhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDblBBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDdFZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2hJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3hjQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM1Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM1REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJzYXJrb290Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe1xuXHRmdW5jdGlvbiBqcmVzcChjb250ZXh0LCByZXMpXG5cdHtcblx0XHRjb250ZXh0LnRyaWdnZXIoJ2pyZXNwJywgW3Jlc10pO1xuXHRcdGlmIChyZXMubWVzc2FnZSAmJiAhY29udGV4dC5pcygnLmQtbm90aWZpY2F0aW9uJykpXG5cdFx0e1xuXHRcdFx0aWYgKHdpbmRvdy50b2FzdHIpXG5cdFx0XHR7XG5cdFx0XHRcdHZhciB0b2FzdCA9IHRvYXN0cltyZXMuaXNfb2sgPyAnc3VjY2VzcycgOiAnZXJyb3InXShyZXMubWVzc2FnZV90ZXh0IHx8IHJlcy5tZXNzYWdlLCB1bmRlZmluZWQsIHtcblx0XHRcdFx0XHRcImNsb3NlQnV0dG9uXCI6IHRydWUsXG5cdFx0XHRcdFx0XCJuZXdlc3RPblRvcFwiOiB0cnVlLFxuXHRcdFx0XHRcdFwicG9zaXRpb25DbGFzc1wiOiBcInRvYXN0LWJvdHRvbS1yaWdodFwiLFxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYgKHdpbmRvdy5pemlUb2FzdClcblx0XHRcdHtcblx0XHRcdFx0aXppVG9hc3RbcmVzLmlzX29rID8gJ3N1Y2Nlc3MnIDogJ2Vycm9yJ10oeyBtZXNzYWdlOiByZXMubWVzc2FnZV90ZXh0IHx8IHJlcy5tZXNzYWdlfSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmKHJlcy5yZWRpcmVjdClcblx0XHR7XG5cdFx0XHRpZihyZXMuZGlyZWN0KVxuXHRcdFx0e1xuXHRcdFx0XHRsb2NhdGlvbi5ocmVmID0gcmVzLnJlZGlyZWN0O1xuXHRcdFx0fVxuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHRuZXcgU3RhdGlvKHtcblx0XHRcdFx0XHR1cmwgOiByZXMucmVkaXJlY3Rcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHdpbmRvdy5KUmVzcCA9IGpyZXNwO1xufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0ZnVuY3Rpb24gbGlqYXgoY29udGV4dCwgb25GaXJlKVxuXHR7XG4gICAgICAgIHZhciBiYWNrX3ZhbHVlID0gJChjb250ZXh0KS52YWwoKSB8fCAkKGNvbnRleHQpLmF0dHIoJ2RhdGEtdmFsdWUnKTtcbiAgICAgICAgaWYoJChjb250ZXh0KS5pcygnOmNoZWNrYm94JykpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGJhY2tfdmFsdWUgPSAkKGNvbnRleHQpLmlzKCc6Y2hlY2tlZCcpID8gMSA6IDA7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIFRpbWVvdXQgPSBudWxsO1xuICAgICAgICB2YXIgZmlyZSA9IG51bGw7XG4gICAgICAgIGlmKCQoY29udGV4dCkuaXMoJ2Zvcm0nKSAmJiAhJChjb250ZXh0KS5hdHRyKCdkYXRhLWxpamF4JykpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGZpcmUgPSBbJ3N1Ym1pdCddO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgZmlyZSA9ICQoY29udGV4dCkuYXR0cignZGF0YS1saWpheCcpLnNwbGl0KCcgJykgfHwgWydjaGFuZ2UnXTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZpcmUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmKC9eXFxkKyQvLnRlc3QoZmlyZVtpXSkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdmFyIFRpbWUgPSBmaXJlW2ldO1xuICAgICAgICAgICAgICAgICQoY29udGV4dCkub24oJ2tleXVwJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgaWYoVGltZW91dCkgY2xlYXJUaW1lb3V0KFRpbWVvdXQpO1xuICAgICAgICAgICAgICAgICAgICBUaW1lb3V0ID0gc2V0VGltZW91dChzZW5kLCBUaW1lKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAkKGNvbnRleHQpLm9uKGZpcmVbaV0sIHNlbmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2VuZCgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBocmVmID0gdXJsLnBhcnNlKGxvY2F0aW9uLmhyZWYpO1xuICAgICAgICAgICAgdmFyIG5hbWUgPSAkKGNvbnRleHQpLmF0dHIoJ25hbWUnKSB8fCAkKGNvbnRleHQpLmF0dHIoJ2RhdGEtbmFtZScpO1xuICAgICAgICAgICAgaWYoaHJlZi5nZXQgJiYgaHJlZi5nZXRbbmFtZV0pXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIGhyZWYuZ2V0W25hbWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGdldCA9IHVybC5idWlsZGdldChocmVmLmdldCk7XG4gICAgICAgICAgICBocmVmID0gaHJlZi51cmwucmVwbGFjZSgvXFw/KC4qKSQvLCBnZXQgPyAnPycgKyBnZXQgOiAnJyk7XG4gICAgICAgICAgICB2YXIgYWN0aW9uID0gJChjb250ZXh0KS5hdHRyKCdocmVmJykgfHwgJChjb250ZXh0KS5hdHRyKCdhY3Rpb24nKSB8fCAkKGNvbnRleHQpLmF0dHIoJ2RhdGEtYWN0aW9uJykgfHwgaHJlZjtcbiAgICAgICAgICAgIHZhciBtZXRob2QgPSAkKGNvbnRleHQpLmF0dHIoJ2RhdGEtbWV0aG9kJykgfHwgJChjb250ZXh0KS5hdHRyKCdtZXRob2QnKSB8fCAnR0VUJztcbiAgICAgICAgICAgIHZhciBzdGF0ZSA9ICQoY29udGV4dCkuYXR0cignZGF0YS1zdGF0ZScpO1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgaWYoJChjb250ZXh0KS5pcygnZm9ybScpKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZhciBEYXRhID0gbmV3IEZvcm1EYXRhKGNvbnRleHQpO1xuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge307XG5cdFx0XHRcdGlmICgkKGNvbnRleHQpLmF0dHIoJ2VuY3R5cGUnKSA9PSAnbXVsdGlwYXJ0L2Zvcm0tZGF0YScgfHwgJCgnaW5wdXQ6ZmlsZScsIGNvbnRleHQpLmxlbmd0aClcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSBEYXRhO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBEYXRhLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlLCBuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhW25hbWVdID0gL1xcWy4qXFxdJC8udGVzdChuYW1lKSA/IERhdGEuZ2V0QWxsKG5hbWUpIDogRGF0YS5nZXQobmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzdGF0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICQoY29udGV4dCkuYWRkQ2xhc3MoJ2xpamF4LXNlbmRpbmcnKTtcbiAgICAgICAgICAgICAgICAkKCdpbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYSwgYnV0dG9uJywgY29udGV4dCkubm90KCc6ZGlzYWJsZWQnKS5hZGRDbGFzcygnbGlqYXgtZGlzYWJsZScpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICAgICAgJChjb250ZXh0KS5vbignc3RhdGlvOmRvbmUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy5saWpheC1kaXNhYmxlJywgdGhpcykucmVtb3ZlQ2xhc3MoJ2xpamF4LWRpc2FibGUnKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2xpamF4LXNlbmRpbmcnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9ICQoY29udGV4dCkudmFsKCkgfHwgJChjb250ZXh0KS5hdHRyKCdkYXRhLXZhbHVlJykgfHwgbnVsbDtcbiAgICAgICAgICAgICAgICBpZigkKGNvbnRleHQpLmlzKCc6Y2hlY2tib3gnKSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gJChjb250ZXh0KS5pcygnOmNoZWNrZWQnKSA/IDEgOiAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZihiYWNrX3ZhbHVlID09IHZhbHVlICYmICQoY29udGV4dCkuaXMoJ2lucHV0LCB0ZXh0YXJlYSwgc2VsZWN0JykgJiYgIW9uRmlyZSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGJhY2tfdmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHt9O1xuICAgICAgICAgICAgICAgIGRhdGFbbmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgkKGNvbnRleHQpLmF0dHIoJ2RhdGEtcXVlcnknKSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB2YXIgYWN0aW9uX3F1ZXJ5ID0gdXJsLnBhcnNlKGFjdGlvbik7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGFfcXVlcnkgPSB1cmwucGFyc2UoJz8nICsgJChjb250ZXh0KS5hdHRyKCdkYXRhLXF1ZXJ5JykpO1xuICAgICAgICAgICAgICAgIGFjdGlvbl9xdWVyeS5nZXQgPSAkLmV4dGVuZChudWxsLCAoYWN0aW9uX3F1ZXJ5LmdldCB8fCB7fSksIGRhdGFfcXVlcnkuZ2V0KTtcbiAgICAgICAgICAgICAgICBhY3Rpb24gPSB1cmwuYnVpbGQoYWN0aW9uX3F1ZXJ5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBoZWFkZXJzID0ge307XG4gICAgICAgICAgICBpZiAoJChjb250ZXh0KS5hdHRyKCdkYXRhLXhockJhc2UnKSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzID0ge1xuICAgICAgICAgICAgICAgICAgICAnRGF0YS14aHItYmFzZSc6ICQoY29udGV4dCkuYXR0cignZGF0YS14aHJCYXNlJylcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3IFN0YXRpbyh7XG4gICAgICAgICAgICAgICAgdHlwZSA6IHN0YXRlID8gJ2JvdGgnIDogJ3JlbmRlcicsXG4gICAgICAgICAgICAgICAgY29udGV4dDogY29udGV4dCxcbiAgICAgICAgICAgICAgICBhamF4IDoge1xuXHRcdFx0XHRcdGNvbnRlbnRUeXBlOiAkKGNvbnRleHQpLmlzKCdmb3JtJykgJiYgKCQoY29udGV4dCkuYXR0cignZW5jdHlwZScpID09ICdtdWx0aXBhcnQvZm9ybS1kYXRhJyB8fCAkKCdpbnB1dDpmaWxlJywgY29udGV4dCkubGVuZ3RoKSA/IGZhbHNlIDogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOCcsXG5cdFx0XHRcdFx0cHJvY2Vzc0RhdGE6ICgkKGNvbnRleHQpLmlzKCdmb3JtJykgJiYgKCQoY29udGV4dCkuYXR0cignZW5jdHlwZScpID09ICdtdWx0aXBhcnQvZm9ybS1kYXRhJyB8fCAkKCdpbnB1dDpmaWxlJywgY29udGV4dCkubGVuZ3RoKSkgPyBmYWxzZSA6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGNhY2hlICAgICAgIDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZCA6IG1ldGhvZCxcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA6IGRhdGEsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnNcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHVybCA6IGFjdGlvblxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9uRmlyZSlcbiAgICAgICAge1xuICAgICAgICAgICAgc2VuZCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHdpbmRvdy5MaWpheCA9IGxpamF4O1xufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0dmFyIF9nbG9iYWxzID0ge1xuXHRcdHRpdGxlIDogZnVuY3Rpb24gKHZhbHVlKXtcblx0XHRcdCQoJ3RpdGxlJykuaHRtbCh2YWx1ZSk7XG5cdFx0fVxuXHR9XG5cblx0dmFyIF9hamF4ID0ge1xuXHRcdHR5cGUgOiAnR0VUJyxcblx0XHRjYWNoZSA6IGZhbHNlXG5cdH1cblxuXHR2YXIgX29wdGlvbnMgPSB7XG5cdFx0b2JqZWN0IDogbnVsbCxcblx0XHR0aXRsZSA6IG51bGwsXG5cdFx0YWpheCA6IF9hamF4LFxuXHQvKipcblx0ICogU2VuZCByZXF1ZXN0IGFuZCBjaGFuZ2UgdXJsIHdpdGggcmVzcG9uc2UgcmVuZGVyaW5nXG5cdCAqIEBkZWZhdWx0IGJvdGhcblx0ICogYm90aDogY2hhbmdlIHVybCBhbmQgcmVuZGVyIHJlc3BvbnNlXG5cdCAqIHVybDogT25seSBzZW5kIHJlcXVlc3QgYW5kIGNoYWdlIHVybCB3aXRob3V0IGNoYW5nZSByZW5kZXJpbmdcblx0ICogcmVuZGVyOiBPbmx5IHNlbmQgcmVxdWVzdCBhbmQgcmVuZGVyIHJlcHNvbnNlIHdpdGhvdXQgY2hhbmdlIHVybFxuXHQgKiBAdHlwZSB7U3RyaW5nfVxuXHQgKi9cblx0IHR5cGUgOiAnYm90aCcsXG5cdC8qKlxuXHQgKiBkb250IHNlbmQgYW55IHJlcXVlc3Rcblx0ICogQHR5cGUge0Jvb2xlYW59XG5cdCAqL1xuXHQgZmFrZSA6IGZhbHNlLFxuXHQvKipcblx0ICogYWpheCByZXNwb25zZSBjb250ZXRudFxuXHQgKiBpZiB7ZmFrZTp0cnVlfSBvciB7cmVzcG9uc2UgOiBub3RudWxsfSByZXNwb25zZSByZW5kZXIgdGhpcyBwcm9wZXJ0eVxuXHQgKiBAdHlwZSB7W3R5cGVdfVxuXHQgKi9cblx0IHJlc3BvbnNlIDogbnVsbCxcblx0LyoqXG5cdCAqIHJlcGxhY2Ugc3RhdGVcblx0ICogQHR5cGUge0Jvb2xlYW59XG5cdCAqL1xuXHQgcmVwbGFjZSA6IGZhbHNlLFxuXHQvKipcblx0ICogZXZlbnQgY29udGV4dFxuXHQgKiBAdHlwZSB7RE9NfSB7alF1ZXJ5fSB7U2VsZWN0b3Igc3RyaW5nfVxuXHQgKi9cblx0IGNvbnRleHQgOiBkb2N1bWVudFxuXHR9XG5cblx0ZnVuY3Rpb24gc3RhdGlvKGN1c3RvbSl7XG5cdFx0aWYodHlwZW9mIGN1c3RvbSAhPSAnb2JqZWN0Jylcblx0XHR7XG5cdFx0XHRjdXN0b20gPSB7fTtcblx0XHR9XG5cblx0XHRjdXN0b20uYWpheCA9ICQuZXh0ZW5kKHt9LCBfYWpheCwgY3VzdG9tLmFqYXgpO1xuXHRcdGN1c3RvbS5hamF4LnVybCA9IGN1c3RvbS51cmw7XG5cdFx0Y3VzdG9tLmdsb2JhbHMgPSAkLmV4dGVuZCh7fSwgX2dsb2JhbHMsIGN1c3RvbS5nbG9iYWxzKTtcblx0XHR2YXIgb3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBfb3B0aW9ucywgY3VzdG9tKTtcblxuXHRcdHZhciByZXNwb25zZSA9IHtcblx0XHRcdGJvZHkgOiBvcHRpb25zLnJlc3BvbnNlLFxuXHRcdFx0ZGF0YSA6IHt9LFxuXHRcdH07XG5cblx0XHRpZighKG9wdGlvbnMuY29udGV4dCBpbnN0YW5jZW9mIGpRdWVyeSkpXG5cdFx0e1xuXHRcdFx0b3B0aW9ucy5jb250ZXh0ID0gJChvcHRpb25zLmNvbnRleHQpO1xuXHRcdH1cblxuXHRcdCQoZG9jdW1lbnQpLnRyaWdnZXIoJ3N0YXRpbzpnbG9iYWw6aW5pdCcsIFtvcHRpb25zLmNvbnRleHRdKTtcblx0XHRvcHRpb25zLmNvbnRleHQudHJpZ2dlcignc3RhdGlvOmluaXQnKTtcblxuXG5cdFx0dmFyIGFqYXhfZGF0YSA9IG51bGw7XG5cdFx0dmFyIGFqYXhfc2VuZF91cmwgPSBudWxsO1xuXHRcdGlmKCFvcHRpb25zLmZha2UpXG5cdFx0e1xuXHRcdFx0aWYoIW9wdGlvbnMuYWpheC5jb21wbGV0ZSlcblx0XHRcdHtcblx0XHRcdFx0b3B0aW9ucy5hamF4LmNvbXBsZXRlID0gYWp4X2NvbXBsZXRlO1xuXHRcdFx0fVxuXHRcdFx0dmFyIGJlZm9yZVNlbmQgPSBvcHRpb25zLmFqYXguYmVmb3JlU2VuZDtcblx0XHRcdG9wdGlvbnMuYWpheC5iZWZvcmVTZW5kID0gZnVuY3Rpb24oanFYSFIsIHNldHRpbmdzKVxuXHRcdFx0e1xuXHRcdFx0XHRhamF4X2RhdGEgPSB0aGlzO1xuXHRcdFx0XHRhamF4X3NlbmRfdXJsID0gdGhpcy51cmw7XG5cdFx0XHRcdHZhciB1cmx4ID0gdXJsLnBhcnNlKGFqYXhfc2VuZF91cmwpO1xuXHRcdFx0XHRpZih1cmx4LmdldCAmJiB1cmx4LmdldC5fKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGVsZXRlIHVybHguZ2V0Ll87XG5cdFx0XHRcdH1cbiAgICAgICAgICAgIFx0dmFyIGdldCA9IHVybC5idWlsZGdldCh1cmx4LmdldCk7XG4gICAgICAgICAgICBcdGFqYXhfc2VuZF91cmwgPSB1cmx4LnVybC5yZXBsYWNlKC9cXD8oLiopJC8sIGdldCA/ICc/JyArIGdldCA6ICcnKTtcblx0XHRcdFx0YmVmb3JlU2VuZCA/IGJlZm9yZVNlbmQuY2FsbCh0aGlzLCBqcVhIUiwgc2V0dGluZ3MpIDogbnVsbDtcblx0XHRcdH1cblx0XHRcdCQuYWpheChvcHRpb25zLmFqYXgpO1xuXHRcdH1cblx0XHRlbHNlIGlmKG9wdGlvbnMudHlwZSAhPSAndXJsJyAmJiByZXNwb25zZS5ib2R5KVxuXHRcdHtcblx0XHRcdHJlc3BvbnNlX3BhcnNlKCk7XG5cdFx0XHRyZW5kZXIoKTtcblx0XHRcdCQoZG9jdW1lbnQpLnRyaWdnZXIoJ3N0YXRpbzpnbG9iYWw6ZG9uZScsIFtvcHRpb25zLmNvbnRleHRdKTtcblx0XHRcdG9wdGlvbnMuY29udGV4dC50cmlnZ2VyKCdzdGF0aW86ZG9uZScpO1xuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0b3B0aW9ucy5yZXBsYWNlXG5cdFx0XHRcdFx0PyBoaXN0b3J5LnJlcGxhY2VTdGF0ZShKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9wdGlvbnMpKSwgb3B0aW9ucy50aXRsZSwgYWpheF9zZW5kX3VybCB8fCBvcHRpb25zLnVybClcblx0XHRcdFx0XHQ6IGhpc3RvcnkucHVzaFN0YXRlKEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob3B0aW9ucykpLCBvcHRpb25zLnRpdGxlLCBhamF4X3NlbmRfdXJsIHx8IG9wdGlvbnMudXJsKTtcblx0XHRcdH1cblx0XHRcdGNhdGNoIChlKSB7XG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoZSk7XG5cdFx0XHR9XG5cdFx0XHQkKGRvY3VtZW50KS50cmlnZ2VyKCdzdGF0aW86Z2xvYmFsOmRvbmUnLCBbb3B0aW9ucy5jb250ZXh0XSk7XG5cdFx0XHRvcHRpb25zLmNvbnRleHQudHJpZ2dlcignc3RhdGlvOmRvbmUnKTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBhanhfY29tcGxldGUoanFYSFIsIHRleHRTdGF0dXMpXG5cdFx0e1xuXHRcdFx0aWYoanFYSFIucmVzcG9uc2VKU09OKVxuXHRcdFx0e1xuXHRcdFx0XHRyZXNwb25zZS5kYXRhID0ganFYSFIucmVzcG9uc2VKU09OO1xuXHRcdFx0XHQkKGRvY3VtZW50KS50cmlnZ2VyKCdzdGF0aW86Z2xvYmFsOmpzb25SZXNwb25zZScsIFtvcHRpb25zLmNvbnRleHQsIGpxWEhSLnJlc3BvbnNlSlNPTiwganFYSFJdKTtcblx0XHRcdFx0b3B0aW9ucy5jb250ZXh0LnRyaWdnZXIoJ3N0YXRpbzpqc29uUmVzcG9uc2UnLCBbanFYSFIucmVzcG9uc2VKU09OLCBqcVhIUl0pO1xuXHRcdFx0XHRuZXcgSlJlc3Aob3B0aW9ucy5jb250ZXh0LCByZXNwb25zZS5kYXRhKTtcblx0XHRcdH1cblx0XHRcdGVsc2Vcblx0XHRcdHtcblx0XHRcdFx0cmVzcG9uc2UuYm9keSA9IGpxWEhSLnJlc3BvbnNlVGV4dDtcblx0XHRcdFx0cmVzcG9uc2VfcGFyc2UoKTtcblx0XHRcdFx0aWYodGV4dFN0YXR1cyA9PSAnc3VjY2VzcycpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRpZiAob3B0aW9ucy50eXBlICE9ICdyZW5kZXInKSB7XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRvcHRpb25zLnJlc3BvbnNlID0gcmVzcG9uc2U7XG5cdFx0XHRcdFx0XHRcdG9wdGlvbnMucmVwbGFjZVxuXHRcdFx0XHRcdFx0XHRcdD8gaGlzdG9yeS5yZXBsYWNlU3RhdGUoSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvcHRpb25zKSksIG9wdGlvbnMudGl0bGUsIGFqYXhfc2VuZF91cmwgfHwgb3B0aW9ucy51cmwpXG5cdFx0XHRcdFx0XHRcdFx0OiBoaXN0b3J5LnB1c2hTdGF0ZShKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9wdGlvbnMpKSwgb3B0aW9ucy50aXRsZSwgYWpheF9zZW5kX3VybCB8fCBvcHRpb25zLnVybCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRjYXRjaCAoZSkge1xuXHRcdFx0XHRcdFx0XHR0cnl7XG5cdFx0XHRcdFx0XHRcdFx0b3B0aW9ucy5yZXBsYWNlXG5cdFx0XHRcdFx0XHRcdFx0XHQ/IGhpc3RvcnkucmVwbGFjZVN0YXRlKG9wdGlvbnMuZGF0YSwgb3B0aW9ucy50aXRsZSwgYWpheF9zZW5kX3VybCB8fCBvcHRpb25zLnVybClcblx0XHRcdFx0XHRcdFx0XHRcdDogaGlzdG9yeS5wdXNoU3RhdGUob3B0aW9ucy5kYXRhLCBvcHRpb25zLnRpdGxlLCBhamF4X3NlbmRfdXJsIHx8IG9wdGlvbnMudXJsKTtcblxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGNhdGNoIChlKXtcblx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKGUpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdCQoZG9jdW1lbnQpLnRyaWdnZXIoJ3N0YXRpbzpnbG9iYWw6c3VjY2VzcycsIFtvcHRpb25zLmNvbnRleHQsIHJlc3BvbnNlLmRhdGEsIHJlc3BvbnNlLmJvZHksIGpxWEhSXSk7XG5cdFx0XHRcdFx0b3B0aW9ucy5jb250ZXh0LnRyaWdnZXIoJ3N0YXRpbzpzdWNjZXNzJywgW3Jlc3BvbnNlLmRhdGEsIHJlc3BvbnNlLmJvZHksIGpxWEhSXSk7XG5cdFx0XHRcdFx0aWYob3B0aW9ucy50eXBlICE9ICd1cmwnKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHJlbmRlcigpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlXG5cdFx0XHRcdHtcblx0XHRcdFx0XHQkKGRvY3VtZW50KS50cmlnZ2VyKCdzdGF0aW86Z2xvYmFsOmVycm9yUmVzcG9uc2UnLCBbb3B0aW9ucy5jb250ZXh0LCByZXNwb25zZS5kYXRhLCByZXNwb25zZS5ib2R5LCBqcVhIUl0pO1xuXHRcdFx0XHRcdG9wdGlvbnMuY29udGV4dC50cmlnZ2VyKCdzdGF0aW86ZXJyb3JSZXNwb25zZScsIFtyZXNwb25zZS5kYXRhLCByZXNwb25zZS5ib2R5LCBqcVhIUl0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHQkKGRvY3VtZW50KS50cmlnZ2VyKCdzdGF0aW86Z2xvYmFsOmRvbmUnLCBbb3B0aW9ucy5jb250ZXh0LCByZXNwb25zZS5kYXRhLCByZXNwb25zZS5ib2R5LCBqcVhIUl0pO1xuXHRcdFx0b3B0aW9ucy5jb250ZXh0LnRyaWdnZXIoJ3N0YXRpbzpkb25lJywgW3Jlc3BvbnNlLmRhdGEsIHJlc3BvbnNlLmJvZHksIGpxWEhSXSk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gcmVzcG9uc2VfcGFyc2UoKXtcblx0XHRcdGlmKHR5cGVvZiByZXNwb25zZS5ib2R5ID09ICdzdHJpbmcnKVxuXHRcdFx0e1xuXHRcdFx0XHR0cnlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHZhciBzcGxpdCAgICAgPSByZXNwb25zZS5ib2R5LnNwbGl0KFwiXFxuXCIpO1xuXHRcdFx0XHRcdHJlc3BvbnNlLmRhdGEgPSBKU09OLnBhcnNlKHNwbGl0WzBdKTtcblx0XHRcdFx0XHRyZXNwb25zZS5ib2R5ID0gc3BsaXQubGVuZ3RoID4gMSA/ICQoJC5wYXJzZUhUTUwoc3BsaXQuc3BsaWNlKDEpLmpvaW4oXCJcIikpKSA6IG51bGw7XG5cdFx0XHRcdH1jYXRjaChlKXtcblx0XHRcdFx0XHRyZXNwb25zZS5ib2R5ICA9ICQoJC5wYXJzZUhUTUwocmVzcG9uc2UuYm9keSkpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmKHR5cGVvZiByZXNwb25zZS5ib2R5ID09ICdvYmplY3QnICYmIHJlc3BvbnNlLmJvZHkgIT0gbnVsbClcblx0XHRcdHtcblx0XHRcdFx0aWYocmVzcG9uc2UuYm9keSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0cmVzcG9uc2UuYm9keSAgPSAkKHJlc3BvbnNlLmJvZHkpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2UgaWYocmVzcG9uc2UuYm9keSBpbnN0YW5jZW9mIGpRdWVyeSlcblx0XHRcdFx0e1xuXG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0cmVzcG9uc2UuZGF0YSA9IHJlc3BvbnNlLmJvZHk7XG5cdFx0XHRcdFx0cmVzcG9uc2UuYm9keSA9IG51bGw7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRmdW5jdGlvbiByZW5kZXIoKXtcblx0XHRcdGZvcihEIGluIHJlc3BvbnNlLmRhdGEpXG5cdFx0XHR7XG5cdFx0XHRcdGlmKG9wdGlvbnMuZ2xvYmFsc1tEXSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG9wdGlvbnMuZ2xvYmFsc1tEXShyZXNwb25zZS5kYXRhW0RdKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0aWYocmVzcG9uc2UuYm9keSlcblx0XHRcdHtcblx0XHRcdFx0dmFyIGNoYW5nZWQgPSBbXTtcblx0XHRcdFx0cmVzcG9uc2UuYm9keS5lYWNoKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0dmFyIGJhc2UgPSAkKHRoaXMpLmF0dHIoJ2RhdGEteGhyJyk7XG5cdFx0XHRcdFx0aWYoYmFzZSlcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRjaGFuZ2VkLnB1c2goJChcIltkYXRhLXhocj0nXCIrYmFzZStcIiddXCIpKTtcblx0XHRcdFx0XHRcdCQoXCJbZGF0YS14aHI9J1wiK2Jhc2UrXCInXVwiKS5odG1sKCQodGhpcykuaHRtbCgpKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHQkKGRvY3VtZW50KS50cmlnZ2VyKCdzdGF0aW86Z2xvYmFsOnJlbmRlclJlc3BvbnNlJywgWyQoY2hhbmdlZCksIG9wdGlvbnMuY29udGV4dCwgcmVzcG9uc2UuZGF0YSwgcmVzcG9uc2UuYm9keV0pO1xuXHRcdFx0XHRvcHRpb25zLmNvbnRleHQudHJpZ2dlcignc3RhdGlvOnJlbmRlclJlc3BvbnNlJywgWyQoY2hhbmdlZCksIHJlc3BvbnNlLmRhdGEsIHJlc3BvbnNlLmJvZHldKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cblx0d2luZG93LlN0YXRpbyA9IHN0YXRpbztcblx0LyoqXG5cdCAqIGZvciBuZXcgY2hyb21lIGJ1Z1xuXHQgKi9cblx0IG5ldyBTdGF0aW8oe1xuXHQgXHR1cmwgOiBsb2NhdGlvbi5ocmVmLFxuXHQgXHRmYWtlIDogdHJ1ZSxcblx0IFx0cmVwbGFjZSA6IHRydWVcblx0IH0pO1xuXG5cdC8qKlxuXHQgKiBwb3BzdGF0ZSBldmVudFxuXHQgKi9cblx0IHdpbmRvdy5vbnBvcHN0YXRlID0gZnVuY3Rpb24oZXZlbnQpe1xuXHQgXHRuZXcgU3RhdGlvKHtcblx0IFx0XHR1cmwgOiBsb2NhdGlvbi5ocmVmLFxuXHQgXHRcdHJlcGxhY2UgOiB0cnVlXG5cdCBcdH0pO1xuXHQgfTtcbn0pKCk7IiwiXG4vLyBDb3B5cmlnaHQgMjAxMy0yMDE0IEtldmluIENveFxuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiogIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkICAgICAgICAgICAqXG4qICB3YXJyYW50eS4gSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXMgICAgICAgKlxuKiAgYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4qICBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSwgICAgICAgKlxuKiAgaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdCAgICAgICpcbiogIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuKiAgMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3QgICAgICpcbiogICAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlIGluICAqXG4qICAgICBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmUgICAgICAgKlxuKiAgICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4qICAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZSAgKlxuKiAgICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4qICAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLiAgKlxuKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbitmdW5jdGlvbigpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBhcnJheSA9IC9cXFsoW15cXFtdKilcXF0kLztcblxuLy8vIFVSTCBSZWdleC5cbi8qKlxuICogVGhpcyByZWdleCBzcGxpdHMgdGhlIFVSTCBpbnRvIHBhcnRzLiAgVGhlIGNhcHR1cmUgZ3JvdXBzIGNhdGNoIHRoZSBpbXBvcnRhbnRcbiAqIGJpdHMuXG4gKlxuICogRWFjaCBzZWN0aW9uIGlzIG9wdGlvbmFsLCBzbyB0byB3b3JrIG9uIGFueSBwYXJ0IGZpbmQgdGhlIGNvcnJlY3QgdG9wIGxldmVsXG4gKiBgKC4uLik/YCBhbmQgbWVzcyBhcm91bmQgd2l0aCBpdC5cbiAqL1xudmFyIHJlZ2V4ID0gL14oPzooW2Etel0qKTopPyg/OlxcL1xcLyk/KD86KFteOkBdKikoPzo6KFteQF0qKSk/QCk/KFswLTlhLXotLl9dKyk/KD86OihbMC05XSopKT8oXFwvW14/I10qKT8oPzpcXD8oW14jXSopKT8oPzojKC4qKSk/JC9pO1xuLy8gICAgICAgICAgICAgICAxIC0gc2NoZW1lICAgICAgICAgICAgICAyIC0gdXNlciAgICAzID0gcGFzcyAgICA0IC0gaG9zdCAgICAgICAgICAgNSAtIHBvcnQgIDYgLSBwYXRoICAgICAgICA3IC0gcXVlcnkgICAgOCAtIGhhc2hcblxudmFyIG5vc2xhc2ggPSBbXCJtYWlsdG9cIixcImJpdGNvaW5cIl07XG5cbnZhciBzZWxmID0ge1xuXHQvKiogUGFyc2UgYSBxdWVyeSBzdHJpbmcuXG5cdCAqXG5cdCAqIFRoaXMgZnVuY3Rpb24gcGFyc2VzIGEgcXVlcnkgc3RyaW5nIChzb21ldGltZXMgY2FsbGVkIHRoZSBzZWFyY2hcblx0ICogc3RyaW5nKS4gIEl0IHRha2VzIGEgcXVlcnkgc3RyaW5nIGFuZCByZXR1cm5zIGEgbWFwIG9mIHRoZSByZXN1bHRzLlxuXHQgKlxuXHQgKiBLZXlzIGFyZSBjb25zaWRlcmVkIHRvIGJlIGV2ZXJ5dGhpbmcgdXAgdG8gdGhlIGZpcnN0ICc9JyBhbmQgdmFsdWVzIGFyZVxuXHQgKiBldmVyeXRoaW5nIGFmdGVyd29yZHMuICBTaW5jZSBVUkwtZGVjb2RpbmcgaXMgZG9uZSBhZnRlciBwYXJzaW5nLCBrZXlzXG5cdCAqIGFuZCB2YWx1ZXMgY2FuIGhhdmUgYW55IHZhbHVlcywgaG93ZXZlciwgJz0nIGhhdmUgdG8gYmUgZW5jb2RlZCBpbiBrZXlzXG5cdCAqIHdoaWxlICc/JyBhbmQgJyYnIGhhdmUgdG8gYmUgZW5jb2RlZCBhbnl3aGVyZSAoYXMgdGhleSBkZWxpbWl0IHRoZVxuXHQgKiBrdi1wYWlycykuXG5cdCAqXG5cdCAqIEtleXMgYW5kIHZhbHVlcyB3aWxsIGFsd2F5cyBiZSBzdHJpbmdzLCBleGNlcHQgaWYgdGhlcmUgaXMgYSBrZXkgd2l0aCBub1xuXHQgKiAnPScgaW4gd2hpY2ggY2FzZSBpdCB3aWxsIGJlIGNvbnNpZGVyZWQgYSBmbGFnIGFuZCB3aWxsIGJlIHNldCB0byB0cnVlLlxuXHQgKiBMYXRlciB2YWx1ZXMgd2lsbCBvdmVycmlkZSBlYXJsaWVyIHZhbHVlcy5cblx0ICpcblx0ICogQXJyYXkga2V5cyBhcmUgYWxzbyBzdXBwb3J0ZWQuICBCeSBkZWZhdWx0IGtleXMgaW4gdGhlIGZvcm0gb2YgYG5hbWVbaV1gXG5cdCAqIHdpbGwgYmUgcmV0dXJuZWQgbGlrZSB0aGF0IGFzIHN0cmluZ3MuICBIb3dldmVyLCBpZiB5b3Ugc2V0IHRoZSBgYXJyYXlgXG5cdCAqIGZsYWcgaW4gdGhlIG9wdGlvbnMgb2JqZWN0IHRoZXkgd2lsbCBiZSBwYXJzZWQgaW50byBhcnJheXMuICBOb3RlIHRoYXRcblx0ICogYWx0aG91Z2ggdGhlIG9iamVjdCByZXR1cm5lZCBpcyBhbiBgQXJyYXlgIG9iamVjdCBhbGwga2V5cyB3aWxsIGJlXG5cdCAqIHdyaXR0ZW4gdG8gaXQuICBUaGlzIG1lYW5zIHRoYXQgaWYgeW91IGhhdmUgYSBrZXkgc3VjaCBhcyBga1tmb3JFYWNoXWBcblx0ICogaXQgd2lsbCBvdmVyd3JpdGUgdGhlIGBmb3JFYWNoYCBmdW5jdGlvbiBvbiB0aGF0IGFycmF5LiAgQWxzbyBub3RlIHRoYXRcblx0ICogc3RyaW5nIHByb3BlcnRpZXMgYWx3YXlzIHRha2UgcHJlY2VkZW5jZSBvdmVyIGFycmF5IHByb3BlcnRpZXMsXG5cdCAqIGlycmVzcGVjdGl2ZSBvZiB3aGVyZSB0aGV5IGFyZSBpbiB0aGUgcXVlcnkgc3RyaW5nLlxuXHQgKlxuXHQgKiAgIHVybC5nZXQoXCJhcnJheVsxXT10ZXN0JmFycmF5W2Zvb109YmFyXCIse2FycmF5OnRydWV9KS5hcnJheVsxXSAgPT09IFwidGVzdFwiXG5cdCAqICAgdXJsLmdldChcImFycmF5WzFdPXRlc3QmYXJyYXlbZm9vXT1iYXJcIix7YXJyYXk6dHJ1ZX0pLmFycmF5LmZvbyA9PT0gXCJiYXJcIlxuXHQgKiAgIHVybC5nZXQoXCJhcnJheT1ub3RhbmFycmF5JmFycmF5WzBdPTFcIix7YXJyYXk6dHJ1ZX0pLmFycmF5ICAgICAgPT09IFwibm90YW5hcnJheVwiXG5cdCAqXG5cdCAqIElmIGFycmF5IHBhcnNpbmcgaXMgZW5hYmxlZCBrZXlzIGluIHRoZSBmb3JtIG9mIGBuYW1lW11gIHdpbGxcblx0ICogYXV0b21hdGljYWxseSBiZSBnaXZlbiB0aGUgbmV4dCBhdmFpbGFibGUgaW5kZXguICBOb3RlIHRoYXQgdGhpcyBjYW4gYmVcblx0ICogb3ZlcndyaXR0ZW4gd2l0aCBsYXRlciB2YWx1ZXMgaW4gdGhlIHF1ZXJ5IHN0cmluZy4gIEZvciB0aGlzIHJlYXNvbiBpc1xuXHQgKiBpcyBiZXN0IG5vdCB0byBtaXggdGhlIHR3byBmb3JtYXRzLCBhbHRob3VnaCBpdCBpcyBzYWZlIChhbmQgb2Z0ZW5cblx0ICogdXNlZnVsKSB0byBhZGQgYW4gYXV0b21hdGljIGluZGV4IGFyZ3VtZW50IHRvIHRoZSBlbmQgb2YgYSBxdWVyeSBzdHJpbmcuXG5cdCAqXG5cdCAqICAgdXJsLmdldChcImFbXT0wJmFbXT0xJmFbMF09MlwiLCB7YXJyYXk6dHJ1ZX0pICAtPiB7YTpbXCIyXCIsXCIxXCJdfTtcblx0ICogICB1cmwuZ2V0KFwiYVswXT0wJmFbMV09MSZhW109MlwiLCB7YXJyYXk6dHJ1ZX0pIC0+IHthOltcIjBcIixcIjFcIixcIjJcIl19O1xuXHQgKlxuXHQgKiBAcGFyYW17c3RyaW5nfSBxIFRoZSBxdWVyeSBzdHJpbmcgKHRoZSBwYXJ0IGFmdGVyIHRoZSAnPycpLlxuXHQgKiBAcGFyYW17e2Z1bGw6Ym9vbGVhbixhcnJheTpib29sZWFufT19IG9wdCBPcHRpb25zLlxuXHQgKlxuXHQgKiAtIGZ1bGw6IElmIHNldCBgcWAgd2lsbCBiZSB0cmVhdGVkIGFzIGEgZnVsbCB1cmwgYW5kIGBxYCB3aWxsIGJlIGJ1aWx0LlxuXHQgKiAgIGJ5IGNhbGxpbmcgI3BhcnNlIHRvIHJldHJpZXZlIHRoZSBxdWVyeSBwb3J0aW9uLlxuXHQgKiAtIGFycmF5OiBJZiBzZXQga2V5cyBpbiB0aGUgZm9ybSBvZiBga2V5W2ldYCB3aWxsIGJlIHRyZWF0ZWRcblx0ICogICBhcyBhcnJheXMvbWFwcy5cblx0ICpcblx0ICogQHJldHVybnshT2JqZWN0LjxzdHJpbmcsIHN0cmluZ3xBcnJheT59IFRoZSBwYXJzZWQgcmVzdWx0LlxuXHQgKi9cblx0XCJnZXRcIjogZnVuY3Rpb24ocSwgb3B0KXtcblx0XHRxID0gcSB8fCBcIlwiO1xuXHRcdGlmICggdHlwZW9mIG9wdCAgICAgICAgICA9PSBcInVuZGVmaW5lZFwiICkgb3B0ID0ge307XG5cdFx0aWYgKCB0eXBlb2Ygb3B0W1wiZnVsbFwiXSAgPT0gXCJ1bmRlZmluZWRcIiApIG9wdFtcImZ1bGxcIl0gPSBmYWxzZTtcblx0XHRpZiAoIHR5cGVvZiBvcHRbXCJhcnJheVwiXSA9PSBcInVuZGVmaW5lZFwiICkgb3B0W1wiYXJyYXlcIl0gPSBmYWxzZTtcblxuXHRcdGlmICggb3B0W1wiZnVsbFwiXSA9PT0gdHJ1ZSApXG5cdFx0e1xuXHRcdFx0cSA9IHNlbGZbXCJwYXJzZVwiXShxLCB7XCJnZXRcIjpmYWxzZX0pW1wicXVlcnlcIl0gfHwgXCJcIjtcblx0XHR9XG5cblx0XHR2YXIgbyA9IHt9O1xuXG5cdFx0dmFyIGMgPSBxLnNwbGl0KFwiJlwiKTtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGMubGVuZ3RoOyBpKyspXG5cdFx0e1xuXHRcdFx0aWYgKCFjW2ldLmxlbmd0aCkgY29udGludWU7XG5cblx0XHRcdHZhciBkID0gY1tpXS5pbmRleE9mKFwiPVwiKTtcblx0XHRcdHZhciBrID0gY1tpXSwgdiA9IHRydWU7XG5cdFx0XHRpZiAoIGQgPj0gMCApXG5cdFx0XHR7XG5cdFx0XHRcdGsgPSBjW2ldLnN1YnN0cigwLCBkKTtcblx0XHRcdFx0diA9IGNbaV0uc3Vic3RyKGQrMSk7XG5cblx0XHRcdFx0diA9IGRlY29kZVVSSUNvbXBvbmVudCh2KTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKG9wdFtcImFycmF5XCJdKVxuXHRcdFx0e1xuXHRcdFx0XHR2YXIgaW5kcyA9IFtdO1xuXHRcdFx0XHR2YXIgaW5kO1xuXHRcdFx0XHR2YXIgY3VybyA9IG87XG5cdFx0XHRcdHZhciBjdXJrID0gaztcblx0XHRcdFx0d2hpbGUgKGluZCA9IGN1cmsubWF0Y2goYXJyYXkpKSAvLyBBcnJheSFcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGN1cmsgPSBjdXJrLnN1YnN0cigwLCBpbmQuaW5kZXgpO1xuXHRcdFx0XHRcdGluZHMudW5zaGlmdChkZWNvZGVVUklDb21wb25lbnQoaW5kWzFdKSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y3VyayA9IGRlY29kZVVSSUNvbXBvbmVudChjdXJrKTtcblx0XHRcdFx0aWYgKGluZHMuc29tZShmdW5jdGlvbihpKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0aWYgKCB0eXBlb2YgY3Vyb1tjdXJrXSA9PSBcInVuZGVmaW5lZFwiICkgY3Vyb1tjdXJrXSA9IFtdO1xuXHRcdFx0XHRcdGlmICghQXJyYXkuaXNBcnJheShjdXJvW2N1cmtdKSlcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHQvL2NvbnNvbGUubG9nKFwidXJsLmdldDogQXJyYXkgcHJvcGVydHkgXCIrY3VyaytcIiBhbHJlYWR5IGV4aXN0cyBhcyBzdHJpbmchXCIpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Y3VybyA9IGN1cm9bY3Vya107XG5cblx0XHRcdFx0XHRpZiAoIGkgPT09IFwiXCIgKSBpID0gY3Vyby5sZW5ndGg7XG5cblx0XHRcdFx0XHRjdXJrID0gaTtcblx0XHRcdFx0fSkpIGNvbnRpbnVlO1xuXHRcdFx0XHRjdXJvW2N1cmtdID0gdjtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdGsgPSBkZWNvZGVVUklDb21wb25lbnQoayk7XG5cblx0XHRcdC8vdHlwZW9mIG9ba10gPT0gXCJ1bmRlZmluZWRcIiB8fCBjb25zb2xlLmxvZyhcIlByb3BlcnR5IFwiK2srXCIgYWxyZWFkeSBleGlzdHMhXCIpO1xuXHRcdFx0b1trXSA9IHY7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG87XG5cdH0sXG5cblx0LyoqIEJ1aWxkIGEgZ2V0IHF1ZXJ5IGZyb20gYW4gb2JqZWN0LlxuXHQgKlxuXHQgKiBUaGlzIGNvbnN0cnVjdHMgYSBxdWVyeSBzdHJpbmcgZnJvbSB0aGUga3YgcGFpcnMgaW4gYGRhdGFgLiAgQ2FsbGluZ1xuXHQgKiAjZ2V0IG9uIHRoZSBzdHJpbmcgcmV0dXJuZWQgc2hvdWxkIHJldHVybiBhbiBvYmplY3QgaWRlbnRpY2FsIHRvIHRoZSBvbmVcblx0ICogcGFzc2VkIGluIGV4Y2VwdCBhbGwgbm9uLWJvb2xlYW4gc2NhbGFyIHR5cGVzIGJlY29tZSBzdHJpbmdzIGFuZCBhbGxcblx0ICogb2JqZWN0IHR5cGVzIGJlY29tZSBhcnJheXMgKG5vbi1pbnRlZ2VyIGtleXMgYXJlIHN0aWxsIHByZXNlbnQsIHNlZVxuXHQgKiAjZ2V0J3MgZG9jdW1lbnRhdGlvbiBmb3IgbW9yZSBkZXRhaWxzKS5cblx0ICpcblx0ICogVGhpcyBhbHdheXMgdXNlcyBhcnJheSBzeW50YXggZm9yIGRlc2NyaWJpbmcgYXJyYXlzLiAgSWYgeW91IHdhbnQgdG9cblx0ICogc2VyaWFsaXplIHRoZW0gZGlmZmVyZW50bHkgKGxpa2UgaGF2aW5nIHRoZSB2YWx1ZSBiZSBhIEpTT04gYXJyYXkgYW5kXG5cdCAqIGhhdmUgYSBwbGFpbiBrZXkpIHlvdSB3aWxsIG5lZWQgdG8gZG8gdGhhdCBiZWZvcmUgcGFzc2luZyBpdCBpbi5cblx0ICpcblx0ICogQWxsIGtleXMgYW5kIHZhbHVlcyBhcmUgc3VwcG9ydGVkIChiaW5hcnkgZGF0YSBhbnlvbmU/KSBhcyB0aGV5IGFyZVxuXHQgKiBwcm9wZXJseSBVUkwtZW5jb2RlZCBhbmQgI2dldCBwcm9wZXJseSBkZWNvZGVzLlxuXHQgKlxuXHQgKiBAcGFyYW17T2JqZWN0fSBkYXRhIFRoZSBrdiBwYWlycy5cblx0ICogQHBhcmFte3N0cmluZ30gcHJlZml4IFRoZSBwcm9wZXJseSBlbmNvZGVkIGFycmF5IGtleSB0byBwdXQgdGhlXG5cdCAqICAgcHJvcGVydGllcy4gIE1haW5seSBpbnRlbmRlZCBmb3IgaW50ZXJuYWwgdXNlLlxuXHQgKiBAcmV0dXJue3N0cmluZ30gQSBVUkwtc2FmZSBzdHJpbmcuXG5cdCAqL1xuXHRcImJ1aWxkZ2V0XCI6IGZ1bmN0aW9uKGRhdGEsIHByZWZpeCl7XG5cdFx0dmFyIGl0bXMgPSBbXTtcblx0XHRmb3IgKCB2YXIgayBpbiBkYXRhIClcblx0XHR7XG5cdFx0XHR2YXIgZWsgPSBlbmNvZGVVUklDb21wb25lbnQoayk7XG5cdFx0XHRpZiAoIHR5cGVvZiBwcmVmaXggIT0gXCJ1bmRlZmluZWRcIiApXG5cdFx0XHRcdGVrID0gcHJlZml4K1wiW1wiK2VrK1wiXVwiO1xuXG5cdFx0XHR2YXIgdiA9IGRhdGFba107XG5cblx0XHRcdHN3aXRjaCAodHlwZW9mIHYpXG5cdFx0XHR7XG5cdFx0XHRcdGNhc2UgJ2Jvb2xlYW4nOlxuXHRcdFx0XHRcdGlmKHYpIGl0bXMucHVzaChlayk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgJ251bWJlcic6XG5cdFx0XHRcdFx0diA9IHYudG9TdHJpbmcoKTtcblx0XHRcdFx0Y2FzZSAnc3RyaW5nJzpcblx0XHRcdFx0XHRpdG1zLnB1c2goZWsrXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KHYpKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSAnb2JqZWN0Jzpcblx0XHRcdFx0XHRpdG1zLnB1c2goc2VsZltcImJ1aWxkZ2V0XCJdKHYsIGVrKSk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBpdG1zLmpvaW4oXCImXCIpO1xuXHR9LFxuXG5cdC8qKiBQYXJzZSBhIFVSTFxuXHQgKlxuXHQgKiBUaGlzIGJyZWFrcyB1cCBhIFVSTCBpbnRvIGNvbXBvbmVudHMuICBJdCBhdHRlbXB0cyB0byBiZSB2ZXJ5IGxpYmVyYWxcblx0ICogYW5kIHJldHVybnMgdGhlIGJlc3QgcmVzdWx0IGluIG1vc3QgY2FzZXMuICBUaGlzIG1lYW5zIHRoYXQgeW91IGNhblxuXHQgKiBvZnRlbiBwYXNzIGluIHBhcnQgb2YgYSBVUkwgYW5kIGdldCBjb3JyZWN0IGNhdGVnb3JpZXMgYmFjay4gIE5vdGFibHksXG5cdCAqIHRoaXMgd29ya3MgZm9yIGVtYWlscyBhbmQgSmFiYmVyIElEcywgYXMgd2VsbCBhcyBhZGRpbmcgYSAnPycgdG8gdGhlXG5cdCAqIGJlZ2lubmluZyBvZiBhIHN0cmluZyB3aWxsIHBhcnNlIHRoZSB3aG9sZSB0aGluZyBhcyBhIHF1ZXJ5IHN0cmluZy4gIElmXG5cdCAqIGFuIGl0ZW0gaXMgbm90IGZvdW5kIHRoZSBwcm9wZXJ0eSB3aWxsIGJlIHVuZGVmaW5lZC4gIEluIHNvbWUgY2FzZXMgYW5cblx0ICogZW1wdHkgc3RyaW5nIHdpbGwgYmUgcmV0dXJuZWQgaWYgdGhlIHN1cnJvdW5kaW5nIHN5bnRheCBidXQgdGhlIGFjdHVhbFxuXHQgKiB2YWx1ZSBpcyBlbXB0eSAoZXhhbXBsZTogXCI6Ly9leGFtcGxlLmNvbVwiIHdpbGwgZ2l2ZSBhIGVtcHR5IHN0cmluZyBmb3Jcblx0ICogc2NoZW1lLikgIE5vdGFibHkgdGhlIGhvc3QgbmFtZSB3aWxsIGFsd2F5cyBiZSBzZXQgdG8gc29tZXRoaW5nLlxuXHQgKlxuXHQgKiBSZXR1cm5lZCBwcm9wZXJ0aWVzLlxuXHQgKlxuXHQgKiAtICoqc2NoZW1lOioqIFRoZSB1cmwgc2NoZW1lLiAoZXg6IFwibWFpbHRvXCIgb3IgXCJodHRwc1wiKVxuXHQgKiAtICoqdXNlcjoqKiBUaGUgdXNlcm5hbWUuXG5cdCAqIC0gKipwYXNzOioqIFRoZSBwYXNzd29yZC5cblx0ICogLSAqKmhvc3Q6KiogVGhlIGhvc3RuYW1lLiAoZXg6IFwibG9jYWxob3N0XCIsIFwiMTIzLjQ1Ni43LjhcIiBvciBcImV4YW1wbGUuY29tXCIpXG5cdCAqIC0gKipwb3J0OioqIFRoZSBwb3J0LCBhcyBhIG51bWJlci4gKGV4OiAxMzM3KVxuXHQgKiAtICoqcGF0aDoqKiBUaGUgcGF0aC4gKGV4OiBcIi9cIiBvciBcIi9hYm91dC5odG1sXCIpXG5cdCAqIC0gKipxdWVyeToqKiBcIlRoZSBxdWVyeSBzdHJpbmcuIChleDogXCJmb289YmFyJnY9MTcmZm9ybWF0PWpzb25cIilcblx0ICogLSAqKmdldDoqKiBUaGUgcXVlcnkgc3RyaW5nIHBhcnNlZCB3aXRoIGdldC4gIElmIGBvcHQuZ2V0YCBpcyBgZmFsc2VgIHRoaXNcblx0ICogICB3aWxsIGJlIGFic2VudFxuXHQgKiAtICoqaGFzaDoqKiBUaGUgdmFsdWUgYWZ0ZXIgdGhlIGhhc2guIChleDogXCJteWFuY2hvclwiKVxuXHQgKiAgIGJlIHVuZGVmaW5lZCBldmVuIGlmIGBxdWVyeWAgaXMgc2V0LlxuXHQgKlxuXHQgKiBAcGFyYW17c3RyaW5nfSB1cmwgVGhlIFVSTCB0byBwYXJzZS5cblx0ICogQHBhcmFte3tnZXQ6T2JqZWN0fT19IG9wdCBPcHRpb25zOlxuXHQgKlxuXHQgKiAtIGdldDogQW4gb3B0aW9ucyBhcmd1bWVudCB0byBiZSBwYXNzZWQgdG8gI2dldCBvciBmYWxzZSB0byBub3QgY2FsbCAjZ2V0LlxuXHQgKiAgICAqKkRPIE5PVCoqIHNldCBgZnVsbGAuXG5cdCAqXG5cdCAqIEByZXR1cm57IU9iamVjdH0gQW4gb2JqZWN0IHdpdGggdGhlIHBhcnNlZCB2YWx1ZXMuXG5cdCAqL1xuXHRcInBhcnNlXCI6IGZ1bmN0aW9uKHVybCwgb3B0KSB7XG5cblx0XHRpZiAoIHR5cGVvZiBvcHQgPT0gXCJ1bmRlZmluZWRcIiApIG9wdCA9IHt9O1xuXG5cdFx0dmFyIG1kID0gdXJsLm1hdGNoKHJlZ2V4KSB8fCBbXTtcblxuXHRcdHZhciByID0ge1xuXHRcdFx0XCJ1cmxcIjogICAgdXJsLFxuXG5cdFx0XHRcInNjaGVtZVwiOiBtZFsxXSxcblx0XHRcdFwidXNlclwiOiAgIG1kWzJdLFxuXHRcdFx0XCJwYXNzXCI6ICAgbWRbM10sXG5cdFx0XHRcImhvc3RcIjogICBtZFs0XSxcblx0XHRcdFwicG9ydFwiOiAgIG1kWzVdICYmICttZFs1XSxcblx0XHRcdFwicGF0aFwiOiAgIG1kWzZdLFxuXHRcdFx0XCJxdWVyeVwiOiAgbWRbN10sXG5cdFx0XHRcImhhc2hcIjogICBtZFs4XSxcblx0XHR9O1xuXG5cdFx0aWYgKCBvcHQuZ2V0ICE9PSBmYWxzZSApXG5cdFx0XHRyW1wiZ2V0XCJdID0gcltcInF1ZXJ5XCJdICYmIHNlbGZbXCJnZXRcIl0ocltcInF1ZXJ5XCJdLCBvcHQuZ2V0KTtcblxuXHRcdHJldHVybiByO1xuXHR9LFxuXG5cdC8qKiBCdWlsZCBhIFVSTCBmcm9tIGNvbXBvbmVudHMuXG5cdCAqXG5cdCAqIFRoaXMgcGllY2VzIHRvZ2V0aGVyIGEgdXJsIGZyb20gdGhlIHByb3BlcnRpZXMgb2YgdGhlIHBhc3NlZCBpbiBvYmplY3QuXG5cdCAqIEluIGdlbmVyYWwgcGFzc2luZyB0aGUgcmVzdWx0IG9mIGBwYXJzZSgpYCBzaG91bGQgcmV0dXJuIHRoZSBVUkwuICBUaGVyZVxuXHQgKiBtYXkgZGlmZmVyZW5jZXMgaW4gdGhlIGdldCBzdHJpbmcgYXMgdGhlIGtleXMgYW5kIHZhbHVlcyBtaWdodCBiZSBtb3JlXG5cdCAqIGVuY29kZWQgdGhlbiB0aGV5IHdlcmUgb3JpZ2luYWxseSB3ZXJlLiAgSG93ZXZlciwgY2FsbGluZyBgZ2V0KClgIG9uIHRoZVxuXHQgKiB0d28gdmFsdWVzIHNob3VsZCB5aWVsZCB0aGUgc2FtZSByZXN1bHQuXG5cdCAqXG5cdCAqIEhlcmUgaXMgaG93IHRoZSBwYXJhbWV0ZXJzIGFyZSB1c2VkLlxuXHQgKlxuXHQgKiAgLSB1cmw6IFVzZWQgb25seSBpZiBubyBvdGhlciB2YWx1ZXMgYXJlIHByb3ZpZGVkLiAgSWYgdGhhdCBpcyB0aGUgY2FzZVxuXHQgKiAgICAgYHVybGAgd2lsbCBiZSByZXR1cm5lZCB2ZXJiYXRpbS5cblx0ICogIC0gc2NoZW1lOiBVc2VkIGlmIGRlZmluZWQuXG5cdCAqICAtIHVzZXI6IFVzZWQgaWYgZGVmaW5lZC5cblx0ICogIC0gcGFzczogVXNlZCBpZiBkZWZpbmVkLlxuXHQgKiAgLSBob3N0OiBVc2VkIGlmIGRlZmluZWQuXG5cdCAqICAtIHBhdGg6IFVzZWQgaWYgZGVmaW5lZC5cblx0ICogIC0gcXVlcnk6IFVzZWQgb25seSBpZiBgZ2V0YCBpcyBub3QgcHJvdmlkZWQgYW5kIG5vbi1lbXB0eS5cblx0ICogIC0gZ2V0OiBVc2VkIGlmIG5vbi1lbXB0eS4gIFBhc3NlZCB0byAjYnVpbGRnZXQgYW5kIHRoZSByZXN1bHQgaXMgdXNlZFxuXHQgKiAgICBhcyB0aGUgcXVlcnkgc3RyaW5nLlxuXHQgKiAgLSBoYXNoOiBVc2VkIGlmIGRlZmluZWQuXG5cdCAqXG5cdCAqIFRoZXNlIGFyZSB0aGUgb3B0aW9ucyB0aGF0IGFyZSB2YWxpZCBvbiB0aGUgb3B0aW9ucyBvYmplY3QuXG5cdCAqXG5cdCAqICAtIHVzZWVtcHR5Z2V0OiBJZiB0cnV0aHksIGEgcXVlc3Rpb24gbWFyayB3aWxsIGJlIGFwcGVuZGVkIGZvciBlbXB0eSBnZXRcblx0ICogICAgc3RyaW5ncy4gIFRoaXMgbm90YWJseSBtYWtlcyBgYnVpbGQoKWAgYW5kIGBwYXJzZSgpYCBmdWxseSBzeW1tZXRyaWMuXG5cdCAqXG5cdCAqIEBwYXJhbXtPYmplY3R9IGRhdGEgVGhlIHBpZWNlcyBvZiB0aGUgVVJMLlxuXHQgKiBAcGFyYW17T2JqZWN0fSBvcHQgT3B0aW9ucyBmb3IgYnVpbGRpbmcgdGhlIHVybC5cblx0ICogQHJldHVybntzdHJpbmd9IFRoZSBVUkwuXG5cdCAqL1xuXHRcImJ1aWxkXCI6IGZ1bmN0aW9uKGRhdGEsIG9wdCl7XG5cdFx0b3B0ID0gb3B0IHx8IHt9O1xuXG5cdFx0dmFyIHIgPSBcIlwiO1xuXG5cdFx0aWYgKCB0eXBlb2YgZGF0YVtcInNjaGVtZVwiXSAhPSBcInVuZGVmaW5lZFwiIClcblx0XHR7XG5cdFx0XHRyICs9IGRhdGFbXCJzY2hlbWVcIl07XG5cdFx0XHRyICs9IChub3NsYXNoLmluZGV4T2YoZGF0YVtcInNjaGVtZVwiXSk+PTApP1wiOlwiOlwiOi8vXCI7XG5cdFx0fVxuXHRcdGlmICggdHlwZW9mIGRhdGFbXCJ1c2VyXCJdICE9IFwidW5kZWZpbmVkXCIgKVxuXHRcdHtcblx0XHRcdHIgKz0gZGF0YVtcInVzZXJcIl07XG5cdFx0XHRpZiAoIHR5cGVvZiBkYXRhW1wicGFzc1wiXSA9PSBcInVuZGVmaW5lZFwiIClcblx0XHRcdHtcblx0XHRcdFx0ciArPSBcIkBcIjtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYgKCB0eXBlb2YgZGF0YVtcInBhc3NcIl0gIT0gXCJ1bmRlZmluZWRcIiApIHIgKz0gXCI6XCIgKyBkYXRhW1wicGFzc1wiXSArIFwiQFwiO1xuXHRcdGlmICggdHlwZW9mIGRhdGFbXCJob3N0XCJdICE9IFwidW5kZWZpbmVkXCIgKSByICs9IGRhdGFbXCJob3N0XCJdO1xuXHRcdGlmICggdHlwZW9mIGRhdGFbXCJwb3J0XCJdICE9IFwidW5kZWZpbmVkXCIgKSByICs9IFwiOlwiICsgZGF0YVtcInBvcnRcIl07XG5cdFx0aWYgKCB0eXBlb2YgZGF0YVtcInBhdGhcIl0gIT0gXCJ1bmRlZmluZWRcIiApIHIgKz0gZGF0YVtcInBhdGhcIl07XG5cblx0XHRpZiAob3B0W1widXNlZW1wdHlnZXRcIl0pXG5cdFx0e1xuXHRcdFx0aWYgICAgICAoIHR5cGVvZiBkYXRhW1wiZ2V0XCJdICAgIT0gXCJ1bmRlZmluZWRcIiApIHIgKz0gXCI/XCIgKyBzZWxmW1wiYnVpbGRnZXRcIl0oZGF0YVtcImdldFwiXSk7XG5cdFx0XHRlbHNlIGlmICggdHlwZW9mIGRhdGFbXCJxdWVyeVwiXSAhPSBcInVuZGVmaW5lZFwiICkgciArPSBcIj9cIiArIGRhdGFbXCJxdWVyeVwiXTtcblx0XHR9XG5cdFx0ZWxzZVxuXHRcdHtcblx0XHRcdC8vIElmIC5nZXQgdXNlIGl0LiAgSWYgLmdldCBsZWFkcyB0byBlbXB0eSwgdXNlIC5xdWVyeS5cblx0XHRcdHZhciBxID0gZGF0YVtcImdldFwiXSAmJiBzZWxmW1wiYnVpbGRnZXRcIl0oZGF0YVtcImdldFwiXSkgfHwgZGF0YVtcInF1ZXJ5XCJdO1xuXHRcdFx0aWYgKHEpIHIgKz0gXCI/XCIgKyBxO1xuXHRcdH1cblxuXHRcdGlmICggdHlwZW9mIGRhdGFbXCJoYXNoXCJdICE9IFwidW5kZWZpbmVkXCIgKSByICs9IFwiI1wiICsgZGF0YVtcImhhc2hcIl07XG5cblx0XHRyZXR1cm4gciB8fCBkYXRhW1widXJsXCJdIHx8IFwiXCI7XG5cdH0sXG59O1xuXG5pZiAoIHR5cGVvZiBkZWZpbmUgIT0gXCJ1bmRlZmluZWRcIiAmJiBkZWZpbmVbXCJhbWRcIl0gKSBkZWZpbmUoc2VsZik7XG5lbHNlIGlmICggdHlwZW9mIG1vZHVsZSAhPSBcInVuZGVmaW5lZFwiICkgbW9kdWxlWydleHBvcnRzJ10gPSBzZWxmO1xuZWxzZSB3aW5kb3dbXCJ1cmxcIl0gPSBzZWxmO1xuXG59KCk7IiwiY29uc3QgYXNpZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYXNpZGUnKTtcbmNvbnN0IGFzaWRlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FzaWRlLWJ0bicpO1xuZnVuY3Rpb24gaGFuZGxlQXNpZGUoZXZlbnQpIHtcbiAgICBhc2lkZS5jbGFzc0xpc3QuYWRkKCdvcGVuJyk7XG59XG5pZiAoYXNpZGVCdG4pXG57XG4gICAgYXNpZGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVBc2lkZSk7XG59XG5cbmNvbnN0IHByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZScpO1xuY29uc3QgZHJvcGRvd24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZS1kcm9wZG93bicpO1xuXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlQ2xpY2soZXZlbnQpIHtcbiAgICBkcm9wZG93bi5jbGFzc0xpc3QuYWRkKCdvcGVuJyk7XG59XG5cbnByb2ZpbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVQcm9maWxlQ2xpY2spO1xud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBpZiAoIWV2ZW50LnRhcmdldC5jbG9zZXN0KCcucHJvZmlsZS1kaXYnKSkge1xuICAgICAgICBkcm9wZG93bi5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuJyk7XG4gICAgfVxuICAgIGlmICghZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJyNhc2lkZScpICYmICFldmVudC50YXJnZXQuY2xvc2VzdCgnI2FzaWRlLWJ0bicpKSB7XG4gICAgICAgIGFzaWRlLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW4nKTtcbiAgICB9XG59KTtcblxuYW00Y29yZS5yZWFkeShmdW5jdGlvbiAoKSB7XG5cbiAgICAvLyBUaGVtZXMgYmVnaW5cbiAgICBhbTRjb3JlLnVzZVRoZW1lKGFtNHRoZW1lc19hbWNoYXJ0cyk7XG4gICAgLy8gVGhlbWVzIGVuZFxuXG4gICAgLy8gQ3JlYXRlIGNoYXJ0IGluc3RhbmNlXG4gICAgdmFyIGNoYXJ0ID0gYW00Y29yZS5jcmVhdGUoXCJjaGFydGRpdlwiLCBhbTRjaGFydHMuWFlDaGFydCk7XG5cbiAgICBjaGFydC5ydGwgPSB0cnVlO1xuXG4gICAgLy8gQWRkIGRhdGFcbiAgICBjaGFydC5kYXRhID0gW3tcbiAgICAgICAgXCJjb3VudHJ5XCI6IFwiVVNBXCIsXG4gICAgICAgIFwidmlzaXRzXCI6IDIwMjVcbiAgICB9LCB7XG4gICAgICAgIFwiY291bnRyeVwiOiBcIkNoaW5hXCIsXG4gICAgICAgIFwidmlzaXRzXCI6IDE4ODJcbiAgICB9LCB7XG4gICAgICAgIFwiY291bnRyeVwiOiBcIkphcGFuXCIsXG4gICAgICAgIFwidmlzaXRzXCI6IDE4MDlcbiAgICB9LCB7XG4gICAgICAgIFwiY291bnRyeVwiOiBcIkdlcm1hbnlcIixcbiAgICAgICAgXCJ2aXNpdHNcIjogMTMyMlxuICAgIH0sIHtcbiAgICAgICAgXCJjb3VudHJ5XCI6IFwiVUtcIixcbiAgICAgICAgXCJ2aXNpdHNcIjogMTEyMlxuICAgIH0sIHtcbiAgICAgICAgXCJjb3VudHJ5XCI6IFwiRnJhbmNlXCIsXG4gICAgICAgIFwidmlzaXRzXCI6IDExMTRcbiAgICB9LCB7XG4gICAgICAgIFwiY291bnRyeVwiOiBcIkluZGlhXCIsXG4gICAgICAgIFwidmlzaXRzXCI6IDk4NFxuICAgIH0sIHtcbiAgICAgICAgXCJjb3VudHJ5XCI6IFwiU3BhaW5cIixcbiAgICAgICAgXCJ2aXNpdHNcIjogNzExXG4gICAgfSwge1xuICAgICAgICBcImNvdW50cnlcIjogXCJOZXRoZXJsYW5kc1wiLFxuICAgICAgICBcInZpc2l0c1wiOiA2NjVcbiAgICB9LCB7XG4gICAgICAgIFwiY291bnRyeVwiOiBcIlJ1c3NpYVwiLFxuICAgICAgICBcInZpc2l0c1wiOiA1ODBcbiAgICB9LCB7XG4gICAgICAgIFwiY291bnRyeVwiOiBcIlNvdXRoIEtvcmVhXCIsXG4gICAgICAgIFwidmlzaXRzXCI6IDQ0M1xuICAgIH0sIHtcbiAgICAgICAgXCJjb3VudHJ5XCI6IFwiQ2FuYWRhXCIsXG4gICAgICAgIFwidmlzaXRzXCI6IDQ0MVxuICAgIH0sIHtcbiAgICAgICAgXCJjb3VudHJ5XCI6IFwiQnJhemlsXCIsXG4gICAgICAgIFwidmlzaXRzXCI6IDM5NVxuICAgIH1dO1xuXG4gICAgLy8gQ3JlYXRlIGF4ZXNcblxuICAgIHZhciBjYXRlZ29yeUF4aXMgPSBjaGFydC54QXhlcy5wdXNoKG5ldyBhbTRjaGFydHMuQ2F0ZWdvcnlBeGlzKCkpO1xuICAgIGNhdGVnb3J5QXhpcy5kYXRhRmllbGRzLmNhdGVnb3J5ID0gXCJjb3VudHJ5XCI7XG4gICAgY2F0ZWdvcnlBeGlzLnJlbmRlcmVyLmdyaWQudGVtcGxhdGUubG9jYXRpb24gPSAwO1xuICAgIGNhdGVnb3J5QXhpcy5yZW5kZXJlci5taW5HcmlkRGlzdGFuY2UgPSAzMDtcblxuICAgIGNhdGVnb3J5QXhpcy5yZW5kZXJlci5sYWJlbHMudGVtcGxhdGUuYWRhcHRlci5hZGQoXCJkeVwiLCBmdW5jdGlvbiAoZHksIHRhcmdldCkge1xuICAgICAgICBpZiAodGFyZ2V0LmRhdGFJdGVtICYmIHRhcmdldC5kYXRhSXRlbS5pbmRleCAmIDIgPT0gMikge1xuICAgICAgICAgICAgcmV0dXJuIGR5ICsgMjU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGR5O1xuICAgIH0pO1xuXG4gICAgdmFyIHZhbHVlQXhpcyA9IGNoYXJ0LnlBeGVzLnB1c2gobmV3IGFtNGNoYXJ0cy5WYWx1ZUF4aXMoKSk7XG5cbiAgICAvLyBDcmVhdGUgc2VyaWVzXG4gICAgdmFyIHNlcmllcyA9IGNoYXJ0LnNlcmllcy5wdXNoKG5ldyBhbTRjaGFydHMuQ29sdW1uU2VyaWVzKCkpO1xuICAgIHNlcmllcy5kYXRhRmllbGRzLnZhbHVlWSA9IFwidmlzaXRzXCI7XG4gICAgc2VyaWVzLmRhdGFGaWVsZHMuY2F0ZWdvcnlYID0gXCJjb3VudHJ5XCI7XG4gICAgc2VyaWVzLm5hbWUgPSBcIlZpc2l0c1wiO1xuICAgIHNlcmllcy5jb2x1bW5zLnRlbXBsYXRlLnRvb2x0aXBUZXh0ID0gXCJ7Y2F0ZWdvcnlYfTogW2JvbGRde3ZhbHVlWX1bL11cIjtcbiAgICBzZXJpZXMuY29sdW1ucy50ZW1wbGF0ZS5maWxsT3BhY2l0eSA9IC44O1xuXG4gICAgdmFyIGNvbHVtblRlbXBsYXRlID0gc2VyaWVzLmNvbHVtbnMudGVtcGxhdGU7XG4gICAgY29sdW1uVGVtcGxhdGUuc3Ryb2tlV2lkdGggPSAyO1xuICAgIGNvbHVtblRlbXBsYXRlLnN0cm9rZU9wYWNpdHkgPSAxO1xuXG59KTsgLy8gZW5kIGFtNGNvcmUucmVhZHkoKVxuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAkKCcuc2VsZWN0MicpLnNlbGVjdDIoKTtcbn0pO1xuXG5mdW5jdGlvbiByZWFkVVJMKGlucHV0KSB7XG4gICAgaWYgKGlucHV0LmZpbGVzICYmIGlucHV0LmZpbGVzWzBdKSB7XG4gICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuXG4gICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAkKGlucHV0KS5uZXh0KCdsYWJlbCcpLmNoaWxkcmVuKCdpbWcnKS5hdHRyKCdzcmMnLCBlLnRhcmdldC5yZXN1bHQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoaW5wdXQuZmlsZXNbMF0pO1xuICAgIH1cbiAgfVxuXG4kKCcuaW5wdXQtYXZhdGFyJykuY2hhbmdlKGZ1bmN0aW9uKCkge1xuICAgIHJlYWRVUkwodGhpcyk7XG59KTsiLCJcbnZhciBkYXRlcGlja2VyID0gZnVuY3Rpb24gKGVsZW1lbnRJRCwgb3B0KSB7XG5cbiAgICAvLyBjaGVjayBhcmd1bWVudHNcbiAgICBpZiAodHlwZW9mIGVsZW1lbnRJRCAhPT0gXCJzdHJpbmdcIiB8fCBlbGVtZW50SUQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJkYXRlcGlja2VyIGVycm9yOiBpbnB1dCBJRCBpcyBub3Qgc3RyaW5nIG9yIGlzIGVtcHR5XCIpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBvcHRpb25zID0gb3B0IHx8IHt9O1xuXG4gICAgLy8gdmFyaWFibGVzXG4gICAgdmFyIGlzQ2FsQ2xpY2tlZCA9IGZhbHNlO1xuICAgIHZhciBpc1N5bmNlZCA9IGZhbHNlO1xuXG4gICAgdmFyIGRheU9mV2VlaztcblxuICAgIHZhciBzZWxlY3RlZFllYXI7XG4gICAgdmFyIHNlbGVjdGVkTW9udGg7XG4gICAgdmFyIHNlbGVjdGVkRGF5O1xuXG4gICAgdmFyIGN1cnJlbnRZZWFyO1xuICAgIHZhciBjdXJyZW50TW9udGg7XG4gICAgdmFyIGN1cnJlbnREYXk7XG5cbiAgICB2YXIgdG9kYXlzWWVhcjtcbiAgICB2YXIgdG9kYXlzTW9udGg7XG4gICAgdmFyIHRvZGF5c0RheTtcblxuICAgIHZhciBkYXlPZldlZWtKO1xuXG4gICAgdmFyIG51bWJlck9mRGF5cztcblxuICAgIHZhciB0b2RheUc7XG4gICAgdmFyIHRvZGF5c0o7XG5cbiAgICAvLyBjb25zdHNcbiAgICB2YXIgTU9OVEhfTkFNRVMgPSB7XG4gICAgICAgIFwiMVwiOiBcItmB2LHZiNix2K/bjNmGXCJcbiAgICAgICAgLCBcIjJcIjogXCLYp9ix2K/bjNio2YfYtNiqXCJcbiAgICAgICAgLCBcIjNcIjogXCLYrtix2K/Yp9ivXCJcbiAgICAgICAgLCBcIjRcIjogXCLYqtuM2LFcIlxuICAgICAgICAsIFwiNVwiOiBcItmF2LHYr9in2K9cIlxuICAgICAgICAsIFwiNlwiOiBcIti02YfYsduM2YjYsVwiXG4gICAgICAgICwgXCI3XCI6IFwi2YXZh9ixXCJcbiAgICAgICAgLCBcIjhcIjogXCLYotio2KfZhlwiXG4gICAgICAgICwgXCI5XCI6IFwi2KLYsNixXCJcbiAgICAgICAgLCBcIjEwXCI6IFwi2K/bjFwiXG4gICAgICAgICwgXCIxMVwiOiBcItio2YfZhdmGXCJcbiAgICAgICAgLCBcIjEyXCI6IFwi2KfYs9mB2YbYr1wiXG4gICAgfVxuICAgIHZhciBEQVlfTkFNRVMgPSB7XG4gICAgICAgIFwi2LTZhtio2YdcIjogXCLYtFwiXG4gICAgICAgICwgXCLbjNqp2LTZhtio2YdcIjogXCLbjFwiXG4gICAgICAgICwgXCLYr9mI2LTZhtio2YdcIjogXCLYr1wiXG4gICAgICAgICwgXCLYs9mHINi02YbYqNmHXCI6IFwi2LNcIlxuICAgICAgICAsIFwi2obZh9in2LHYtNmG2KjZh1wiOiBcItqGXCJcbiAgICAgICAgLCBcItm+2YbYrCDYtNmG2KjZh1wiOiBcItm+XCJcbiAgICAgICAgLCBcItis2YXYudmHXCI6IFwi2KxcIlxuICAgIH07XG4gICAgdmFyIEZBX05VTVMgPSBbJ9mgJywgJ9mhJywgJ9miJywgJ9mjJywgJ9u0JywgJ9u1JywgJ9u2JywgJ9mnJywgJ9moJywgJ9mpJywgJ9mh2aAnLCAn2aHZoScsICfZodmiJywgJ9mh2aMnLCAn2aHbtCcsICfZodu1JywgJ9mh27YnLCAn2aHZpycsICfZodmoJywgJ9mh2aknLCAn2aLZoCcsICfZotmhJywgJ9mi2aInLCAn2aLZoycsICfZotu0JywgJ9mi27UnLCAn2aLbticsICfZotmnJywgJ9mi2agnLCAn2aLZqScsICfZo9mgJywgJ9mj2aEnLCAn2aPZoiddO1xuXG4gICAgLy8gc2V0IG9wdGlvbnNcbiAgICBvcHRpb25zLnBsYWNlaG9sZGVyID0gb3B0aW9ucy5wbGFjZWhvbGRlciAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5wbGFjZWhvbGRlciA6IFwiXCI7XG4gICAgb3B0aW9ucy50d29kaWdpdCA9IG9wdGlvbnMudHdvZGlnaXQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudHdvZGlnaXQgOiB0cnVlO1xuICAgIG9wdGlvbnMuY2xvc2VBZnRlclNlbGVjdCA9IG9wdGlvbnMuY2xvc2VBZnRlclNlbGVjdCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jbG9zZUFmdGVyU2VsZWN0IDogdHJ1ZTtcbiAgICBvcHRpb25zLm5leHRCdXR0b25JY29uID0gb3B0aW9ucy5uZXh0QnV0dG9uSWNvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5uZXh0QnV0dG9uSWNvbiA6IGZhbHNlO1xuICAgIG9wdGlvbnMucHJldmlvdXNCdXR0b25JY29uID0gb3B0aW9ucy5wcmV2aW91c0J1dHRvbkljb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucHJldmlvdXNCdXR0b25JY29uIDogZmFsc2U7XG4gICAgb3B0aW9ucy5idXR0b25zQ29sb3IgPSBvcHRpb25zLmJ1dHRvbnNDb2xvciAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5idXR0b25zQ29sb3IgOiBmYWxzZTtcbiAgICBvcHRpb25zLmZvcmNlRmFyc2lEaWdpdHMgPSBvcHRpb25zLmZvcmNlRmFyc2lEaWdpdHMgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZm9yY2VGYXJzaURpZ2l0cyA6IGZhbHNlO1xuICAgIG9wdGlvbnMubWFya1RvZGF5ID0gb3B0aW9ucy5tYXJrVG9kYXkgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWFya1RvZGF5IDogZmFsc2U7XG4gICAgb3B0aW9ucy5tYXJrSG9saWRheXMgPSBvcHRpb25zLm1hcmtIb2xpZGF5cyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5tYXJrSG9saWRheXMgOiBmYWxzZTtcbiAgICBvcHRpb25zLmhpZ2hsaWdodFNlbGVjdGVkRGF5ID0gb3B0aW9ucy5oaWdobGlnaHRTZWxlY3RlZERheSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5oaWdobGlnaHRTZWxlY3RlZERheSA6IGZhbHNlO1xuICAgIG9wdGlvbnMuc3luYyA9IG9wdGlvbnMuc3luYyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5zeW5jIDogZmFsc2U7XG4gICAgb3B0aW9ucy5nb3RvVG9kYXkgPSBvcHRpb25zLmdvdG9Ub2RheSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5nb3RvVG9kYXkgOiBmYWxzZTtcblxuICAgIC8vIGNyZWF0ZSBET01cbiAgICB2YXIgaW5wdXRFbGVtZW50ID0gJChcIiNcIiArIGVsZW1lbnRJRCk7XG5cbiAgICBpZiAoaW5wdXRFbGVtZW50LmF0dHIoXCJwbGFjZWhvbGRlclwiKSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlucHV0RWxlbWVudC5hdHRyKFwicGxhY2Vob2xkZXJcIiwgb3B0aW9ucy5wbGFjZWhvbGRlcik7XG4gICAgfVxuXG4gICAgLy8gY3JlYXRlIHBhcmVudCBkaXZcbiAgICBpbnB1dEVsZW1lbnQud3JhcChcIjxkaXYgaWQ9J2JkLXJvb3QtXCIgKyBlbGVtZW50SUQgKyBcIicgc3R5bGU9J3Bvc2l0aW9uOiByZWxhdGl2ZTsnPjwvZGl2PlwiKTtcblxuICAgIC8vIGNyZWF0ZSBtYWluIGRpdiBmb3IgY2FsZW5kYXIsIGJlbG93IGlucHV0IGVsZW1lbnRcbiAgICBpbnB1dEVsZW1lbnQuYWZ0ZXIoXCI8ZGl2IGlkPSdiZC1tYWluLVwiICsgZWxlbWVudElEICsgXCInIGNsYXNzPSdiZC1tYWluIGJkLWhpZGUnIHN0eWxlPSdwb3NpdGlvbjogYWJzb2x1dGU7IGRpcmVjdGlvbjogcnRsOyc+PC9kaXY+XCIpO1xuICAgIHZhciBtYWluRGl2ID0gJChcIiNiZC1tYWluLVwiICsgZWxlbWVudElEKTtcblxuICAgIC8vIGNyZWF0ZSBjYWxlbmRhciBkaXYgaW5zaWRlIG1haW4gZGl2XG4gICAgbWFpbkRpdi5hcHBlbmQoXCI8ZGl2IGNsYXNzPSdiZC1jYWxlbmRhcic+PC9kaXY+XCIpO1xuICAgIHZhciBjYWxlbmRhckRpdiA9IG1haW5EaXYuZmluZCgnLmJkLWNhbGVuZGFyJyk7XG5cbiAgICAvLyBjcmVhdGUgdGl0bGUgZGl2IGFuZCB0YWJsZSBpbnNpZGUgY2FsZW5kYXIgZGl2XG4gICAgY2FsZW5kYXJEaXYuYXBwZW5kKFwiPGRpdiBjbGFzcz0nYmQtdGl0bGUnPjwvZGl2PlwiKTtcbiAgICB2YXIgdGl0bGVEaXYgPSBjYWxlbmRhckRpdi5maW5kKCcuYmQtdGl0bGUnKTtcbiAgICBjYWxlbmRhckRpdi5hcHBlbmQoXCI8dGFibGUgY2xhc3M9J2JkLXRhYmxlJyBkaXI9J3J0bCcgY2VsbHNwYWNpbmc9JzAnIGNlbGxwYWRkaW5nPScwJz48L3RhYmxlPlwiKTtcblxuICAgIC8vIGNyZWF0ZSBtb250aCBhbmQgeWVhciBkcm9wIGRvd25zIGFuZCBuZXh0L3ByZXYgbW9udGggYnV0dG9ucyBpbnNpZGUgdGl0bGUgZGl2XG4gICAgdGl0bGVEaXYuYXBwZW5kKFwiPGJ1dHRvbiBpZD0nYmQtbmV4dC1cIiArIGVsZW1lbnRJRCArIFwiJyBjbGFzcz0nYmQtbmV4dCcgdHlwZT0nYnV0dG9uJyB0aXRsZT0n2YXYp9mHINio2LnYr9uMJyBkYXRhLXRvZ2dsZT0ndG9vbHRpcCc+PHNwYW4+2KjYudiv24w8L3NwYW4+PC9idXR0b24+XCIpO1xuICAgIHZhciBuZXh0TW9udGggPSAkKFwiI2JkLW5leHQtXCIgKyBlbGVtZW50SUQpO1xuICAgIGlmIChvcHRpb25zLm5leHRCdXR0b25JY29uKSB7XG4gICAgICAgIG5leHRNb250aC5maW5kKFwic3BhblwiKS5jc3MoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcbiAgICAgICAgaWYgKG9wdGlvbnMubmV4dEJ1dHRvbkljb24uaW5kZXhPZihcIi5cIikgIT09IC0xKSB7XG4gICAgICAgICAgICAvLyBpbWFnZVxuICAgICAgICAgICAgbmV4dE1vbnRoLmNzcyhcImJhY2tncm91bmQtaW1hZ2VcIiwgXCJ1cmwoXCIgKyBvcHRpb25zLm5leHRCdXR0b25JY29uICsgXCIpXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gY3NzIGNsYXNzXG4gICAgICAgICAgICBuZXh0TW9udGguYWRkQ2xhc3Mob3B0aW9ucy5uZXh0QnV0dG9uSWNvbik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0aXRsZURpdi5hcHBlbmQoXCI8ZGl2IGNsYXNzPSdiZC1kcm9wZG93bic+PC9kaXY+PGRpdiBjbGFzcz0nYmQtZHJvcGRvd24nPjwvZGl2PlwiKTtcblxuICAgIHRpdGxlRGl2LmZpbmQoJy5iZC1kcm9wZG93bjpudGgtY2hpbGQoMiknKS5hcHBlbmQoXCI8c2VsZWN0IGlkPSdiZC1tb250aC1cIiArIGVsZW1lbnRJRCArIFwiJyBjbGFzcz0nYmQtbW9udGgnPjwvc2VsZWN0PlwiKTtcbiAgICB2YXIgbW9udGhEcm9wZG93biA9ICQoXCIjYmQtbW9udGgtXCIgKyBlbGVtZW50SUQpO1xuICAgICQuZWFjaChNT05USF9OQU1FUywgZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgbW9udGhEcm9wZG93bi5hcHBlbmQoJChcIjxvcHRpb24+PC9vcHRpb24+XCIpLmF0dHIoXCJ2YWx1ZVwiLCBrZXkpLnRleHQodmFsdWUpKTtcbiAgICB9KTtcblxuICAgIHRpdGxlRGl2LmZpbmQoJy5iZC1kcm9wZG93bjpudGgtY2hpbGQoMyknKS5hcHBlbmQoXCI8c2VsZWN0IGlkPSdiZC15ZWFyLVwiICsgZWxlbWVudElEICsgXCInIGNsYXNzPSdiZC15ZWFyJz48L3NlbGVjdD5cIik7XG4gICAgdmFyIHllYXJEcm9wZG93biA9ICQoXCIjYmQteWVhci1cIiArIGVsZW1lbnRJRCk7XG5cbiAgICB0aXRsZURpdi5hcHBlbmQoXCI8YnV0dG9uIGlkPSdiZC1wcmV2LVwiICsgZWxlbWVudElEICsgXCInIGNsYXNzPSdiZC1wcmV2JyB0eXBlPSdidXR0b24nIHRpdGxlPSfZhdin2Ycg2YLYqNmE24wnIGRhdGEtdG9nZ2xlPSd0b29sdGlwJz48c3Bhbj7Zgtio2YTbjDwvc3Bhbj48L2J1dHRvbj5cIik7XG4gICAgdmFyIHByZXZNb250aCA9ICQoXCIjYmQtcHJldi1cIiArIGVsZW1lbnRJRCk7XG4gICAgaWYgKG9wdGlvbnMubmV4dEJ1dHRvbkljb24pIHtcbiAgICAgICAgcHJldk1vbnRoLmZpbmQoXCJzcGFuXCIpLmNzcyhcImRpc3BsYXlcIiwgXCJub25lXCIpO1xuICAgICAgICBpZiAob3B0aW9ucy5wcmV2aW91c0J1dHRvbkljb24uaW5kZXhPZihcIi5cIikgIT09IC0xKSB7XG4gICAgICAgICAgICAvLyBpbWFnZVxuICAgICAgICAgICAgcHJldk1vbnRoLmNzcyhcImJhY2tncm91bmQtaW1hZ2VcIiwgXCJ1cmwoXCIgKyBvcHRpb25zLnByZXZpb3VzQnV0dG9uSWNvbiArIFwiKVwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGNzcyBjbGFzc1xuICAgICAgICAgICAgcHJldk1vbnRoLmFkZENsYXNzKG9wdGlvbnMucHJldmlvdXNCdXR0b25JY29uKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChvcHRpb25zLmJ1dHRvbnNDb2xvcikge1xuICAgICAgICBuZXh0TW9udGguY3NzKFwiY29sb3JcIiwgb3B0aW9ucy5idXR0b25zQ29sb3IpO1xuICAgICAgICBuZXh0TW9udGguZmluZChcInNwYW5cIikuY3NzKFwiY29sb3JcIiwgb3B0aW9ucy5idXR0b25zQ29sb3IpO1xuICAgICAgICBwcmV2TW9udGguY3NzKFwiY29sb3JcIiwgb3B0aW9ucy5idXR0b25zQ29sb3IpO1xuICAgICAgICBwcmV2TW9udGguZmluZChcInNwYW5cIikuY3NzKFwiY29sb3JcIiwgb3B0aW9ucy5idXR0b25zQ29sb3IpO1xuICAgIH1cblxuICAgIC8vIGNyZWF0ZSB0YWJsZSBoZWFkZXIgYW5kIGJvZHlcbiAgICBjYWxlbmRhckRpdi5maW5kKCcuYmQtdGFibGUnKS5hcHBlbmQoXCI8dGhlYWQ+PHRyPjwvdHI+PC90aGVhZD5cIik7XG4gICAgJC5lYWNoKERBWV9OQU1FUywgZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgY2FsZW5kYXJEaXYuZmluZCgnLmJkLXRhYmxlIHRoZWFkIHRyJykuYXBwZW5kKCQoXCI8dGg+PC90aD5cIikudGV4dCh2YWx1ZSkpO1xuICAgIH0pO1xuXG4gICAgY2FsZW5kYXJEaXYuZmluZCgnLmJkLXRhYmxlJykuYXBwZW5kKFwiPHRib2R5IGlkPSdiZC10YWJsZS1kYXlzLVwiICsgZWxlbWVudElEICsgXCInIGNsYXNzPSdiZC10YWJsZS1kYXlzJz48L3Rib2R5PlwiKTtcbiAgICB2YXIgZGF5c1RhYmxlID0gJChcIiNiZC10YWJsZS1kYXlzLVwiICsgZWxlbWVudElEKTtcblxuICAgIC8vIGNyZWF0ZSBnbyB0byB0b2RheXMgYnV0dG9uXG4gICAgaWYgKG9wdGlvbnMuZ290b1RvZGF5KSB7XG4gICAgICAgIGNhbGVuZGFyRGl2LmFwcGVuZChcIjxkaXYgY2xhc3M9J2JkLWdvdG8tdG9kYXknPtio2LHZiCDYqNmHINin2YXYsdmI2LI8L2Rpdj5cIik7XG4gICAgICAgIHZhciBnb3RvVG9kYXkgPSBjYWxlbmRhckRpdi5maW5kKFwiLmJkLWdvdG8tdG9kYXlcIik7XG4gICAgfVxuXG4gICAgLy8gb3BlbmluZyBhbmQgY2xvc2luZyBmdW5jdGlvbmFsaXR5XG4gICAgaW5wdXRFbGVtZW50Lm9uKFwiZm9jdXNcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBtYWluRGl2LnJlbW92ZUNsYXNzKFwiYmQtaGlkZVwiKTtcbiAgICAgICAgaWYgKG9wdGlvbnMuc3luYyAmJiBpc1N5bmNlZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHN5bmNDYWxlbmRhcigpO1xuICAgICAgICAgICAgaXNTeW5jZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIG1haW5EaXY7XG4gICAgfSkub24oJ2JsdXInLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChpc0NhbENsaWNrZWQgPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIG1haW5EaXYuYWRkQ2xhc3MoXCJiZC1oaWRlXCIpO1xuICAgICAgICAgICAgaXNTeW5jZWQgPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlzQ2FsQ2xpY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgaW5wdXRFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBtYWluRGl2Lm9uKCdtb3VzZWRvd24nLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgaXNDYWxDbGlja2VkID0gdHJ1ZTtcbiAgICB9KTtcblxuICAgIC8vIGRyb3Bkb3duIGV2ZW50c1xuICAgIG1vbnRoRHJvcGRvd24ub24oJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZWN0ZWRNb250aCA9IHBhcnNlSW50KHRoaXMudmFsdWUpO1xuICAgICAgICBudW1iZXJPZkRheXMgPSBtb250aERheXMoc2VsZWN0ZWRZZWFyLCBzZWxlY3RlZE1vbnRoKTtcbiAgICAgICAgZGF5T2ZXZWVrSiA9IGZpbmRGaXJzdERheU9mTW9udGgoc2VsZWN0ZWRZZWFyLCBzZWxlY3RlZE1vbnRoKTtcbiAgICAgICAgZHJhd0RheXMobnVtYmVyT2ZEYXlzLCBkYXlPZldlZWtKKTtcbiAgICB9KTtcbiAgICB5ZWFyRHJvcGRvd24ub24oJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZWN0ZWRZZWFyID0gcGFyc2VJbnQodGhpcy52YWx1ZSk7XG4gICAgICAgIG51bWJlck9mRGF5cyA9IG1vbnRoRGF5cyhzZWxlY3RlZFllYXIsIHNlbGVjdGVkTW9udGgpO1xuICAgICAgICBkYXlPZldlZWtKID0gZmluZEZpcnN0RGF5T2ZNb250aChzZWxlY3RlZFllYXIsIHNlbGVjdGVkTW9udGgpO1xuICAgICAgICBkcmF3RGF5cyhudW1iZXJPZkRheXMsIGRheU9mV2Vla0opO1xuICAgIH0pO1xuXG4gICAgLy8gR2VvcmdpYW4gdG8gSmFsYWxpIGNvbnZlcnRlciAobWluaWZpZWQpXG4gICAgLy8gc291cmNlIGlzIHVua25vd24uIGNvbnRhY3QgaWYgeW91IGtub3cgdGhlIGNvZGUgb3duZXIuXG4gICAgZnVuY3Rpb24gZ3JlZ29yaWFuVG9KYWxhbGkoYSwgciwgcykgeyBhID0gcGFyc2VJbnQoYSksIHIgPSBwYXJzZUludChyKSwgcyA9IHBhcnNlSW50KHMpOyBmb3IgKHZhciBuID0gYSAtIDE2MDAsIGUgPSByIC0gMSwgdCA9IHMgLSAxLCBwID0gMzY1ICogbiArIHBhcnNlSW50KChuICsgMykgLyA0KSAtIHBhcnNlSW50KChuICsgOTkpIC8gMTAwKSArIHBhcnNlSW50KChuICsgMzk5KSAvIDQwMCksIEkgPSAwOyBlID4gSTsgKytJKSBwICs9IGdfZGF5c1tJXTsgZSA+IDEgJiYgKG4gJSA0ID09IDAgJiYgbiAlIDEwMCAhPSAwIHx8IG4gJSA0MDAgPT0gMCkgJiYgKytwLCBwICs9IHQ7IHZhciB2ID0gcCAtIDc5LCBkID0gcGFyc2VJbnQodiAvIDEyMDUzKTsgdiAlPSAxMjA1MzsgdmFyIG8gPSA5NzkgKyAzMyAqIGQgKyA0ICogcGFyc2VJbnQodiAvIDE0NjEpOyB2ICU9IDE0NjEsIHYgPj0gMzY2ICYmIChvICs9IHBhcnNlSW50KCh2IC0gMSkgLyAzNjUpLCB2ID0gKHYgLSAxKSAlIDM2NSk7IGZvciAodmFyIEkgPSAwOyAxMSA+IEkgJiYgdiA+PSBqX2RheXNbSV07ICsrSSkgdiAtPSBqX2RheXNbSV07IHZhciB5ID0gSSArIDEsIF8gPSB2ICsgMTsgcmV0dXJuIFtvLCB5LCBfXSB9IHZhciBnX2RheXMgPSBbMzEsIDI4LCAzMSwgMzAsIDMxLCAzMCwgMzEsIDMxLCAzMCwgMzEsIDMwLCAzMV0sIGpfZGF5cyA9IFszMSwgMzEsIDMxLCAzMSwgMzEsIDMxLCAzMCwgMzAsIDMwLCAzMCwgMzAsIDI5XTtcbiAgICAvLyBKYWxhbGkgdG8gR2VvcmdpYW4gY29udmVydGVyIChtaW5pZmllZClcbiAgICAvLyBzb3VyY2UgaXMgdW5rbm93bi4gY29udGFjdCBpZiB5b3Uga25vdyB0aGUgY29kZSBvd25lci5cbiAgICBmdW5jdGlvbiB0b0phbGFhbGkoZCwgaSwgYSkgeyByZXR1cm4gZDJqKGcyZChkLCBpLCBhKSkgfSBmdW5jdGlvbiB0b0dyZWdvcmlhbihkLCBpLCBhKSB7IHJldHVybiBkMmcoajJkKGQsIGksIGEpKSB9IGZ1bmN0aW9uIGlzVmFsaWRKYWxhYWxpRGF0ZShkLCBpLCBhKSB7IHJldHVybiBkID49IC02MSAmJiAzMTc3ID49IGQgJiYgaSA+PSAxICYmIDEyID49IGkgJiYgYSA+PSAxICYmIGEgPD0gamFsYWFsaU1vbnRoTGVuZ3RoKGQsIGkpIH0gZnVuY3Rpb24gaXNMZWFwSmFsYWFsaVllYXIoZCkgeyByZXR1cm4gMCA9PT0gamFsQ2FsKGQpLmxlYXAgfSBmdW5jdGlvbiBqYWxhYWxpTW9udGhMZW5ndGgoZCwgaSkgeyByZXR1cm4gNiA+PSBpID8gMzEgOiAxMSA+PSBpID8gMzAgOiBpc0xlYXBKYWxhYWxpWWVhcihkKSA/IDMwIDogMjkgfSBmdW5jdGlvbiBqYWxDYWwoZCkgeyB2YXIgaSwgYSwgbiwgciwgdCwgbywgdiwgZSA9IFstNjEsIDksIDM4LCAxOTksIDQyNiwgNjg2LCA3NTYsIDgxOCwgMTExMSwgMTE4MSwgMTIxMCwgMTYzNSwgMjA2MCwgMjA5NywgMjE5MiwgMjI2MiwgMjMyNCwgMjM5NCwgMjQ1NiwgMzE3OF0sIGwgPSBlLmxlbmd0aCwgdSA9IGQgKyA2MjEsIG0gPSAtMTQsIGcgPSBlWzBdOyBpZiAoZyA+IGQgfHwgZCA+PSBlW2wgLSAxXSkgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBKYWxhYWxpIHllYXIgXCIgKyBkKTsgZm9yICh2ID0gMTsgbCA+IHYgJiYgKGkgPSBlW3ZdLCBhID0gaSAtIGcsICEoaSA+IGQpKTsgdiArPSAxKSBtID0gbSArIDggKiBkaXYoYSwgMzMpICsgZGl2KG1vZChhLCAzMyksIDQpLCBnID0gaTsgcmV0dXJuIG8gPSBkIC0gZywgbSA9IG0gKyA4ICogZGl2KG8sIDMzKSArIGRpdihtb2QobywgMzMpICsgMywgNCksIDQgPT09IG1vZChhLCAzMykgJiYgYSAtIG8gPT09IDQgJiYgKG0gKz0gMSksIHIgPSBkaXYodSwgNCkgLSBkaXYoMyAqIChkaXYodSwgMTAwKSArIDEpLCA0KSAtIDE1MCwgdCA9IDIwICsgbSAtIHIsIDYgPiBhIC0gbyAmJiAobyA9IG8gLSBhICsgMzMgKiBkaXYoYSArIDQsIDMzKSksIG4gPSBtb2QobW9kKG8gKyAxLCAzMykgLSAxLCA0KSwgLTEgPT09IG4gJiYgKG4gPSA0KSwgeyBsZWFwOiBuLCBneTogdSwgbWFyY2g6IHQgfSB9IGZ1bmN0aW9uIGoyZChkLCBpLCBhKSB7IHZhciBuID0gamFsQ2FsKGQpOyByZXR1cm4gZzJkKG4uZ3ksIDMsIG4ubWFyY2gpICsgMzEgKiAoaSAtIDEpIC0gZGl2KGksIDcpICogKGkgLSA3KSArIGEgLSAxIH0gZnVuY3Rpb24gZDJqKGQpIHsgdmFyIGksIGEsIG4sIHIgPSBkMmcoZCkuZ3ksIHQgPSByIC0gNjIxLCBvID0gamFsQ2FsKHQpLCB2ID0gZzJkKHIsIDMsIG8ubWFyY2gpOyBpZiAobiA9IGQgLSB2LCBuID49IDApIHsgaWYgKDE4NSA+PSBuKSByZXR1cm4gYSA9IDEgKyBkaXYobiwgMzEpLCBpID0gbW9kKG4sIDMxKSArIDEsIHsgank6IHQsIGptOiBhLCBqZDogaSB9OyBuIC09IDE4NiB9IGVsc2UgdCAtPSAxLCBuICs9IDE3OSwgMSA9PT0gby5sZWFwICYmIChuICs9IDEpOyByZXR1cm4gYSA9IDcgKyBkaXYobiwgMzApLCBpID0gbW9kKG4sIDMwKSArIDEsIHsgank6IHQsIGptOiBhLCBqZDogaSB9IH0gZnVuY3Rpb24gZzJkKGQsIGksIGEpIHsgdmFyIG4gPSBkaXYoMTQ2MSAqIChkICsgZGl2KGkgLSA4LCA2KSArIDEwMDEwMCksIDQpICsgZGl2KDE1MyAqIG1vZChpICsgOSwgMTIpICsgMiwgNSkgKyBhIC0gMzQ4NDA0MDg7IHJldHVybiBuID0gbiAtIGRpdigzICogZGl2KGQgKyAxMDAxMDAgKyBkaXYoaSAtIDgsIDYpLCAxMDApLCA0KSArIDc1MiB9IGZ1bmN0aW9uIGQyZyhkKSB7IHZhciBpLCBhLCBuLCByLCB0OyByZXR1cm4gaSA9IDQgKiBkICsgMTM5MzYxNjMxLCBpID0gaSArIDQgKiBkaXYoMyAqIGRpdig0ICogZCArIDE4MzE4NzcyMCwgMTQ2MDk3KSwgNCkgLSAzOTA4LCBhID0gNSAqIGRpdihtb2QoaSwgMTQ2MSksIDQpICsgMzA4LCBuID0gZGl2KG1vZChhLCAxNTMpLCA1KSArIDEsIHIgPSBtb2QoZGl2KGEsIDE1MyksIDEyKSArIDEsIHQgPSBkaXYoaSwgMTQ2MSkgLSAxMDAxMDAgKyBkaXYoOCAtIHIsIDYpLCB7IGd5OiB0LCBnbTogciwgZ2Q6IG4gfSB9IGZ1bmN0aW9uIGRpdihkLCBpKSB7IHJldHVybiB+fihkIC8gaSkgfSBmdW5jdGlvbiBtb2QoZCwgaSkgeyByZXR1cm4gZCAtIH5+KGQgLyBpKSAqIGkgfVxuXG4gICAgdmFyIHN5bmNDYWxlbmRhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGlucHV0VmFsdWUgPSBmaXhEYXRlKGlucHV0RWxlbWVudC52YWwoKSk7XG4gICAgICAgIGlmIChpbnB1dFZhbHVlID09PSBcIlwiKVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIGlucHV0VmFsdWUgPSBpbnB1dFZhbHVlLnNwbGl0KFwiL1wiKTtcbiAgICAgICAgbW9udGhEcm9wZG93bi52YWwocGFyc2VJbnQoaW5wdXRWYWx1ZVsxXSkpO1xuICAgICAgICBtb250aERyb3Bkb3duLnRyaWdnZXIoXCJjaGFuZ2VcIik7XG4gICAgICAgIHllYXJEcm9wZG93bi52YWwocGFyc2VJbnQoaW5wdXRWYWx1ZVswXSkpO1xuICAgICAgICB5ZWFyRHJvcGRvd24udHJpZ2dlcihcImNoYW5nZVwiKTtcblxuICAgICAgICBpZiAob3B0aW9ucy5oaWdobGlnaHRTZWxlY3RlZERheSkge1xuICAgICAgICAgICAgbWFpbkRpdi5maW5kKFwiLmJkLXNlbGVjdGVkLWRheVwiKS5yZW1vdmVDbGFzcyhcImJkLXNlbGVjdGVkLWRheVwiKTtcbiAgICAgICAgICAgIG1haW5EaXYuZmluZChcIi5kYXktXCIgKyBwYXJzZUludChpbnB1dFZhbHVlWzJdKSkuYWRkQ2xhc3MoXCJiZC1zZWxlY3RlZC1kYXlcIik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgZml4RGF0ZSA9IGZ1bmN0aW9uIChkYXRlKSB7XG4gICAgICAgIGlmIChkYXRlID09PSBcIlwiKVxuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG5cbiAgICAgICAgZGF0ZSA9IGRhdGUuc3BsaXQoXCIvXCIpO1xuICAgICAgICAvLyBpZiAoZGF0ZVswXS5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgLy8gICAgIGRhdGVbMF0gPSBcIjEzXCIgKyBkYXRlWzBdO1xuICAgICAgICAvLyB9XG4gICAgICAgIGlmIChkYXRlWzFdLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgICAgIGlmIChkYXRlWzFdIDwgMTApIHtcbiAgICAgICAgICAgICAgICBkYXRlWzFdID0gXCIwXCIgKyBkYXRlWzFdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkYXRlWzJdLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgICAgIGlmIChkYXRlWzJdIDwgMTApIHtcbiAgICAgICAgICAgICAgICBkYXRlWzJdID0gXCIwXCIgKyBkYXRlWzJdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGRhdGUgPSBkYXRlLmpvaW4oXCIvXCIpO1xuICAgICAgICByZXR1cm4gZGF0ZTtcbiAgICB9XG5cbiAgICB2YXIgY29udmVydFRvSldlZWsgPSBmdW5jdGlvbiAoZGF5T2ZXZWVrRykge1xuICAgICAgICB2YXIgZGF5T2ZXZWVrSjtcbiAgICAgICAgaWYgKGRheU9mV2Vla0cgPCA2KSB7XG4gICAgICAgICAgICBkYXlPZldlZWtKID0gZGF5T2ZXZWVrRyArIDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkYXlPZldlZWtKID0gMDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGF5T2ZXZWVrSjtcbiAgICB9XG5cbiAgICB2YXIgbWFrZVllYXJMaXN0ID0gZnVuY3Rpb24gKHRoaXNZZWFyKSB7XG4gICAgICAgIHllYXJEcm9wZG93bi5maW5kKCdvcHRpb24nKS5yZW1vdmUoKTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IDEwMTsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgdGVtcFllYXIgPSAoKHRoaXNZZWFyIC0gOTUpICsgaSkgKyAnJztcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmZvcmNlRmFyc2lEaWdpdHMpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IDEwOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJneCA9IG5ldyBSZWdFeHAoaiwgJ2cnKTtcbiAgICAgICAgICAgICAgICAgICAgdGVtcFllYXIgPSB0ZW1wWWVhci5yZXBsYWNlKHJneCwgRkFfTlVNU1tqXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeWVhckRyb3Bkb3duLmFwcGVuZCgkKCc8b3B0aW9uPicsIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogKHRoaXNZZWFyIC0gOTUpICsgaSxcbiAgICAgICAgICAgICAgICB0ZXh0OiB0ZW1wWWVhclxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gaXNsZWFwIGNhbGN1bGF0b3IsIHN1cHBvcnRlZCB5ZWFyOiAxMjQzIC0gMTQ3M1xuICAgIHZhciBpc0xlYXBZZWFyID0gZnVuY3Rpb24gKHllYXIpIHtcbiAgICAgICAgdmFyIG1vZDtcbiAgICAgICAgaWYgKHllYXIgPCAxMzQzICYmIHllYXIgPiAxMjQzKSB7XG4gICAgICAgICAgICBtb2QgPSB5ZWFyICUgMzM7XG4gICAgICAgICAgICBpZiAobW9kID09IDEgfHwgbW9kID09IDUgfHwgbW9kID09IDkgfHwgbW9kID09IDEzIHx8IG1vZCA9PSAxNyB8fCBtb2QgPT0gMjIgfHwgbW9kID09IDI2IHx8IG1vZCA9PSAzMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoeWVhciA8IDE0NzMgJiYgeWVhciA+IDEzNDIpIHtcbiAgICAgICAgICAgIG1vZCA9IHllYXIgJSAxNztcbiAgICAgICAgICAgIGlmIChtb2QgPT0gMSB8fCBtb2QgPT0gNSB8fCBtb2QgPT0gOSB8fCBtb2QgPT0gMTMgfHwgbW9kID09IDE4IHx8IG1vZCA9PSAyMiB8fCBtb2QgPT0gMjYgfHwgbW9kID09IDMwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFwidW5rbm93blwiO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIG1vbnRoRGF5cyA9IGZ1bmN0aW9uICh5ZWFyLCBtb250aCkge1xuICAgICAgICBpZiAobW9udGggPCA3KSB7XG4gICAgICAgICAgICByZXR1cm4gMzE7XG4gICAgICAgIH0gZWxzZSBpZiAobW9udGggPCAxMikge1xuICAgICAgICAgICAgcmV0dXJuIDMwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGlzTGVhcFllYXIoeWVhcikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMzA7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiAyOTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIG1ha2UgZmlyc3QgcGFnZSBvZiBjYWxlbmRhclxuICAgIHRvZGF5RyA9IG5ldyBEYXRlKCk7XG5cbiAgICB0b2RheXNKID0gZ3JlZ29yaWFuVG9KYWxhbGkodG9kYXlHLmdldEZ1bGxZZWFyKCksIHRvZGF5Ry5nZXRNb250aCgpICsgMSwgdG9kYXlHLmdldERhdGUoKSk7XG4gICAgdmFyIHNlbGVjdGVkRGF0ZUogPSBbXTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgMzsgaSsrKSB7XG4gICAgICAgIHNlbGVjdGVkRGF0ZUpbaV0gPSB0b2RheXNKW2ldO1xuICAgIH1cblxuICAgIHRvZGF5c1llYXIgPSB0b2RheXNKWzBdO1xuICAgIHRvZGF5c01vbnRoID0gdG9kYXlzSlsxXTtcbiAgICB0b2RheXNEYXkgPSB0b2RheXNKWzJdO1xuXG4gICAgc2VsZWN0ZWRZZWFyID0gc2VsZWN0ZWREYXRlSlswXTtcbiAgICBzZWxlY3RlZE1vbnRoID0gc2VsZWN0ZWREYXRlSlsxXTtcbiAgICBzZWxlY3RlZERheSA9IHNlbGVjdGVkRGF0ZUpbMl07XG5cbiAgICBtb250aERyb3Bkb3duLnZhbChzZWxlY3RlZE1vbnRoKTtcbiAgICBtYWtlWWVhckxpc3Qoc2VsZWN0ZWRZZWFyKTtcbiAgICB5ZWFyRHJvcGRvd24udmFsKHNlbGVjdGVkWWVhcik7XG5cbiAgICBudW1iZXJPZkRheXMgPSBtb250aERheXMoc2VsZWN0ZWRZZWFyLCBzZWxlY3RlZE1vbnRoKTtcblxuICAgIC8vIGZpbmQgZmlyc3QgZGF5IG9mIG1vbnRoIGluIHdlZWtcbiAgICB2YXIgZmluZEZpcnN0RGF5T2ZNb250aCA9IGZ1bmN0aW9uIChzZWxlY3RlZFllYXIsIHNlbGVjdGVkTW9udGgpIHtcbiAgICAgICAgdmFyIGZpcnN0RGF5T2ZNb250aEcgPSB0b0dyZWdvcmlhbihzZWxlY3RlZFllYXIsIHNlbGVjdGVkTW9udGgsIDEpO1xuICAgICAgICBmaXJzdERheU9mTW9udGhHID0gbmV3IERhdGUoZmlyc3REYXlPZk1vbnRoRy5neSArIFwiL1wiICsgZmlyc3REYXlPZk1vbnRoRy5nbSArIFwiL1wiICsgZmlyc3REYXlPZk1vbnRoRy5nZCk7XG4gICAgICAgIHJldHVybiBjb252ZXJ0VG9KV2VlayhmaXJzdERheU9mTW9udGhHLmdldERheSgpKTtcbiAgICB9XG4gICAgZGF5T2ZXZWVrSiA9IGZpbmRGaXJzdERheU9mTW9udGgoc2VsZWN0ZWRZZWFyLCBzZWxlY3RlZE1vbnRoKTtcblxuICAgIC8vIGRyYXcgZGF5cyBvbiBjYWxlbmRhclxuICAgIHZhciBkcmF3RGF5cyA9IGZ1bmN0aW9uIChudW1iZXJPZkRheXMsIGRheU9mV2Vla0opIHtcbiAgICAgICAgZGF5c1RhYmxlLmVtcHR5KCk7XG4gICAgICAgIHZhciBkYXlJbmRleCA9IDE7XG4gICAgICAgIHZhciByb3dJbmRleCA9IDE7XG4gICAgICAgIHdoaWxlIChkYXlJbmRleCA8PSBudW1iZXJPZkRheXMpIHtcbiAgICAgICAgICAgIGRheXNUYWJsZS5hcHBlbmQoJCgnPHRyPicsIHtcbiAgICAgICAgICAgICAgICBjbGFzczogXCJ0ci1cIiArIHJvd0luZGV4XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgNzsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRheUluZGV4ID09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGogPSAwO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoaiA8IGRheU9mV2Vla0opIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjYmQtdGFibGUtZGF5cy1cIiArIGVsZW1lbnRJRCArIFwiIC50ci0xXCIpLmFwcGVuZCgkKCc8dGQ+Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzOiBcImJkLWVtcHR5LWNlbGxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBqKys7XG4gICAgICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGkgPCA3ICYmIGRheUluZGV4IDw9IG51bWJlck9mRGF5cykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcFREID0gJzx0ZD4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICc8YnV0dG9uIGNsYXNzPVwiZGF5IGRheS0nICsgZGF5SW5kZXggKyAnXCIgdHlwZT1cImJ1dHRvblwiPicgKyAob3B0aW9ucy5mb3JjZUZhcnNpRGlnaXRzID8gRkFfTlVNU1tkYXlJbmRleF0gOiBkYXlJbmRleCkgKyAnPC9idXR0b24+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnPC90ZD4nO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIG1hcmsgdG9kYXlzIGRheSBieSBhZGRpbmcgLmJkLXRvZGF5IGNsYXNzXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm1hcmtUb2RheSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRheUluZGV4ID09IHRvZGF5c0RheSAmJiB0b2RheXNNb250aCA9PSBzZWxlY3RlZE1vbnRoICYmIHRvZGF5c1llYXIgPT0gc2VsZWN0ZWRZZWFyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkeCA9IHRlbXBURC5pbmRleE9mKCdkYXkgZGF5LScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBURCA9IHRlbXBURC5zbGljZSgwLCBpZHgpICsgJyBiZC10b2RheSAnICsgdGVtcFRELnNsaWNlKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBtYXJrIGhvbGlkYXlzIGJ5IGFkZGluZyAuYmQtaG9saWRheSBjbGFzc1xuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5tYXJrSG9saWRheXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID09IDYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4ID0gdGVtcFRELmluZGV4T2YoJ2RheSBkYXktJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFREID0gdGVtcFRELnNsaWNlKDAsIGlkeCkgKyAnIGJkLWhvbGlkYXkgJyArIHRlbXBURC5zbGljZShpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgJChcIiNiZC10YWJsZS1kYXlzLVwiICsgZWxlbWVudElEICsgXCIgLnRyLVwiICsgcm93SW5kZXgpLmFwcGVuZCh0ZW1wVEQpO1xuXG4gICAgICAgICAgICAgICAgICAgIGRheUluZGV4Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcm93SW5kZXgrKztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zLmhpZ2hsaWdodFNlbGVjdGVkRGF5KSB7XG4gICAgICAgICAgICB2YXIgaW5wdXRWYWx1ZSA9IGlucHV0RWxlbWVudC52YWwoKTtcbiAgICAgICAgICAgIGlucHV0VmFsdWUgPSBpbnB1dFZhbHVlLnNwbGl0KFwiL1wiKTtcbiAgICAgICAgICAgIGlmIChpbnB1dFZhbHVlWzBdID09IHNlbGVjdGVkWWVhciAmJiBpbnB1dFZhbHVlWzFdID09IHNlbGVjdGVkTW9udGgpIHtcbiAgICAgICAgICAgICAgICBtYWluRGl2LmZpbmQoXCIuYmQtc2VsZWN0ZWQtZGF5XCIpLnJlbW92ZUNsYXNzKFwiYmQtc2VsZWN0ZWQtZGF5XCIpO1xuICAgICAgICAgICAgICAgIG1haW5EaXYuZmluZChcIi5kYXktXCIgKyBwYXJzZUludChpbnB1dFZhbHVlWzJdKSkuYWRkQ2xhc3MoXCJiZC1zZWxlY3RlZC1kYXlcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIGlucHV0RWxlbWVudC5wYXJlbnQoKS5vbihcImNsaWNrXCIsIFwiYnV0dG9uLmRheVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBkYXRlc3RyID0gc2VsZWN0ZWRZZWFyICsgXCIvXCIgKyBzZWxlY3RlZE1vbnRoICsgXCIvXCIgKyAkKHRoaXMpLmF0dHIoJ2NsYXNzJykuc3BsaXQoXCIgXCIpWyQodGhpcykuYXR0cignY2xhc3MnKS5zcGxpdChcIiBcIikuaW5kZXhPZignZGF5JykgKyAxXS5zcGxpdChcIi1cIilbMV07XG4gICAgICAgIGlmIChvcHRpb25zLnR3b2RpZ2l0KSB7XG4gICAgICAgICAgICBkYXRlc3RyID0gZml4RGF0ZShkYXRlc3RyKTtcbiAgICAgICAgfVxuICAgICAgICBpbnB1dEVsZW1lbnQudmFsKGRhdGVzdHIpO1xuICAgICAgICBpbnB1dEVsZW1lbnQudHJpZ2dlcihcImNoYW5nZVwiKTtcbiAgICAgICAgaWYgKG9wdGlvbnMuY2xvc2VBZnRlclNlbGVjdCkge1xuICAgICAgICAgICAgaXNDYWxDbGlja2VkID0gZmFsc2U7XG4gICAgICAgICAgICBpbnB1dEVsZW1lbnQudHJpZ2dlcihcImJsdXJcIik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3B0aW9ucy5oaWdobGlnaHRTZWxlY3RlZERheSkge1xuICAgICAgICAgICAgbWFpbkRpdi5maW5kKFwiLmJkLXNlbGVjdGVkLWRheVwiKS5yZW1vdmVDbGFzcyhcImJkLXNlbGVjdGVkLWRheVwiKTtcbiAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoXCJiZC1zZWxlY3RlZC1kYXlcIik7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIG5leHRNb250aC5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcIm1vbnRoOiBcIiArIHNlbGVjdGVkTW9udGggKyBcIiwgeWVhcjogXCIgKyBzZWxlY3RlZFllYXIpO1xuICAgICAgICBpZiAobW9udGhEcm9wZG93bi52YWwoKSA8IDEyKSB7XG4gICAgICAgICAgICBtb250aERyb3Bkb3duLnZhbChwYXJzZUludChtb250aERyb3Bkb3duLnZhbCgpKSArIDEpO1xuICAgICAgICAgICAgbW9udGhEcm9wZG93bi50cmlnZ2VyKFwiY2hhbmdlXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbW9udGhEcm9wZG93bi52YWwoMSk7XG4gICAgICAgICAgICBtb250aERyb3Bkb3duLnRyaWdnZXIoXCJjaGFuZ2VcIik7XG4gICAgICAgICAgICB5ZWFyRHJvcGRvd24udmFsKHBhcnNlSW50KHllYXJEcm9wZG93bi52YWwoKSkgKyAxKTtcbiAgICAgICAgICAgIHllYXJEcm9wZG93bi50cmlnZ2VyKFwiY2hhbmdlXCIpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBwcmV2TW9udGgub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChtb250aERyb3Bkb3duLnZhbCgpID4gMSkge1xuICAgICAgICAgICAgbW9udGhEcm9wZG93bi52YWwocGFyc2VJbnQobW9udGhEcm9wZG93bi52YWwoKSkgLSAxKTtcbiAgICAgICAgICAgIG1vbnRoRHJvcGRvd24udHJpZ2dlcihcImNoYW5nZVwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1vbnRoRHJvcGRvd24udmFsKDEyKTtcbiAgICAgICAgICAgIG1vbnRoRHJvcGRvd24udHJpZ2dlcihcImNoYW5nZVwiKTtcbiAgICAgICAgICAgIHllYXJEcm9wZG93bi52YWwocGFyc2VJbnQoeWVhckRyb3Bkb3duLnZhbCgpKSAtIDEpO1xuICAgICAgICAgICAgeWVhckRyb3Bkb3duLnRyaWdnZXIoXCJjaGFuZ2VcIik7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChvcHRpb25zLmdvdG9Ub2RheSkge1xuICAgICAgICBnb3RvVG9kYXkub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBtb250aERyb3Bkb3duLnZhbCh0b2RheXNNb250aCk7XG4gICAgICAgICAgICBtb250aERyb3Bkb3duLnRyaWdnZXIoXCJjaGFuZ2VcIik7XG4gICAgICAgICAgICB5ZWFyRHJvcGRvd24udmFsKHRvZGF5c1llYXIpO1xuICAgICAgICAgICAgeWVhckRyb3Bkb3duLnRyaWdnZXIoXCJjaGFuZ2VcIik7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGRyYXdEYXlzKG51bWJlck9mRGF5cywgZGF5T2ZXZWVrSik7XG5cbiAgICAvLyBlbmFibGUgYm9vdHN0cmFwIHRvb2x0aXAgaWYgYm9vdHN0cmFwIGlzIGxvYWRlZFxuICAgIGlmICh0eXBlb2YgJCgpLm1vZGFsID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgJCgnW2RhdGEtdG9nZ2xlPVwidG9vbHRpcFwiXScpLnRvb2x0aXAoKTtcbiAgICB9XG5cbn1cbiIsInZhciBtZWRpYV94bSA9IHdpbmRvdy5tYXRjaE1lZGlhKFwiKG1heC13aWR0aDogNTc1Ljk4cHgpXCIpO1xudmFyIG1lZGlhX3NtID0gd2luZG93Lm1hdGNoTWVkaWEoXCIobWluLXdpZHRoOiA1NzZweCkgYW5kIChtYXgtd2lkdGg6IDc2Ny45OHB4KVwiKTtcbnZhciBtZWRpYV9tZCA9IHdpbmRvdy5tYXRjaE1lZGlhKFwiKG1pbi13aWR0aDogNzY4cHgpIGFuZCAobWF4LXdpZHRoOiA5OTEuOThweClcIik7XG52YXIgbWVkaWFfbGcgPSB3aW5kb3cubWF0Y2hNZWRpYShcIihtaW4td2lkdGg6IDk5MnB4KSBhbmQgKG1heC13aWR0aDogMTE5OS45OHB4KVwiKTtcbnZhciBtZWRpYV94bCA9IHdpbmRvdy5tYXRjaE1lZGlhKFwiKG1pbi13aWR0aDogMTIwMHB4KVwiKTtcblxuXG5mdW5jdGlvbiBldmVudF9tZWRpYV94bShtZWRpYSl7XG5cdGlmKG1lZGlhLm1hdGNoZXMpIHJldHVybiAkKGRvY3VtZW50KS50cmlnZ2VyKCdtZWRpYTp4bScsIFttZWRpYV0pO1xuXHRlbHNlIHJldHVybiAkKGRvY3VtZW50KS50cmlnZ2VyKCdtZWRpYTp4bTpleGl0JywgW21lZGlhXSk7XG59XG5mdW5jdGlvbiBldmVudF9tZWRpYV9zbShtZWRpYSl7XG5cdGlmKG1lZGlhLm1hdGNoZXMpIHJldHVybiAkKGRvY3VtZW50KS50cmlnZ2VyKCdtZWRpYTpzbScsIFttZWRpYV0pO1xuXHRlbHNlIHJldHVybiAkKGRvY3VtZW50KS50cmlnZ2VyKCdtZWRpYTpzbTpleGl0JywgW21lZGlhXSk7XG59XG5mdW5jdGlvbiBldmVudF9tZWRpYV9tZChtZWRpYSl7XG5cdGlmKG1lZGlhLm1hdGNoZXMpIHJldHVybiAkKGRvY3VtZW50KS50cmlnZ2VyKCdtZWRpYTptZCcsIFttZWRpYV0pO1xuXHRlbHNlIHJldHVybiAkKGRvY3VtZW50KS50cmlnZ2VyKCdtZWRpYTptZDpleGl0JywgW21lZGlhXSk7XG59XG5mdW5jdGlvbiBldmVudF9tZWRpYV9sZyhtZWRpYSl7XG5cdGlmKG1lZGlhLm1hdGNoZXMpIHJldHVybiAkKGRvY3VtZW50KS50cmlnZ2VyKCdtZWRpYTpsZycsIFttZWRpYV0pO1xuXHRlbHNlIHJldHVybiAkKGRvY3VtZW50KS50cmlnZ2VyKCdtZWRpYTpsZzpleGl0JywgW21lZGlhXSk7XG59XG5mdW5jdGlvbiBldmVudF9tZWRpYV94bChtZWRpYSl7XG5cdGlmKG1lZGlhLm1hdGNoZXMpIHJldHVybiAkKGRvY3VtZW50KS50cmlnZ2VyKCdtZWRpYTp4bCcsIFttZWRpYV0pO1xuXHRlbHNlIHJldHVybiAkKGRvY3VtZW50KS50cmlnZ2VyKCdtZWRpYTp4bDpleGl0JywgW21lZGlhXSk7XG59XG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XG5cdGV2ZW50X21lZGlhX3htKG1lZGlhX3htKTtcblx0bWVkaWFfeG0uYWRkTGlzdGVuZXIoZXZlbnRfbWVkaWFfeG0pO1xuXG5cdGV2ZW50X21lZGlhX3NtKG1lZGlhX3NtKTtcblx0bWVkaWFfc20uYWRkTGlzdGVuZXIoZXZlbnRfbWVkaWFfc20pO1xuXG5cdGV2ZW50X21lZGlhX21kKG1lZGlhX21kKTtcblx0bWVkaWFfbWQuYWRkTGlzdGVuZXIoZXZlbnRfbWVkaWFfbWQpO1xuXG5cdGV2ZW50X21lZGlhX2xnKG1lZGlhX2xnKTtcblx0bWVkaWFfbGcuYWRkTGlzdGVuZXIoZXZlbnRfbWVkaWFfbGcpO1xuXG5cdGV2ZW50X21lZGlhX3hsKG1lZGlhX3hsKTtcblx0bWVkaWFfeGwuYWRkTGlzdGVuZXIoZXZlbnRfbWVkaWFfeGwpO1xufSlcbiIsImZ1bmN0aW9uIHJlc3BvbnNpdmVfbWVudSgpIHtcbiAgICAkKCcjbWVudScpLnJlbW92ZUNsYXNzKCdkLW5vbmUnKS5hZGRDbGFzcygnZC1mbGV4Jyk7XG4gICAgLy8gJCgnI2Rlc2t0b3AnKS5yZW1vdmVDbGFzcygnZC1ub25lJyk7XG4gICAgJCgnYm9keScpLmFkZENsYXNzKCdyZXNwb25zaXZlLW1lbnUnKTtcbiAgICAkKCcjYnRuLW1lbnUnKS5maW5kKCQoXCIuZmFzXCIpKS5yZW1vdmVDbGFzcygnZmEtYmFycycpLmFkZENsYXNzKCdmYS1hcnJvdy1yaWdodCcpO1xuICAgICQodGhpcykub2ZmKCdjbGljay5yZXNwb25zaXZlLW1lbnUnKTtcbiAgICAkKHRoaXMpLm9uKCdjbGljay5jbG9zZS1yZXNwb25zaXZlLW1lbnUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgJCh0aGlzKS5vZmYoJ2NsaWNrLmNsb3NlLXJlc3BvbnNpdmUtbWVudScpO1xuICAgICAgICAkKHRoaXMpLm9uKCdjbGljay5yZXNwb25zaXZlLW1lbnUnLCByZXNwb25zaXZlX21lbnUpO1xuICAgICAgICAkKCcjbWVudScpLmFkZENsYXNzKCdkLW5vbmUnKS5yZW1vdmVDbGFzcygnZC1mbGV4Jyk7XG4gICAgICAgIC8vICQoJyNkZXNrdG9wJykuYWRkQ2xhc3MoJ2Qtbm9uZScpO1xuICAgICAgICAkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ3Jlc3BvbnNpdmUtbWVudScpO1xuICAgICAgICAkKCcjYnRuLW1lbnUnKS5maW5kKCQoXCIuZmFzXCIpKS5yZW1vdmVDbGFzcygnZmEtYXJyb3ctcmlnaHQnKS5hZGRDbGFzcygnZmEtYmFycycpO1xuICAgIH0pO1xufVxuXG4kKGRvY3VtZW50KS5vbignbWVkaWE6eG0gbWVkaWE6c20nLCBmdW5jdGlvbihldmVudCwgbWVkaWEpIHtcbiAgICAkKFwiYm9keTpub3QoLnJlc3BvbnNpdmUtbWVudSkgI2J0bi1tZW51XCIpLm9uKCdjbGljay5yZXNwb25zaXZlLW1lbnUnLCByZXNwb25zaXZlX21lbnUpO1xuXG4gICAgdmFyIG1lbnUgPSAkKCcjbWVudScpO1xuICAgIHZhciBkZXNrdG9wID0gJCgnI2Rlc2t0b3AnKTtcbiAgICB2YXIgYnRuX21lbnUgPSAkKCcjYnRuLW1lbnUnKTtcbiAgICAkKGRvY3VtZW50KS5tb3VzZXVwKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgKCFtZW51LmlzKGUudGFyZ2V0KSAmJiBtZW51LmhhcyhlLnRhcmdldCkubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgJiYgKCFkZXNrdG9wLmlzKGUudGFyZ2V0KSAmJiBkZXNrdG9wLmhhcyhlLnRhcmdldCkubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgJiYgKCFidG5fbWVudS5pcyhlLnRhcmdldCkgJiYgYnRuX21lbnUuaGFzKGUudGFyZ2V0KS5sZW5ndGggPT09IDApXG4gICAgICAgICAgICApXG4gICAgICAgIHtcbiAgICAgICAgICAgICQoXCJib2R5LnJlc3BvbnNpdmUtbWVudSAjYnRuLW1lbnVcIikudHJpZ2dlcignY2xpY2suY2xvc2UtcmVzcG9uc2l2ZS1tZW51Jyk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vICQoXCJib2R5XCIpLnN3aXBlKHtcbiAgICAvLyAgICAgc3dpcGU6IGZ1bmN0aW9uKGV2ZW50LCBkaXJlY3Rpb24sIGRpc3RhbmNlLCBkdXJhdGlvbiwgZmluZ2VyQ291bnQsIGZpbmdlckRhdGEpIHtcbiAgICAvLyAgICAgICAgIGlmIChkaXJlY3Rpb24gPT0gJ2xlZnQnKSB7XG4gICAgLy8gICAgICAgICAgICAgJChcImJvZHk6bm90KC5yZXNwb25zaXZlLW1lbnUpICNidG4tbWVudVwiKS50cmlnZ2VyKCdjbGljay5yZXNwb25zaXZlLW1lbnUnKTtcbiAgICAvLyAgICAgICAgIH1cblxuICAgIC8vICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PSAncmlnaHQnKSB7XG4gICAgLy8gICAgICAgICAgICAgJChcImJvZHkucmVzcG9uc2l2ZS1tZW51ICNidG4tbWVudVwiKS50cmlnZ2VyKCdjbGljay5jbG9zZS1yZXNwb25zaXZlLW1lbnUnKTtcbiAgICAvLyAgICAgICAgIH1cblxuICAgIC8vICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PSAndXAnIHx8IGRpcmVjdGlvbiA9PSAnZG93bicpIHtcbiAgICAvLyAgICAgICAgICAgICBpZiAoIW1lbnUuaXMoZXZlbnQudGFyZ2V0KSAmJiBtZW51LmhhcyhldmVudC50YXJnZXQpLmxlbmd0aCA9PT0gMCkge1xuICAgIC8vICAgICAgICAgICAgICAgICAkKFwiYm9keS5yZXNwb25zaXZlLW1lbnUgI2J0bi1tZW51XCIpLnRyaWdnZXIoJ2NsaWNrLmNsb3NlLXJlc3BvbnNpdmUtbWVudScpO1xuICAgIC8vICAgICAgICAgICAgIH1cbiAgICAvLyAgICAgICAgIH1cbiAgICAvLyAgICAgfVxuICAgIC8vIH0pO1xufSk7XG5cbiQoZG9jdW1lbnQpLm9uKCdtZWRpYTptZCBtZWRpYTpsZyBtZWRpYTp4bCcsIGZ1bmN0aW9uKGV2ZW50LCBtZWRpYSkge1xuICAgICQoXCJib2R5LnJlc3BvbnNpdmUtbWVudSAjYnRuLW1lbnVcIikudHJpZ2dlcignY2xpY2suY2xvc2UtcmVzcG9uc2l2ZS1tZW51Jyk7XG4gICAgJChcIiNidG4tbWVudVwiKS5vZmYoJ2NsaWNrLnJlc3BvbnNpdmUtbWVudScpO1xuICAgIC8vICQoXCIjYnRuLW1lbnVcIikub2ZmKCdjbGljay5jbG9zZS1yZXNwb25zaXZlLW1lbnUnKTtcbiAgICAvLyAkKCcjbWVudScpLmFkZENsYXNzKCdkLW5vbmUnKS5yZW1vdmVDbGFzcygnZC1mbGV4Jyk7XG4gICAgLy8gJCgnI2Rlc2t0b3AnKS5hZGRDbGFzcygnZC1ub25lJyk7XG4gICAgLy8gJCgnYm9keScpLnJlbW92ZUNsYXNzKCdyZXNwb25zaXZlLW1lbnUnKTtcbiAgICAvLyAkKCcjYnRuLW1lbnUnKS5maW5kKCQoXCIuZmFzXCIpKS5yZW1vdmVDbGFzcygnZmEtYXJyb3ctcmlnaHQnKS5hZGRDbGFzcygnZmEtYmFycycpO1xufSk7IiwiKGZ1bmN0aW9uICgpIHtcblx0ZnVuY3Rpb24gVml3RmlsZSgpXG5cdHtcblx0XHQkKCcuY3VzdG9tLWZpbGUtaW5wdXQnLCB0aGlzKS5vbignY2hhbmdlJywgZnVuY3Rpb24oKXtcblx0XHRcdGlmICghd2luZG93LkZpbGUgJiYgIXdpbmRvdy5GaWxlUmVhZGVyICYmICF3aW5kb3cuRmlsZUxpc3QgJiYgIXdpbmRvdy5CbG9iKSB7XG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ0ZpbGVSZWFkZXIgdW5zdXBwb3J0ZWQhJyk7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHRcdHZhciBmaWxlX2luZGV4ID0gMDtcblx0XHRcdHZhciBmaWxlO1xuXHRcdFx0JCh0aGlzKS5uZXh0KCkuaHRtbCgnJyk7XG5cdFx0XHR2YXIgZmlsZXMgPSBbXTtcblx0XHRcdHdoaWxlIChmaWxlID0gdGhpcy5maWxlcy5pdGVtKGZpbGVfaW5kZXgrKykpXG5cdFx0XHR7XG5cdFx0XHRcdGZpbGVzLnB1c2goZmlsZS5uYW1lKTtcblx0XHRcdH1cblx0XHRcdCQodGhpcykubmV4dCgpLmh0bWwoZmlsZXMuam9pbignIDogJykpO1xuXHRcdH0pO1xuXHR9XG5cdCQoZG9jdW1lbnQpLm9uKCdzdGF0aW86Z2xvYmFsOnJlbmRlclJlc3BvbnNlJywgZnVuY3Rpb24gKGV2ZW50LCBiYXNlLCBjb250ZXgpIHtcblx0XHRiYXNlLmVhY2goZnVuY3Rpb24gKCkge1xuXHRcdFx0Vml3RmlsZS5jYWxsKHRoaXMpO1xuXHRcdH0pO1xuXHR9KTtcblx0Vml3RmlsZS5jYWxsKGRvY3VtZW50KTtcbn0pKCk7Il19